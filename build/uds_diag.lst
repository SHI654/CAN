ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"uds_diag.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.UDS_Init,"ax",%progbits
  18              		.align	1
  19              		.global	UDS_Init
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	UDS_Init:
  25              	.LFB73:
  26              		.file 1 "Src/uds_diag.c"
   1:Src/uds_diag.c **** /*
   2:Src/uds_diag.c ****  * UDS_APP_Diag.c
   3:Src/uds_diag.c ****  *
   4:Src/uds_diag.c ****  *  Created on: Jun 4, 2024
   5:Src/uds_diag.c ****  *      Author: Omnia
   6:Src/uds_diag.c ****  */
   7:Src/uds_diag.c **** 
   8:Src/uds_diag.c **** #include "uds_diag.h"
   9:Src/uds_diag.c **** 
  10:Src/uds_diag.c **** // there are many ser. has sub,  this var indecate for which sub servise
  11:Src/uds_diag.c **** #define sub_func_control  	1
  12:Src/uds_diag.c **** #define Num_of_Services 	5
  13:Src/uds_diag.c **** 
  14:Src/uds_diag.c **** Std_ReturnType CanTp_Transmit(uint32_t TxPduId, PduInfoType* PduInfoPtr);
  15:Src/uds_diag.c **** 
  16:Src/uds_diag.c **** 
  17:Src/uds_diag.c **** PduInfoType Read_Data_Client;
  18:Src/uds_diag.c **** PduInfoType Write_Data_Client;
  19:Src/uds_diag.c **** PduInfoType Control_Session_Default;
  20:Src/uds_diag.c **** PduInfoType Send_Security_Seed;
  21:Src/uds_diag.c **** PduInfoType Control_Session_Extended;
  22:Src/uds_diag.c **** PduInfoType PduInfoTypePtr;
  23:Src/uds_diag.c **** volatile uint8_t global_sec_flag = 0;
  24:Src/uds_diag.c **** volatile uint8_t global_session = DefaultSession;
  25:Src/uds_diag.c **** 
  26:Src/uds_diag.c **** volatile uint8_t Security_Service_Availability_Flag = Not_Available;
  27:Src/uds_diag.c **** //uint8_t seed =50 ; // for example
  28:Src/uds_diag.c **** /*Security Variables */
  29:Src/uds_diag.c **** volatile uint32_t Sec_u32SeedValue = 0 ;
  30:Src/uds_diag.c **** Security_Access_State Sec_State = Un_Secure ;
  31:Src/uds_diag.c **** volatile uint32_t Oil_Pressure_var = 0x778899AA;
  32:Src/uds_diag.c **** volatile uint32_t Oil_Temp_var = 0x5566;
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 2


  33:Src/uds_diag.c **** volatile uint8_t VIN_number_var[17]= { 0x11, 0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11,0x11
  34:Src/uds_diag.c **** //volatile uint32_t VIN_number_var;
  35:Src/uds_diag.c **** ServiceInfo pos_Response;
  36:Src/uds_diag.c **** 
  37:Src/uds_diag.c **** ServiceInfo Control;
  38:Src/uds_diag.c **** PduInfoType msg;
  39:Src/uds_diag.c **** extern TIM_HandleTypeDef htim6;
  40:Src/uds_diag.c **** volatile uint8_t flag_sub_fun;
  41:Src/uds_diag.c **** uint8_t UDS_Tx_Confirm = 0;
  42:Src/uds_diag.c **** PduInfoType* UDS_Struct;
  43:Src/uds_diag.c **** PduInfoType* PduDataPTR;
  44:Src/uds_diag.c **** 
  45:Src/uds_diag.c **** uint8_t* seed = NULL;
  46:Src/uds_diag.c **** uint8_t* key = NULL;
  47:Src/uds_diag.c **** 
  48:Src/uds_diag.c **** 
  49:Src/uds_diag.c **** uint8_t SupressedPosRes_CLient = 1;
  50:Src/uds_diag.c **** uint8_t SupressedPosRes_Server = 1;
  51:Src/uds_diag.c **** 
  52:Src/uds_diag.c **** uint8_t Source_Address = Client_Address;
  53:Src/uds_diag.c **** uint8_t Target_Address = Tempreture_Address;
  54:Src/uds_diag.c **** 
  55:Src/uds_diag.c **** 
  56:Src/uds_diag.c **** /***************************************************************Init*******************************
  57:Src/uds_diag.c **** 
  58:Src/uds_diag.c **** 
  59:Src/uds_diag.c **** void UDS_Init(void)
  60:Src/uds_diag.c **** {
  27              		.loc 1 60 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  61:Src/uds_diag.c **** 
  62:Src/uds_diag.c **** }
  32              		.loc 1 62 1 view .LVU1
  33 0000 7047     		bx	lr
  34              		.cfi_endproc
  35              	.LFE73:
  37              		.section	.text.UDS_Tester_Presenter_Client,"ax",%progbits
  38              		.align	1
  39              		.global	UDS_Tester_Presenter_Client
  40              		.syntax unified
  41              		.thumb
  42              		.thumb_func
  44              	UDS_Tester_Presenter_Client:
  45              	.LFB74:
  63:Src/uds_diag.c **** 
  64:Src/uds_diag.c **** 
  65:Src/uds_diag.c **** 
  66:Src/uds_diag.c **** void UDS_Tester_Presenter_Client(void)
  67:Src/uds_diag.c **** {
  46              		.loc 1 67 1 view -0
  47              		.cfi_startproc
  48              		@ args = 0, pretend = 0, frame = 0
  49              		@ frame_needed = 0, uses_anonymous_args = 0
  50 0000 08B5     		push	{r3, lr}
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 3


  51              	.LCFI0:
  52              		.cfi_def_cfa_offset 8
  53              		.cfi_offset 3, -8
  54              		.cfi_offset 14, -4
  68:Src/uds_diag.c **** 	PduInfoTypePtr.Data[PCI]= 5; 	// TESTER_PRESENT_PCI
  55              		.loc 1 68 2 view .LVU3
  56              		.loc 1 68 26 is_stmt 0 view .LVU4
  57 0002 174B     		ldr	r3, .L9
  58 0004 0522     		movs	r2, #5
  59 0006 1A70     		strb	r2, [r3]
  69:Src/uds_diag.c **** 	PduInfoTypePtr.Data[ADD_Source]= Client_Address; 	// ADD_Source
  60              		.loc 1 69 2 is_stmt 1 view .LVU5
  61              		.loc 1 69 33 is_stmt 0 view .LVU6
  62 0008 F122     		movs	r2, #241
  63 000a 5A70     		strb	r2, [r3, #1]
  70:Src/uds_diag.c **** 
  71:Src/uds_diag.c **** 	if( Target_Address == Tempreture_Address)
  64              		.loc 1 71 2 is_stmt 1 view .LVU7
  65              		.loc 1 71 21 is_stmt 0 view .LVU8
  66 000c 154B     		ldr	r3, .L9+4
  67 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  68              		.loc 1 71 4 view .LVU9
  69 0010 3D2B     		cmp	r3, #61
  70 0012 07D0     		beq	.L7
  72:Src/uds_diag.c **** 	{
  73:Src/uds_diag.c **** 		PduInfoTypePtr.Data[ADD_Target]= Tempreture_Address; 	// ADD_Target
  74:Src/uds_diag.c **** 	}
  75:Src/uds_diag.c **** 	else if( Target_Address == Pressure_Address)
  71              		.loc 1 75 7 is_stmt 1 view .LVU10
  72              		.loc 1 75 9 is_stmt 0 view .LVU11
  73 0014 4D2B     		cmp	r3, #77
  74 0016 1ED0     		beq	.L8
  76:Src/uds_diag.c **** 	{
  77:Src/uds_diag.c **** 		PduInfoTypePtr.Data[ADD_Target]= Pressure_Address; 	// ADD_Target
  78:Src/uds_diag.c **** 	}
  79:Src/uds_diag.c **** 	else if( Target_Address == Functional_Address)
  75              		.loc 1 79 7 is_stmt 1 view .LVU12
  76              		.loc 1 79 9 is_stmt 0 view .LVU13
  77 0018 FF2B     		cmp	r3, #255
  78 001a 06D1     		bne	.L4
  80:Src/uds_diag.c **** 	{
  81:Src/uds_diag.c **** 		PduInfoTypePtr.Data[ADD_Target]= Functional_Address; 	// ADD_Target
  79              		.loc 1 81 3 is_stmt 1 view .LVU14
  80              		.loc 1 81 34 is_stmt 0 view .LVU15
  81 001c 104B     		ldr	r3, .L9
  82 001e FF22     		movs	r2, #255
  83 0020 9A70     		strb	r2, [r3, #2]
  84 0022 02E0     		b	.L4
  85              	.L7:
  73:Src/uds_diag.c **** 	}
  86              		.loc 1 73 3 is_stmt 1 view .LVU16
  73:Src/uds_diag.c **** 	}
  87              		.loc 1 73 34 is_stmt 0 view .LVU17
  88 0024 0E4B     		ldr	r3, .L9
  89 0026 3D22     		movs	r2, #61
  90 0028 9A70     		strb	r2, [r3, #2]
  91              	.L4:
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 4


  82:Src/uds_diag.c **** 	}
  83:Src/uds_diag.c **** 	else
  84:Src/uds_diag.c **** 	{
  85:Src/uds_diag.c **** 		//Nothing
  86:Src/uds_diag.c **** 	}
  92              		.loc 1 86 2 is_stmt 1 view .LVU18
  87:Src/uds_diag.c **** 
  88:Src/uds_diag.c **** 
  89:Src/uds_diag.c **** 	PduInfoTypePtr.Data[SID]= Tester_Representer_Service; 	// TESTER_PRESENT_SID
  93              		.loc 1 89 2 view .LVU19
  94              		.loc 1 89 26 is_stmt 0 view .LVU20
  95 002a 0D49     		ldr	r1, .L9
  96 002c 3E23     		movs	r3, #62
  97 002e 0B70     		strb	r3, [r1]
  90:Src/uds_diag.c **** 	PduInfoTypePtr.Data[Sub_F]= 0x00; 	// TESTER_PRESENT_Sub_Fun
  98              		.loc 1 90 2 is_stmt 1 view .LVU21
  99              		.loc 1 90 28 is_stmt 0 view .LVU22
 100 0030 0020     		movs	r0, #0
 101 0032 0871     		strb	r0, [r1, #4]
  91:Src/uds_diag.c **** 	PduInfoTypePtr.Length = 5;		// TESTER_PRESENT_LENGTH
 102              		.loc 1 91 2 is_stmt 1 view .LVU23
 103              		.loc 1 91 24 is_stmt 0 view .LVU24
 104 0034 0523     		movs	r3, #5
 105 0036 C1F80032 		str	r3, [r1, #512]
  92:Src/uds_diag.c **** 
  93:Src/uds_diag.c **** 	//Check supressed Positive Responce
  94:Src/uds_diag.c **** 	PduInfoTypePtr.Data[Sub_F] |= 0b10000000;
 106              		.loc 1 94 2 is_stmt 1 view .LVU25
 107              		.loc 1 94 29 is_stmt 0 view .LVU26
 108 003a 8023     		movs	r3, #128
 109 003c 0B71     		strb	r3, [r1, #4]
  95:Src/uds_diag.c **** 	PduInfoTypePtr.Data[Sub_F] &= ((SupressedPosRes_CLient<<7)|0x7F);
 110              		.loc 1 95 2 is_stmt 1 view .LVU27
 111              		.loc 1 95 56 is_stmt 0 view .LVU28
 112 003e 0A4B     		ldr	r3, .L9+8
 113 0040 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 114 0042 DB01     		lsls	r3, r3, #7
 115              		.loc 1 95 60 view .LVU29
 116 0044 43F07F03 		orr	r3, r3, #127
 117 0048 5BB2     		sxtb	r3, r3
 118              		.loc 1 95 29 view .LVU30
 119 004a 23F07F03 		bic	r3, r3, #127
 120 004e 0B71     		strb	r3, [r1, #4]
  96:Src/uds_diag.c **** 	//Sending Frame to Can TP
  97:Src/uds_diag.c **** 	CanTp_Transmit(0, &PduInfoTypePtr);
 121              		.loc 1 97 2 is_stmt 1 view .LVU31
 122 0050 FFF7FEFF 		bl	CanTp_Transmit
 123              	.LVL0:
  98:Src/uds_diag.c **** }
 124              		.loc 1 98 1 is_stmt 0 view .LVU32
 125 0054 08BD     		pop	{r3, pc}
 126              	.L8:
  77:Src/uds_diag.c **** 	}
 127              		.loc 1 77 3 is_stmt 1 view .LVU33
  77:Src/uds_diag.c **** 	}
 128              		.loc 1 77 34 is_stmt 0 view .LVU34
 129 0056 024B     		ldr	r3, .L9
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 5


 130 0058 4D22     		movs	r2, #77
 131 005a 9A70     		strb	r2, [r3, #2]
 132 005c E5E7     		b	.L4
 133              	.L10:
 134 005e 00BF     		.align	2
 135              	.L9:
 136 0060 00000000 		.word	.LANCHOR0
 137 0064 00000000 		.word	.LANCHOR1
 138 0068 00000000 		.word	.LANCHOR2
 139              		.cfi_endproc
 140              	.LFE74:
 142              		.section	.text.UDS_Read_Data_Client,"ax",%progbits
 143              		.align	1
 144              		.global	UDS_Read_Data_Client
 145              		.syntax unified
 146              		.thumb
 147              		.thumb_func
 149              	UDS_Read_Data_Client:
 150              	.LVL1:
 151              	.LFB75:
  99:Src/uds_diag.c **** 
 100:Src/uds_diag.c **** 
 101:Src/uds_diag.c **** 
 102:Src/uds_diag.c **** /***************************************************************Read*******************************
 103:Src/uds_diag.c **** 
 104:Src/uds_diag.c **** //Send Read Frame
 105:Src/uds_diag.c **** void UDS_Read_Data_Client(DID did)
 106:Src/uds_diag.c **** {
 152              		.loc 1 106 1 is_stmt 1 view -0
 153              		.cfi_startproc
 154              		@ args = 0, pretend = 0, frame = 0
 155              		@ frame_needed = 0, uses_anonymous_args = 0
 156              		.loc 1 106 1 is_stmt 0 view .LVU36
 157 0000 08B5     		push	{r3, lr}
 158              	.LCFI1:
 159              		.cfi_def_cfa_offset 8
 160              		.cfi_offset 3, -8
 161              		.cfi_offset 14, -4
 107:Src/uds_diag.c **** 	Read_Data_Client.Data[PCI] = 6;
 162              		.loc 1 107 2 is_stmt 1 view .LVU37
 163              		.loc 1 107 29 is_stmt 0 view .LVU38
 164 0002 254B     		ldr	r3, .L23
 165 0004 0622     		movs	r2, #6
 166 0006 1A70     		strb	r2, [r3]
 108:Src/uds_diag.c **** 	Read_Data_Client.Data[ADD_Source]= Client_Address; 	// ADD_Source
 167              		.loc 1 108 2 is_stmt 1 view .LVU39
 168              		.loc 1 108 35 is_stmt 0 view .LVU40
 169 0008 F122     		movs	r2, #241
 170 000a 5A70     		strb	r2, [r3, #1]
 109:Src/uds_diag.c **** 
 110:Src/uds_diag.c **** 
 111:Src/uds_diag.c **** 	if( Target_Address == Tempreture_Address)
 171              		.loc 1 111 2 is_stmt 1 view .LVU41
 172              		.loc 1 111 21 is_stmt 0 view .LVU42
 173 000c 234B     		ldr	r3, .L23+4
 174 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 175              		.loc 1 111 4 view .LVU43
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 6


 176 0010 3D2B     		cmp	r3, #61
 177 0012 07D0     		beq	.L19
 112:Src/uds_diag.c **** 	{
 113:Src/uds_diag.c **** 		Read_Data_Client.Data[ADD_Target]= Tempreture_Address; 	// ADD_Target
 114:Src/uds_diag.c **** 	}
 115:Src/uds_diag.c **** 	else if( Target_Address == Pressure_Address)
 178              		.loc 1 115 7 is_stmt 1 view .LVU44
 179              		.loc 1 115 9 is_stmt 0 view .LVU45
 180 0014 4D2B     		cmp	r3, #77
 181 0016 20D0     		beq	.L20
 116:Src/uds_diag.c **** 	{
 117:Src/uds_diag.c **** 		Read_Data_Client.Data[ADD_Target]= Pressure_Address; 	// ADD_Target
 118:Src/uds_diag.c **** 	}
 119:Src/uds_diag.c **** 	else if( Target_Address == Functional_Address)
 182              		.loc 1 119 7 is_stmt 1 view .LVU46
 183              		.loc 1 119 9 is_stmt 0 view .LVU47
 184 0018 FF2B     		cmp	r3, #255
 185 001a 06D1     		bne	.L13
 120:Src/uds_diag.c **** 	{
 121:Src/uds_diag.c **** 		Read_Data_Client.Data[ADD_Target]= Functional_Address; 	// ADD_Target
 186              		.loc 1 121 3 is_stmt 1 view .LVU48
 187              		.loc 1 121 36 is_stmt 0 view .LVU49
 188 001c 1E4B     		ldr	r3, .L23
 189 001e FF22     		movs	r2, #255
 190 0020 9A70     		strb	r2, [r3, #2]
 191 0022 02E0     		b	.L13
 192              	.L19:
 113:Src/uds_diag.c **** 	}
 193              		.loc 1 113 3 is_stmt 1 view .LVU50
 113:Src/uds_diag.c **** 	}
 194              		.loc 1 113 36 is_stmt 0 view .LVU51
 195 0024 1C4B     		ldr	r3, .L23
 196 0026 3D22     		movs	r2, #61
 197 0028 9A70     		strb	r2, [r3, #2]
 198              	.L13:
 122:Src/uds_diag.c **** 	}
 123:Src/uds_diag.c **** 	else
 124:Src/uds_diag.c **** 	{
 125:Src/uds_diag.c **** 		//Nothing
 126:Src/uds_diag.c **** 	}
 199              		.loc 1 126 2 is_stmt 1 view .LVU52
 127:Src/uds_diag.c **** 
 128:Src/uds_diag.c **** 	Read_Data_Client.Data[SID] = Read_Service; //SID of Read
 200              		.loc 1 128 2 view .LVU53
 201              		.loc 1 128 29 is_stmt 0 view .LVU54
 202 002a 1B4B     		ldr	r3, .L23
 203 002c 2222     		movs	r2, #34
 204 002e 1A70     		strb	r2, [r3]
 129:Src/uds_diag.c **** 	Read_Data_Client.Length = 6; //length of Read frame
 205              		.loc 1 129 2 is_stmt 1 view .LVU55
 206              		.loc 1 129 26 is_stmt 0 view .LVU56
 207 0030 0622     		movs	r2, #6
 208 0032 C3F80022 		str	r2, [r3, #512]
 130:Src/uds_diag.c **** 
 131:Src/uds_diag.c **** 	//check DID which Data
 132:Src/uds_diag.c **** 	if(did == Oil_Temp)
 209              		.loc 1 132 2 is_stmt 1 view .LVU57
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 7


 210              		.loc 1 132 4 is_stmt 0 view .LVU58
 211 0036 4FF23D13 		movw	r3, #61757
 212 003a 9842     		cmp	r0, r3
 213 003c 11D0     		beq	.L21
 133:Src/uds_diag.c **** 	{
 134:Src/uds_diag.c **** 		Read_Data_Client.Data[DID_1] = Oil_Temp_First_byte;
 135:Src/uds_diag.c **** 		Read_Data_Client.Data[DID_2] = Oil_Temp_Second_byte;
 136:Src/uds_diag.c **** 	}
 137:Src/uds_diag.c **** 	else if (did == Oil_Pressure)
 214              		.loc 1 137 7 is_stmt 1 view .LVU59
 215              		.loc 1 137 10 is_stmt 0 view .LVU60
 216 003e 4FF23D53 		movw	r3, #62781
 217 0042 9842     		cmp	r0, r3
 218 0044 21D0     		beq	.L22
 138:Src/uds_diag.c **** 	{
 139:Src/uds_diag.c **** 		Read_Data_Client.Data[DID_1] = Oil_Pressure_First_byte;
 140:Src/uds_diag.c **** 		Read_Data_Client.Data[DID_2] = Oil_Pressure_Second_byte;
 141:Src/uds_diag.c **** 	}
 142:Src/uds_diag.c **** 	else if (did == VIN_number)
 219              		.loc 1 142 7 is_stmt 1 view .LVU61
 220              		.loc 1 142 10 is_stmt 0 view .LVU62
 221 0046 4FF23D23 		movw	r3, #62013
 222 004a 9842     		cmp	r0, r3
 223 004c 0CD1     		bne	.L16
 143:Src/uds_diag.c **** 	{
 144:Src/uds_diag.c **** 		Read_Data_Client.Data[DID_1] = VIN_number_First_byte;
 224              		.loc 1 144 3 is_stmt 1 view .LVU63
 225              		.loc 1 144 32 is_stmt 0 view .LVU64
 226 004e 124B     		ldr	r3, .L23
 227 0050 F222     		movs	r2, #242
 228 0052 5A70     		strb	r2, [r3, #1]
 145:Src/uds_diag.c **** 		Read_Data_Client.Data[DID_2] = VIN_number_Second_byte;
 229              		.loc 1 145 3 is_stmt 1 view .LVU65
 230              		.loc 1 145 32 is_stmt 0 view .LVU66
 231 0054 3D22     		movs	r2, #61
 232 0056 9A70     		strb	r2, [r3, #2]
 233 0058 06E0     		b	.L16
 234              	.L20:
 117:Src/uds_diag.c **** 	}
 235              		.loc 1 117 3 is_stmt 1 view .LVU67
 117:Src/uds_diag.c **** 	}
 236              		.loc 1 117 36 is_stmt 0 view .LVU68
 237 005a 0F4B     		ldr	r3, .L23
 238 005c 4D22     		movs	r2, #77
 239 005e 9A70     		strb	r2, [r3, #2]
 240 0060 E3E7     		b	.L13
 241              	.L21:
 134:Src/uds_diag.c **** 		Read_Data_Client.Data[DID_2] = Oil_Temp_Second_byte;
 242              		.loc 1 134 3 is_stmt 1 view .LVU69
 135:Src/uds_diag.c **** 	}
 243              		.loc 1 135 3 view .LVU70
 135:Src/uds_diag.c **** 	}
 244              		.loc 1 135 32 is_stmt 0 view .LVU71
 245 0062 0D4B     		ldr	r3, .L23
 246 0064 3D22     		movs	r2, #61
 247 0066 9A70     		strb	r2, [r3, #2]
 248              	.L16:
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 8


 146:Src/uds_diag.c **** 	}
 147:Src/uds_diag.c **** 	else
 148:Src/uds_diag.c **** 	{
 149:Src/uds_diag.c **** 		//Another DID
 150:Src/uds_diag.c **** 	}
 249              		.loc 1 150 2 is_stmt 1 view .LVU72
 151:Src/uds_diag.c **** 
 152:Src/uds_diag.c **** 	//Check supressed Positive Responce
 153:Src/uds_diag.c **** 	Read_Data_Client.Data[DID_1] |= 0b10000000;
 250              		.loc 1 153 2 view .LVU73
 251              		.loc 1 153 31 is_stmt 0 view .LVU74
 252 0068 0B49     		ldr	r1, .L23
 253 006a 4B78     		ldrb	r3, [r1, #1]	@ zero_extendqisi2
 254 006c 43F08002 		orr	r2, r3, #128
 255 0070 4A70     		strb	r2, [r1, #1]
 154:Src/uds_diag.c **** 	Read_Data_Client.Data[DID_1] &= ((SupressedPosRes_CLient<<7)|0x7F);
 256              		.loc 1 154 2 is_stmt 1 view .LVU75
 257              		.loc 1 154 58 is_stmt 0 view .LVU76
 258 0072 0B4B     		ldr	r3, .L23+8
 259 0074 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 260 0076 DB01     		lsls	r3, r3, #7
 261              		.loc 1 154 62 view .LVU77
 262 0078 43F07F03 		orr	r3, r3, #127
 263 007c 5BB2     		sxtb	r3, r3
 264              		.loc 1 154 31 view .LVU78
 265 007e 1340     		ands	r3, r3, r2
 266 0080 4B70     		strb	r3, [r1, #1]
 155:Src/uds_diag.c **** 	//Send Frame to Can TP
 156:Src/uds_diag.c **** 	CanTp_Transmit(0, &Read_Data_Client);
 267              		.loc 1 156 2 is_stmt 1 view .LVU79
 268 0082 0020     		movs	r0, #0
 269              	.LVL2:
 270              		.loc 1 156 2 is_stmt 0 view .LVU80
 271 0084 FFF7FEFF 		bl	CanTp_Transmit
 272              	.LVL3:
 157:Src/uds_diag.c **** 
 158:Src/uds_diag.c **** 	//For Debugging
 159:Src/uds_diag.c **** 	//HAL_UART_Transmit(&huart2, "\r\nRead Frame Client:", 50, HAL_MAX_DELAY);
 160:Src/uds_diag.c **** 	//sendHexArrayAsASCII(Read_Data_Client.Data, Read_Data_Client.Length);
 161:Src/uds_diag.c **** 	//HAL_UART_Transmit(&huart2, "\r\n", 50, HAL_MAX_DELAY);
 162:Src/uds_diag.c **** }
 273              		.loc 1 162 1 view .LVU81
 274 0088 08BD     		pop	{r3, pc}
 275              	.LVL4:
 276              	.L22:
 139:Src/uds_diag.c **** 		Read_Data_Client.Data[DID_2] = Oil_Pressure_Second_byte;
 277              		.loc 1 139 3 is_stmt 1 view .LVU82
 139:Src/uds_diag.c **** 		Read_Data_Client.Data[DID_2] = Oil_Pressure_Second_byte;
 278              		.loc 1 139 32 is_stmt 0 view .LVU83
 279 008a 034B     		ldr	r3, .L23
 280 008c F522     		movs	r2, #245
 281 008e 5A70     		strb	r2, [r3, #1]
 140:Src/uds_diag.c **** 	}
 282              		.loc 1 140 3 is_stmt 1 view .LVU84
 140:Src/uds_diag.c **** 	}
 283              		.loc 1 140 32 is_stmt 0 view .LVU85
 284 0090 3D22     		movs	r2, #61
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 9


 285 0092 9A70     		strb	r2, [r3, #2]
 286 0094 E8E7     		b	.L16
 287              	.L24:
 288 0096 00BF     		.align	2
 289              	.L23:
 290 0098 00000000 		.word	.LANCHOR3
 291 009c 00000000 		.word	.LANCHOR1
 292 00a0 00000000 		.word	.LANCHOR2
 293              		.cfi_endproc
 294              	.LFE75:
 296              		.section	.text.UDS_Control_Session_Default,"ax",%progbits
 297              		.align	1
 298              		.global	UDS_Control_Session_Default
 299              		.syntax unified
 300              		.thumb
 301              		.thumb_func
 303              	UDS_Control_Session_Default:
 304              	.LFB77:
 163:Src/uds_diag.c **** 
 164:Src/uds_diag.c **** 
 165:Src/uds_diag.c **** //Recieve Read Frame
 166:Src/uds_diag.c **** //before in call back: SID is checked
 167:Src/uds_diag.c **** //void UDS_Read_Data_Server( PduInfoType* PduInfoTypePtr )
 168:Src/uds_diag.c **** //{
 169:Src/uds_diag.c **** //	ServiceInfo Read_Data_Server ;
 170:Src/uds_diag.c **** //	Read_Data_Server.SID = 0x22;
 171:Src/uds_diag.c **** //	Read_Data_Server.SUB_FUNC = -1;
 172:Src/uds_diag.c **** //	//if DID --> Oil_Temp
 173:Src/uds_diag.c **** //	if((PduInfoTypeptr->Data[SID] == 0xF1) && (PduInfoTypeptr->Data[Sub_F] == 0x3D) )
 174:Src/uds_diag.c **** //	{
 175:Src/uds_diag.c **** //		Read_Data_Server.DID[0] = 0xF1;
 176:Src/uds_diag.c **** //		Read_Data_Server.DID[1] = 0x3D;
 177:Src/uds_diag.c **** //		Read_Data_Server.DID_Length = 2;
 178:Src/uds_diag.c **** //		//For Debugging
 179:Src/uds_diag.c **** //		//HAL_UART_Transmit(&huart2, "\r\nRead Frame Client DID:", 50, HAL_MAX_DELAY);
 180:Src/uds_diag.c **** //		//sendHexArrayAsASCII(Read_Data_Server.DID, Read_Data_Server.DID_Length );
 181:Src/uds_diag.c **** //		//HAL_UART_Transmit(&huart2, "\r\n", 50, HAL_MAX_DELAY);
 182:Src/uds_diag.c **** //
 183:Src/uds_diag.c **** //		Read_Data_Server.Data[SID] = 0x55; //value of Oil_Temp
 184:Src/uds_diag.c **** //		Read_Data_Server.Data[Sub_F] = 0x66; //value of Oil_Temp
 185:Src/uds_diag.c **** //		Read_Data_Server.Data_Length = 2;
 186:Src/uds_diag.c **** //		//Send +ve responce
 187:Src/uds_diag.c **** //		//UDS_Send_Pos_Res(Read_Data_Server);
 188:Src/uds_diag.c **** //
 189:Src/uds_diag.c **** //		//For Debugging
 190:Src/uds_diag.c **** //		//HAL_UART_Transmit(&huart2, "\r\nRead Frame Server Data:", 50, HAL_MAX_DELAY);
 191:Src/uds_diag.c **** //		//sendHexArrayAsASCII(Read_Data_Server.Data, Read_Data_Server.Data_Length);
 192:Src/uds_diag.c **** //		//HAL_UART_Transmit(&huart2, "\r\n", 50, HAL_MAX_DELAY);
 193:Src/uds_diag.c **** //
 194:Src/uds_diag.c **** //	}//if DID --> Oil_Pressure
 195:Src/uds_diag.c **** //	else if((PduInfoTypeptr->Data[SID] == 0xF5) && (PduInfoTypeptr->Data[Sub_F] == 0x3D) )
 196:Src/uds_diag.c **** //	{
 197:Src/uds_diag.c **** //		Read_Data_Server.DID[0] = 0xF5;
 198:Src/uds_diag.c **** //		Read_Data_Server.DID[1] = 0x3D;
 199:Src/uds_diag.c **** //		Read_Data_Server.DID_Length = 2;
 200:Src/uds_diag.c **** //		//For Debugging
 201:Src/uds_diag.c **** //		//HAL_UART_Transmit(&huart2, "\r\nRead Frame Client DID:", 50, HAL_MAX_DELAY);
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 10


 202:Src/uds_diag.c **** //		//sendHexArrayAsASCII(Read_Data_Server.DID, Read_Data_Server.DID_Length );
 203:Src/uds_diag.c **** //		//HAL_UART_Transmit(&huart2, "\r\n", 50, HAL_MAX_DELAY);
 204:Src/uds_diag.c **** //		Read_Data_Server.Data[SID] = 0x77; //value of Oil_Pressure
 205:Src/uds_diag.c **** //		Read_Data_Server.Data[Sub_F] = 0x88; //value of Oil_Pressure
 206:Src/uds_diag.c **** //		Read_Data_Server.Data[2] = 0x99; //value of Oil_Pressure
 207:Src/uds_diag.c **** //		Read_Data_Server.Data[3] = 0xAA; //value of Oil_Pressure
 208:Src/uds_diag.c **** //		Read_Data_Server.Data_Length = 4;
 209:Src/uds_diag.c **** //		//Send +ve responce
 210:Src/uds_diag.c **** //		//UDS_Send_Pos_Res(Read_Data_Server);
 211:Src/uds_diag.c **** //
 212:Src/uds_diag.c **** //		//For Debugging
 213:Src/uds_diag.c **** //		//HAL_UART_Transmit(&huart2, "\r\nRead Frame Client DID:", 50, HAL_MAX_DELAY);
 214:Src/uds_diag.c **** //		//sendHexArrayAsASCII(Read_Data_Server.DID, Read_Data_Server.DID_Length );
 215:Src/uds_diag.c **** //		//HAL_UART_Transmit(&huart2, "\r\n", 50, HAL_MAX_DELAY);
 216:Src/uds_diag.c **** //	}
 217:Src/uds_diag.c **** //	else
 218:Src/uds_diag.c **** //	{
 219:Src/uds_diag.c **** //		//otherwize: send -ve responce
 220:Src/uds_diag.c **** //		//UDS_Send_Neg_Res(Read_Data_Server.SID, NRC);
 221:Src/uds_diag.c **** //	}
 222:Src/uds_diag.c **** //
 223:Src/uds_diag.c **** //}
 224:Src/uds_diag.c **** //
 225:Src/uds_diag.c **** 
 226:Src/uds_diag.c **** 
 227:Src/uds_diag.c **** /***************************************************************Write******************************
 228:Src/uds_diag.c **** 
 229:Src/uds_diag.c **** void UDS_Write_Data_Client(DID did, uint32_t data)
 230:Src/uds_diag.c **** {
 231:Src/uds_diag.c **** 
 232:Src/uds_diag.c **** 	//PduInfoType Write_Data_Client;
 233:Src/uds_diag.c **** 	Write_Data_Client.Data[SID] = Write_Service; //SID of WDID
 234:Src/uds_diag.c **** 	Write_Data_Client.Data[ADD_Source] = Client_Address;
 235:Src/uds_diag.c **** 
 236:Src/uds_diag.c **** 	if( Target_Address == Tempreture_Address)
 237:Src/uds_diag.c **** 	{
 238:Src/uds_diag.c **** 		Write_Data_Client.Data[ADD_Target]= Tempreture_Address; 	// ADD_Target
 239:Src/uds_diag.c **** 	}
 240:Src/uds_diag.c **** 	else if( Target_Address == Pressure_Address)
 241:Src/uds_diag.c **** 	{
 242:Src/uds_diag.c **** 		Write_Data_Client.Data[ADD_Target]= Pressure_Address; 	// ADD_Target
 243:Src/uds_diag.c **** 	}
 244:Src/uds_diag.c **** 	else if( Target_Address == Functional_Address)
 245:Src/uds_diag.c **** 	{
 246:Src/uds_diag.c **** 		Write_Data_Client.Data[ADD_Target]= Functional_Address; 	// ADD_Target
 247:Src/uds_diag.c **** 	}
 248:Src/uds_diag.c **** 	else
 249:Src/uds_diag.c **** 	{
 250:Src/uds_diag.c **** 		//Nothing
 251:Src/uds_diag.c **** 	}
 252:Src/uds_diag.c **** 
 253:Src/uds_diag.c **** 	//check DID which Data
 254:Src/uds_diag.c **** 	if(did == Oil_Temp)
 255:Src/uds_diag.c **** 	{
 256:Src/uds_diag.c **** 		Write_Data_Client.Data[DID_1] = Oil_Temp_First_byte;
 257:Src/uds_diag.c **** 		Write_Data_Client.Data[DID_2] = Oil_Temp_Second_byte;
 258:Src/uds_diag.c **** 
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 11


 259:Src/uds_diag.c **** 		// Assuming data is 2 bytes
 260:Src/uds_diag.c **** 		UART_ReceiveAndConvert(4, &Write_Data_Client);
 261:Src/uds_diag.c **** 		/*
 262:Src/uds_diag.c **** 		Write_Data_Client.Data[Data_DID] = data >> 8; // Most significant byte of data
 263:Src/uds_diag.c **** 		Write_Data_Client.Data[Data_DID+1] = data & 0xFF;	   // Least significant byte of data
 264:Src/uds_diag.c **** 		Write_Data_Client.Data[Data_DID+2] = 0x00;
 265:Src/uds_diag.c **** 		Write_Data_Client.Data[Data_DID+3] = 0x00;		  // Least significant byte of data
 266:Src/uds_diag.c **** 		 */
 267:Src/uds_diag.c **** 		Write_Data_Client.Length = 8; // SID + DID + Data
 268:Src/uds_diag.c **** 		Write_Data_Client.Data[PCI] = 8;
 269:Src/uds_diag.c **** 
 270:Src/uds_diag.c **** 
 271:Src/uds_diag.c **** 	}
 272:Src/uds_diag.c **** 	else if (did == Oil_Pressure)
 273:Src/uds_diag.c **** 	{
 274:Src/uds_diag.c **** 		Write_Data_Client.Data[DID_1] = Oil_Pressure_First_byte;
 275:Src/uds_diag.c **** 		Write_Data_Client.Data[DID_2] = Oil_Pressure_Second_byte;
 276:Src/uds_diag.c **** 
 277:Src/uds_diag.c **** 		// Assuming data is 4 bytes
 278:Src/uds_diag.c **** 		UART_ReceiveAndConvert(8, &Write_Data_Client);
 279:Src/uds_diag.c **** 		/*
 280:Src/uds_diag.c **** 		Write_Data_Client.Data[Data_DID] = (data >> 24) & 0xFF; // Most significant byte of data
 281:Src/uds_diag.c **** 		Write_Data_Client.Data[Data_DID+1] = (data >> 16) & 0xFF;
 282:Src/uds_diag.c **** 		Write_Data_Client.Data[Data_DID+2] = (data >> 8) & 0xFF;
 283:Src/uds_diag.c **** 		Write_Data_Client.Data[Data_DID+3] = data & 0xFF;		  // Least significant byte of data
 284:Src/uds_diag.c **** 		 */
 285:Src/uds_diag.c **** 		Write_Data_Client.Length = 10; // SID + DID + Data
 286:Src/uds_diag.c **** 		Write_Data_Client.Data[PCI] = 10;
 287:Src/uds_diag.c **** 
 288:Src/uds_diag.c **** 
 289:Src/uds_diag.c **** 	}
 290:Src/uds_diag.c **** 	else if (did == VIN_number)
 291:Src/uds_diag.c **** 	{
 292:Src/uds_diag.c **** 		Write_Data_Client.Data[DID_1] = VIN_number_First_byte;
 293:Src/uds_diag.c **** 		Write_Data_Client.Data[DID_2] = VIN_number_Second_byte;
 294:Src/uds_diag.c **** 
 295:Src/uds_diag.c **** 		// Assuming data is 4 bytes for now until we test then handle it as 17 bytes ISA
 296:Src/uds_diag.c **** 		UART_ReceiveAndConvert(34, &Write_Data_Client);
 297:Src/uds_diag.c **** 		//Write_Data_Client.Data[Data_DID] = (data >> 24) & 0xFF; // Most significant byte of data
 298:Src/uds_diag.c **** 		//Write_Data_Client.Data[Data_DID+1] = (data >> 16) & 0xFF;
 299:Src/uds_diag.c **** 		//Write_Data_Client.Data[Data_DID+2] = (data >> 8) & 0xFF;
 300:Src/uds_diag.c **** 		//Write_Data_Client.Data[Data_DID+3] = data & 0xFF;		  // Least significant byte of data
 301:Src/uds_diag.c **** 		/*
 302:Src/uds_diag.c **** 		Write_Data_Client.Length = 10; // SID + DID + Data
 303:Src/uds_diag.c **** 		Write_Data_Client.Data[PCI] = 10;
 304:Src/uds_diag.c **** 		 */
 305:Src/uds_diag.c **** 		Write_Data_Client.Length = 23; // SID + DID + Data
 306:Src/uds_diag.c **** 		Write_Data_Client.Data[PCI] = 23;
 307:Src/uds_diag.c **** 
 308:Src/uds_diag.c **** 		/* to handle 17 bytes of data */
 309:Src/uds_diag.c **** 		/*	for (uint8_t i=16; i>=0; i--)
 310:Src/uds_diag.c **** 			{
 311:Src/uds_diag.c **** 				Write_Data_Client.Data[(Data_DID + (16-i))] = (data >> (i*8)) & 0xFF;
 312:Src/uds_diag.c **** 			}
 313:Src/uds_diag.c **** 
 314:Src/uds_diag.c **** 		 */
 315:Src/uds_diag.c **** 
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 12


 316:Src/uds_diag.c **** 	}
 317:Src/uds_diag.c **** 	else
 318:Src/uds_diag.c **** 	{
 319:Src/uds_diag.c **** 		//Another DID
 320:Src/uds_diag.c **** 	}
 321:Src/uds_diag.c **** 	//Check supressed Positive Responce
 322:Src/uds_diag.c **** 	Write_Data_Client.Data[DID_1] |= 0b10000000;
 323:Src/uds_diag.c **** 	Write_Data_Client.Data[DID_1] &= ((SupressedPosRes_CLient<<7)|0x7F);
 324:Src/uds_diag.c **** 	CanTp_Transmit(0, &Write_Data_Client);
 325:Src/uds_diag.c **** 
 326:Src/uds_diag.c **** 	//For Debugging
 327:Src/uds_diag.c **** 	//HAL_UART_Transmit(&huart2, "\r\nWrite Frame Client:", 50, HAL_MAX_DELAY);
 328:Src/uds_diag.c **** 	sendHexArrayAsASCII(Write_Data_Client.Data,  Write_Data_Client.Length);
 329:Src/uds_diag.c **** 	//(&huart2, (uint8_t*)"\r\n", 50, HAL_MAX_DELAY);
 330:Src/uds_diag.c **** }
 331:Src/uds_diag.c **** 
 332:Src/uds_diag.c **** 
 333:Src/uds_diag.c **** 
 334:Src/uds_diag.c **** 
 335:Src/uds_diag.c **** 
 336:Src/uds_diag.c **** //void UDS_Write_Data_Server(PduInfoType* Received_data)
 337:Src/uds_diag.c **** //{
 338:Src/uds_diag.c **** //
 339:Src/uds_diag.c **** //	uint16_t Oil_Temp;
 340:Src/uds_diag.c **** //	uint32_t Oil_Pressure;
 341:Src/uds_diag.c **** //	PduInfoType Write_Data_Server;
 342:Src/uds_diag.c **** //
 343:Src/uds_diag.c **** //
 344:Src/uds_diag.c **** //	// did for Oil_Temp or we can check by the length of the received_data
 345:Src/uds_diag.c **** //	if ((Received_data->Data[1] == 0xF1) && (Received_data->Data[2] == 0x3D))
 346:Src/uds_diag.c **** //	{
 347:Src/uds_diag.c **** //		// udate the value of oil temperature
 348:Src/uds_diag.c **** //		Oil_Temp = ( (Received_data->Data[3] << 8) | (Received_data->Data[4]) );
 349:Src/uds_diag.c **** //
 350:Src/uds_diag.c **** //	}
 351:Src/uds_diag.c **** //	// did for Oil_Pressure
 352:Src/uds_diag.c **** //	else if (Received_data->Data[1] == 0xF5 && Received_data->Data[2] == 0x3D)
 353:Src/uds_diag.c **** //	{
 354:Src/uds_diag.c **** //		// udate the value of oil pressure
 355:Src/uds_diag.c **** //		Oil_Pressure = ( (Received_data->Data[3] << 24) | (Received_data->Data[4] << 16) | (Received_da
 356:Src/uds_diag.c **** //
 357:Src/uds_diag.c **** //	}
 358:Src/uds_diag.c **** //	else
 359:Src/uds_diag.c **** //	{
 360:Src/uds_diag.c **** //
 361:Src/uds_diag.c **** //		// error in the did
 362:Src/uds_diag.c **** //		// call the negative response function
 363:Src/uds_diag.c **** //	}
 364:Src/uds_diag.c **** //
 365:Src/uds_diag.c **** //	// prepare positive response
 366:Src/uds_diag.c **** //	Write_Data_Server.Data[SID] = 0x6E; //SID of WDID
 367:Src/uds_diag.c **** //	Write_Data_Server.Data[Sub_F] = Received_data->Data[1];
 368:Src/uds_diag.c **** //	Write_Data_Server.Data[2] = Received_data->Data[2];
 369:Src/uds_diag.c **** //
 370:Src/uds_diag.c **** //	// Calculating the data length
 371:Src/uds_diag.c **** //	Write_Data_Server.Length = 3;
 372:Src/uds_diag.c **** //
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 13


 373:Src/uds_diag.c **** //
 374:Src/uds_diag.c **** //	//Sending Frame to Can TP
 375:Src/uds_diag.c **** //	//CanTp_Transmit(0, &Write_Data_Server);
 376:Src/uds_diag.c **** //}
 377:Src/uds_diag.c **** //
 378:Src/uds_diag.c **** 
 379:Src/uds_diag.c **** /***************************************************************Control Session********************
 380:Src/uds_diag.c **** void UDS_Control_Session_Default(void)
 381:Src/uds_diag.c **** {
 305              		.loc 1 381 1 is_stmt 1 view -0
 306              		.cfi_startproc
 307              		@ args = 0, pretend = 0, frame = 0
 308              		@ frame_needed = 0, uses_anonymous_args = 0
 309 0000 08B5     		push	{r3, lr}
 310              	.LCFI2:
 311              		.cfi_def_cfa_offset 8
 312              		.cfi_offset 3, -8
 313              		.cfi_offset 14, -4
 382:Src/uds_diag.c **** 	// init struct var  to use for send TP
 383:Src/uds_diag.c **** 
 384:Src/uds_diag.c **** 	// fill the struct data
 385:Src/uds_diag.c **** 	Control_Session_Default.Data[PCI] = 5;
 314              		.loc 1 385 2 view .LVU87
 315              		.loc 1 385 36 is_stmt 0 view .LVU88
 316 0002 174B     		ldr	r3, .L32
 317 0004 0522     		movs	r2, #5
 318 0006 1A70     		strb	r2, [r3]
 386:Src/uds_diag.c **** 	Control_Session_Default.Data[SID] = Control_Service;
 319              		.loc 1 386 2 is_stmt 1 view .LVU89
 320              		.loc 1 386 36 is_stmt 0 view .LVU90
 321 0008 1022     		movs	r2, #16
 322 000a 1A70     		strb	r2, [r3]
 387:Src/uds_diag.c **** 
 388:Src/uds_diag.c **** 	Control_Session_Default.Data[ADD_Source] = Client_Address;
 323              		.loc 1 388 2 is_stmt 1 view .LVU91
 324              		.loc 1 388 43 is_stmt 0 view .LVU92
 325 000c F122     		movs	r2, #241
 326 000e 5A70     		strb	r2, [r3, #1]
 389:Src/uds_diag.c **** 
 390:Src/uds_diag.c **** 	if( Target_Address == Tempreture_Address)
 327              		.loc 1 390 2 is_stmt 1 view .LVU93
 328              		.loc 1 390 21 is_stmt 0 view .LVU94
 329 0010 144B     		ldr	r3, .L32+4
 330 0012 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 331              		.loc 1 390 4 view .LVU95
 332 0014 3D2B     		cmp	r3, #61
 333 0016 07D0     		beq	.L30
 391:Src/uds_diag.c **** 	{
 392:Src/uds_diag.c **** 		Control_Session_Default.Data[ADD_Target]= Tempreture_Address; 	// ADD_Target
 393:Src/uds_diag.c **** 	}
 394:Src/uds_diag.c **** 	else if( Target_Address == Pressure_Address)
 334              		.loc 1 394 7 is_stmt 1 view .LVU96
 335              		.loc 1 394 9 is_stmt 0 view .LVU97
 336 0018 4D2B     		cmp	r3, #77
 337 001a 1DD0     		beq	.L31
 395:Src/uds_diag.c **** 	{
 396:Src/uds_diag.c **** 		Control_Session_Default.Data[ADD_Target]= Pressure_Address; 	// ADD_Target
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 14


 397:Src/uds_diag.c **** 	}
 398:Src/uds_diag.c **** 	else if( Target_Address == Functional_Address)
 338              		.loc 1 398 7 is_stmt 1 view .LVU98
 339              		.loc 1 398 9 is_stmt 0 view .LVU99
 340 001c FF2B     		cmp	r3, #255
 341 001e 06D1     		bne	.L27
 399:Src/uds_diag.c **** 	{
 400:Src/uds_diag.c **** 		Control_Session_Default.Data[ADD_Target]= Functional_Address; 	// ADD_Target
 342              		.loc 1 400 3 is_stmt 1 view .LVU100
 343              		.loc 1 400 43 is_stmt 0 view .LVU101
 344 0020 0F4B     		ldr	r3, .L32
 345 0022 FF22     		movs	r2, #255
 346 0024 9A70     		strb	r2, [r3, #2]
 347 0026 02E0     		b	.L27
 348              	.L30:
 392:Src/uds_diag.c **** 	}
 349              		.loc 1 392 3 is_stmt 1 view .LVU102
 392:Src/uds_diag.c **** 	}
 350              		.loc 1 392 43 is_stmt 0 view .LVU103
 351 0028 0D4B     		ldr	r3, .L32
 352 002a 3D22     		movs	r2, #61
 353 002c 9A70     		strb	r2, [r3, #2]
 354              	.L27:
 401:Src/uds_diag.c **** 	}
 402:Src/uds_diag.c **** 	else
 403:Src/uds_diag.c **** 	{
 404:Src/uds_diag.c **** 		//Nothing
 405:Src/uds_diag.c **** 	}
 355              		.loc 1 405 2 is_stmt 1 view .LVU104
 406:Src/uds_diag.c **** 	Control_Session_Default.Data[Sub_F] = DefaultSession;
 356              		.loc 1 406 2 view .LVU105
 357              		.loc 1 406 38 is_stmt 0 view .LVU106
 358 002e 0C49     		ldr	r1, .L32
 359 0030 0123     		movs	r3, #1
 360 0032 0B71     		strb	r3, [r1, #4]
 407:Src/uds_diag.c **** 	//Check supressed Positive Responce
 408:Src/uds_diag.c **** 	Control_Session_Default.Data[Sub_F] |= 0b10000000;
 361              		.loc 1 408 2 is_stmt 1 view .LVU107
 362              		.loc 1 408 38 is_stmt 0 view .LVU108
 363 0034 8123     		movs	r3, #129
 364 0036 0B71     		strb	r3, [r1, #4]
 409:Src/uds_diag.c **** 	Control_Session_Default.Data[Sub_F] &= ((SupressedPosRes_CLient<<7)|0x7F);
 365              		.loc 1 409 2 is_stmt 1 view .LVU109
 366              		.loc 1 409 65 is_stmt 0 view .LVU110
 367 0038 0B4B     		ldr	r3, .L32+8
 368 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 369 003c DB01     		lsls	r3, r3, #7
 370              		.loc 1 409 69 view .LVU111
 371 003e 43F07F03 		orr	r3, r3, #127
 372 0042 5BB2     		sxtb	r3, r3
 373              		.loc 1 409 38 view .LVU112
 374 0044 23F07E03 		bic	r3, r3, #126
 375 0048 0B71     		strb	r3, [r1, #4]
 410:Src/uds_diag.c **** 
 411:Src/uds_diag.c **** 	Control_Session_Default.Length = 5;
 376              		.loc 1 411 2 is_stmt 1 view .LVU113
 377              		.loc 1 411 33 is_stmt 0 view .LVU114
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 15


 378 004a 0523     		movs	r3, #5
 379 004c C1F80032 		str	r3, [r1, #512]
 412:Src/uds_diag.c **** 
 413:Src/uds_diag.c **** 	// send to can tp
 414:Src/uds_diag.c **** 	CanTp_Transmit(0, &Control_Session_Default);
 380              		.loc 1 414 2 is_stmt 1 view .LVU115
 381 0050 0020     		movs	r0, #0
 382 0052 FFF7FEFF 		bl	CanTp_Transmit
 383              	.LVL5:
 415:Src/uds_diag.c **** 
 416:Src/uds_diag.c **** 	//For Debugging
 417:Src/uds_diag.c **** 	//HAL_UART_Transmit(&huart2, "\r\nControl_Session_Default:", 100, HAL_MAX_DELAY);
 418:Src/uds_diag.c **** 	//sendHexArrayAsASCII(Control_Session_Default.Data,  Control_Session_Default.Length);
 419:Src/uds_diag.c **** 	//HAL_UART_Transmit(&huart2, "\r\n", 50, HAL_MAX_DELAY);
 420:Src/uds_diag.c **** }
 384              		.loc 1 420 1 is_stmt 0 view .LVU116
 385 0056 08BD     		pop	{r3, pc}
 386              	.L31:
 396:Src/uds_diag.c **** 	}
 387              		.loc 1 396 3 is_stmt 1 view .LVU117
 396:Src/uds_diag.c **** 	}
 388              		.loc 1 396 43 is_stmt 0 view .LVU118
 389 0058 014B     		ldr	r3, .L32
 390 005a 4D22     		movs	r2, #77
 391 005c 9A70     		strb	r2, [r3, #2]
 392 005e E6E7     		b	.L27
 393              	.L33:
 394              		.align	2
 395              	.L32:
 396 0060 00000000 		.word	.LANCHOR4
 397 0064 00000000 		.word	.LANCHOR1
 398 0068 00000000 		.word	.LANCHOR2
 399              		.cfi_endproc
 400              	.LFE77:
 402              		.section	.text.UDS_Control_Session_Extended,"ax",%progbits
 403              		.align	1
 404              		.global	UDS_Control_Session_Extended
 405              		.syntax unified
 406              		.thumb
 407              		.thumb_func
 409              	UDS_Control_Session_Extended:
 410              	.LFB78:
 421:Src/uds_diag.c **** 
 422:Src/uds_diag.c **** 
 423:Src/uds_diag.c **** void UDS_Control_Session_Extended(void)
 424:Src/uds_diag.c **** {
 411              		.loc 1 424 1 is_stmt 1 view -0
 412              		.cfi_startproc
 413              		@ args = 0, pretend = 0, frame = 0
 414              		@ frame_needed = 0, uses_anonymous_args = 0
 415 0000 08B5     		push	{r3, lr}
 416              	.LCFI3:
 417              		.cfi_def_cfa_offset 8
 418              		.cfi_offset 3, -8
 419              		.cfi_offset 14, -4
 425:Src/uds_diag.c **** 	// init struct var  to use for send TP
 426:Src/uds_diag.c **** 
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 16


 427:Src/uds_diag.c **** 
 428:Src/uds_diag.c **** 	// fill the struct data
 429:Src/uds_diag.c **** 	Control_Session_Extended.Data[PCI] = 5;
 420              		.loc 1 429 2 view .LVU120
 421              		.loc 1 429 37 is_stmt 0 view .LVU121
 422 0002 174B     		ldr	r3, .L41
 423 0004 0522     		movs	r2, #5
 424 0006 1A70     		strb	r2, [r3]
 430:Src/uds_diag.c **** 	Control_Session_Extended.Data[SID] = Control_Service;
 425              		.loc 1 430 2 is_stmt 1 view .LVU122
 426              		.loc 1 430 37 is_stmt 0 view .LVU123
 427 0008 1022     		movs	r2, #16
 428 000a 1A70     		strb	r2, [r3]
 431:Src/uds_diag.c **** 
 432:Src/uds_diag.c **** 	Control_Session_Extended.Data[ADD_Source] = Client_Address;
 429              		.loc 1 432 2 is_stmt 1 view .LVU124
 430              		.loc 1 432 44 is_stmt 0 view .LVU125
 431 000c F122     		movs	r2, #241
 432 000e 5A70     		strb	r2, [r3, #1]
 433:Src/uds_diag.c **** 
 434:Src/uds_diag.c **** 	if( Target_Address == Tempreture_Address)
 433              		.loc 1 434 2 is_stmt 1 view .LVU126
 434              		.loc 1 434 21 is_stmt 0 view .LVU127
 435 0010 144B     		ldr	r3, .L41+4
 436 0012 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 437              		.loc 1 434 4 view .LVU128
 438 0014 3D2B     		cmp	r3, #61
 439 0016 07D0     		beq	.L39
 435:Src/uds_diag.c **** 	{
 436:Src/uds_diag.c **** 		Control_Session_Extended.Data[ADD_Target]= Tempreture_Address; 	// ADD_Target
 437:Src/uds_diag.c **** 	}
 438:Src/uds_diag.c **** 	else if( Target_Address == Pressure_Address)
 440              		.loc 1 438 7 is_stmt 1 view .LVU129
 441              		.loc 1 438 9 is_stmt 0 view .LVU130
 442 0018 4D2B     		cmp	r3, #77
 443 001a 1DD0     		beq	.L40
 439:Src/uds_diag.c **** 	{
 440:Src/uds_diag.c **** 		Control_Session_Extended.Data[ADD_Target]= Pressure_Address; 	// ADD_Target
 441:Src/uds_diag.c **** 	}
 442:Src/uds_diag.c **** 	else if( Target_Address == Functional_Address)
 444              		.loc 1 442 7 is_stmt 1 view .LVU131
 445              		.loc 1 442 9 is_stmt 0 view .LVU132
 446 001c FF2B     		cmp	r3, #255
 447 001e 06D1     		bne	.L36
 443:Src/uds_diag.c **** 	{
 444:Src/uds_diag.c **** 		Control_Session_Extended.Data[ADD_Target]= Functional_Address; 	// ADD_Target
 448              		.loc 1 444 3 is_stmt 1 view .LVU133
 449              		.loc 1 444 44 is_stmt 0 view .LVU134
 450 0020 0F4B     		ldr	r3, .L41
 451 0022 FF22     		movs	r2, #255
 452 0024 9A70     		strb	r2, [r3, #2]
 453 0026 02E0     		b	.L36
 454              	.L39:
 436:Src/uds_diag.c **** 	}
 455              		.loc 1 436 3 is_stmt 1 view .LVU135
 436:Src/uds_diag.c **** 	}
 456              		.loc 1 436 44 is_stmt 0 view .LVU136
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 17


 457 0028 0D4B     		ldr	r3, .L41
 458 002a 3D22     		movs	r2, #61
 459 002c 9A70     		strb	r2, [r3, #2]
 460              	.L36:
 445:Src/uds_diag.c **** 	}
 446:Src/uds_diag.c **** 	else
 447:Src/uds_diag.c **** 	{
 448:Src/uds_diag.c **** 		//Nothing
 449:Src/uds_diag.c **** 	}
 461              		.loc 1 449 2 is_stmt 1 view .LVU137
 450:Src/uds_diag.c **** 	Control_Session_Extended.Data[Sub_F] = ExtendedSession;
 462              		.loc 1 450 2 view .LVU138
 463              		.loc 1 450 39 is_stmt 0 view .LVU139
 464 002e 0C49     		ldr	r1, .L41
 465 0030 0323     		movs	r3, #3
 466 0032 0B71     		strb	r3, [r1, #4]
 451:Src/uds_diag.c **** 	//Check supressed Positive Responce
 452:Src/uds_diag.c **** 	Control_Session_Extended.Data[Sub_F] |= 0b10000000;
 467              		.loc 1 452 2 is_stmt 1 view .LVU140
 468              		.loc 1 452 39 is_stmt 0 view .LVU141
 469 0034 8323     		movs	r3, #131
 470 0036 0B71     		strb	r3, [r1, #4]
 453:Src/uds_diag.c **** 	Control_Session_Extended.Data[Sub_F] &= ((SupressedPosRes_CLient<<7)|0x7F);
 471              		.loc 1 453 2 is_stmt 1 view .LVU142
 472              		.loc 1 453 66 is_stmt 0 view .LVU143
 473 0038 0B4B     		ldr	r3, .L41+8
 474 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 475 003c DB01     		lsls	r3, r3, #7
 476              		.loc 1 453 70 view .LVU144
 477 003e 43F07F03 		orr	r3, r3, #127
 478 0042 5BB2     		sxtb	r3, r3
 479              		.loc 1 453 39 view .LVU145
 480 0044 23F07C03 		bic	r3, r3, #124
 481 0048 0B71     		strb	r3, [r1, #4]
 454:Src/uds_diag.c **** 
 455:Src/uds_diag.c **** 	Control_Session_Extended.Length = 5;
 482              		.loc 1 455 2 is_stmt 1 view .LVU146
 483              		.loc 1 455 34 is_stmt 0 view .LVU147
 484 004a 0523     		movs	r3, #5
 485 004c C1F80032 		str	r3, [r1, #512]
 456:Src/uds_diag.c **** 
 457:Src/uds_diag.c **** 	// send to can tp
 458:Src/uds_diag.c **** 	CanTp_Transmit(0, &Control_Session_Extended);
 486              		.loc 1 458 2 is_stmt 1 view .LVU148
 487 0050 0020     		movs	r0, #0
 488 0052 FFF7FEFF 		bl	CanTp_Transmit
 489              	.LVL6:
 459:Src/uds_diag.c **** 
 460:Src/uds_diag.c **** 	//For Debugging
 461:Src/uds_diag.c **** 	//HAL_UART_Transmit(&huart2, "\r\Control_Session_Extended:", 100, HAL_MAX_DELAY);
 462:Src/uds_diag.c **** 	//sendHexArrayAsASCII(Control_Session_Extended.Data,  Control_Session_Extended.Length);
 463:Src/uds_diag.c **** 	//HAL_UART_Transmit(&huart2, "\r\n", 50, HAL_MAX_DELAY);
 464:Src/uds_diag.c **** }
 490              		.loc 1 464 1 is_stmt 0 view .LVU149
 491 0056 08BD     		pop	{r3, pc}
 492              	.L40:
 440:Src/uds_diag.c **** 	}
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 18


 493              		.loc 1 440 3 is_stmt 1 view .LVU150
 440:Src/uds_diag.c **** 	}
 494              		.loc 1 440 44 is_stmt 0 view .LVU151
 495 0058 014B     		ldr	r3, .L41
 496 005a 4D22     		movs	r2, #77
 497 005c 9A70     		strb	r2, [r3, #2]
 498 005e E6E7     		b	.L36
 499              	.L42:
 500              		.align	2
 501              	.L41:
 502 0060 00000000 		.word	.LANCHOR5
 503 0064 00000000 		.word	.LANCHOR1
 504 0068 00000000 		.word	.LANCHOR2
 505              		.cfi_endproc
 506              	.LFE78:
 508              		.section	.text.UDS_Send_Security_Client,"ax",%progbits
 509              		.align	1
 510              		.global	UDS_Send_Security_Client
 511              		.syntax unified
 512              		.thumb
 513              		.thumb_func
 515              	UDS_Send_Security_Client:
 516              	.LVL7:
 517              	.LFB79:
 465:Src/uds_diag.c **** 
 466:Src/uds_diag.c **** 
 467:Src/uds_diag.c **** 
 468:Src/uds_diag.c **** /***************************************************************Security***************************
 469:Src/uds_diag.c **** 
 470:Src/uds_diag.c **** 
 471:Src/uds_diag.c **** /***************************************************************Security***************************
 472:Src/uds_diag.c **** 
 473:Src/uds_diag.c **** void UDS_Send_Security_Client(Sub_Fun sub_fun)
 474:Src/uds_diag.c **** {
 518              		.loc 1 474 1 is_stmt 1 view -0
 519              		.cfi_startproc
 520              		@ args = 0, pretend = 0, frame = 0
 521              		@ frame_needed = 0, uses_anonymous_args = 0
 522              		.loc 1 474 1 is_stmt 0 view .LVU153
 523 0000 08B5     		push	{r3, lr}
 524              	.LCFI4:
 525              		.cfi_def_cfa_offset 8
 526              		.cfi_offset 3, -8
 527              		.cfi_offset 14, -4
 475:Src/uds_diag.c **** 
 476:Src/uds_diag.c **** 	Send_Security_Seed.Data[SID] = Security_Service;//Security SID
 528              		.loc 1 476 2 is_stmt 1 view .LVU154
 529              		.loc 1 476 31 is_stmt 0 view .LVU155
 530 0002 204B     		ldr	r3, .L54
 531 0004 2722     		movs	r2, #39
 532 0006 1A70     		strb	r2, [r3]
 477:Src/uds_diag.c **** 
 478:Src/uds_diag.c **** 	//Prepare the Key
 479:Src/uds_diag.c **** 	//Security_Key security_key;
 480:Src/uds_diag.c **** 	Send_Security_Seed.Data[ADD_Source] = Client_Address;
 533              		.loc 1 480 2 is_stmt 1 view .LVU156
 534              		.loc 1 480 38 is_stmt 0 view .LVU157
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 19


 535 0008 F122     		movs	r2, #241
 536 000a 5A70     		strb	r2, [r3, #1]
 481:Src/uds_diag.c **** 
 482:Src/uds_diag.c **** 	if( Target_Address == Tempreture_Address)
 537              		.loc 1 482 2 is_stmt 1 view .LVU158
 538              		.loc 1 482 21 is_stmt 0 view .LVU159
 539 000c 1E4B     		ldr	r3, .L54+4
 540 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 541              		.loc 1 482 4 view .LVU160
 542 0010 3D2B     		cmp	r3, #61
 543 0012 07D0     		beq	.L50
 483:Src/uds_diag.c **** 	{
 484:Src/uds_diag.c **** 		Send_Security_Seed.Data[ADD_Target]= Tempreture_Address; 	// ADD_Target
 485:Src/uds_diag.c **** 	}
 486:Src/uds_diag.c **** 	else if( Target_Address == Pressure_Address)
 544              		.loc 1 486 7 is_stmt 1 view .LVU161
 545              		.loc 1 486 9 is_stmt 0 view .LVU162
 546 0014 4D2B     		cmp	r3, #77
 547 0016 1DD0     		beq	.L51
 487:Src/uds_diag.c **** 	{
 488:Src/uds_diag.c **** 		Send_Security_Seed.Data[ADD_Target]= Pressure_Address; 	// ADD_Target
 489:Src/uds_diag.c **** 	}
 490:Src/uds_diag.c **** 	else if( Target_Address == Functional_Address)
 548              		.loc 1 490 7 is_stmt 1 view .LVU163
 549              		.loc 1 490 9 is_stmt 0 view .LVU164
 550 0018 FF2B     		cmp	r3, #255
 551 001a 06D1     		bne	.L45
 491:Src/uds_diag.c **** 	{
 492:Src/uds_diag.c **** 		Send_Security_Seed.Data[ADD_Target]= Functional_Address; 	// ADD_Target
 552              		.loc 1 492 3 is_stmt 1 view .LVU165
 553              		.loc 1 492 38 is_stmt 0 view .LVU166
 554 001c 194B     		ldr	r3, .L54
 555 001e FF22     		movs	r2, #255
 556 0020 9A70     		strb	r2, [r3, #2]
 557 0022 02E0     		b	.L45
 558              	.L50:
 484:Src/uds_diag.c **** 	}
 559              		.loc 1 484 3 is_stmt 1 view .LVU167
 484:Src/uds_diag.c **** 	}
 560              		.loc 1 484 38 is_stmt 0 view .LVU168
 561 0024 174B     		ldr	r3, .L54
 562 0026 3D22     		movs	r2, #61
 563 0028 9A70     		strb	r2, [r3, #2]
 564              	.L45:
 493:Src/uds_diag.c **** 	}
 494:Src/uds_diag.c **** 	else
 495:Src/uds_diag.c **** 	{
 496:Src/uds_diag.c **** 		//Nothing
 497:Src/uds_diag.c **** 	}
 565              		.loc 1 497 2 is_stmt 1 view .LVU169
 498:Src/uds_diag.c **** 	if(sub_fun == Seed)
 566              		.loc 1 498 2 view .LVU170
 567              		.loc 1 498 4 is_stmt 0 view .LVU171
 568 002a 0128     		cmp	r0, #1
 569 002c 16D0     		beq	.L52
 499:Src/uds_diag.c **** 	{
 500:Src/uds_diag.c **** 		Send_Security_Seed.Data[Sub_F] = Seed;//Sub_Fun Seed
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 20


 501:Src/uds_diag.c **** 		Send_Security_Seed.Length = 5;
 502:Src/uds_diag.c **** 		Send_Security_Seed.Data[PCI] = 5;
 503:Src/uds_diag.c **** 	}
 504:Src/uds_diag.c **** 	else if(sub_fun == Key)
 570              		.loc 1 504 7 is_stmt 1 view .LVU172
 571              		.loc 1 504 9 is_stmt 0 view .LVU173
 572 002e 0228     		cmp	r0, #2
 573 0030 1CD0     		beq	.L53
 574              	.LVL8:
 575              	.L48:
 505:Src/uds_diag.c **** 	{
 506:Src/uds_diag.c **** 		Send_Security_Seed.Data[Sub_F] = Key;//Sub_Fun Key
 507:Src/uds_diag.c **** 		Send_Security_Seed.Length = 5+Seed_Key_Lenght;
 508:Src/uds_diag.c **** 		Send_Security_Seed.Data[PCI] = 5+Seed_Key_Lenght;
 509:Src/uds_diag.c **** 		UART_ReceiveAndConvert(8,&Send_Security_Seed);
 510:Src/uds_diag.c **** 
 511:Src/uds_diag.c **** 		//security_key.Seed = seed;
 512:Src/uds_diag.c **** 		//Prepare Key From Seed
 513:Src/uds_diag.c **** 		//uint8_t security_key_counter = Seed_Key_Lenght-1;
 514:Src/uds_diag.c **** 		//uint8_t Send_Security_Seed_counter = 2;
 515:Src/uds_diag.c **** 		/*
 516:Src/uds_diag.c **** 		while(security_key_counter >= 0 )
 517:Src/uds_diag.c **** 		{
 518:Src/uds_diag.c **** 			//sendHexArrayAsASCII(security_key.Key,4);
 519:Src/uds_diag.c **** 			//HAL_UART_Transmit(&huart2, "\r\n", 50, HAL_MAX_DELAY);
 520:Src/uds_diag.c **** 			security_key.Key[security_key_counter] = security_key.Seed[security_key_counter] + Key_Code;//+0
 521:Src/uds_diag.c **** 			security_key_counter--;
 522:Src/uds_diag.c **** 
 523:Src/uds_diag.c **** 			//Put New Key Calculated into Frame
 524:Src/uds_diag.c **** 			Send_Security_Seed.Data[Send_Security_Seed_counter] = security_key.Key[security_key_counter];
 525:Src/uds_diag.c **** 			Send_Security_Seed_counter++;
 526:Src/uds_diag.c **** 		}
 527:Src/uds_diag.c **** 		 */
 528:Src/uds_diag.c **** 		//key = security_key.Key;
 529:Src/uds_diag.c **** 
 530:Src/uds_diag.c **** 	}
 531:Src/uds_diag.c **** 	else
 532:Src/uds_diag.c **** 	{
 533:Src/uds_diag.c **** 		//Nothing
 534:Src/uds_diag.c **** 	}
 576              		.loc 1 534 2 is_stmt 1 view .LVU174
 535:Src/uds_diag.c **** 
 536:Src/uds_diag.c **** 	//Check supressed Positive Responce
 537:Src/uds_diag.c **** 	Send_Security_Seed.Data[Sub_F] |= 0b10000000;
 577              		.loc 1 537 2 view .LVU175
 578              		.loc 1 537 33 is_stmt 0 view .LVU176
 579 0032 1449     		ldr	r1, .L54
 580 0034 0B79     		ldrb	r3, [r1, #4]	@ zero_extendqisi2
 581 0036 43F08002 		orr	r2, r3, #128
 582 003a 0A71     		strb	r2, [r1, #4]
 538:Src/uds_diag.c **** 	Send_Security_Seed.Data[Sub_F] &= ((SupressedPosRes_CLient<<7)|0x7F);
 583              		.loc 1 538 2 is_stmt 1 view .LVU177
 584              		.loc 1 538 60 is_stmt 0 view .LVU178
 585 003c 134B     		ldr	r3, .L54+8
 586 003e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 587 0040 DB01     		lsls	r3, r3, #7
 588              		.loc 1 538 64 view .LVU179
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 21


 589 0042 43F07F03 		orr	r3, r3, #127
 590 0046 5BB2     		sxtb	r3, r3
 591              		.loc 1 538 33 view .LVU180
 592 0048 1340     		ands	r3, r3, r2
 593 004a 0B71     		strb	r3, [r1, #4]
 539:Src/uds_diag.c **** 
 540:Src/uds_diag.c **** 	//Send Frame to Can TP
 541:Src/uds_diag.c **** 	CanTp_Transmit(0, &Send_Security_Seed);
 594              		.loc 1 541 2 is_stmt 1 view .LVU181
 595 004c 0020     		movs	r0, #0
 596 004e FFF7FEFF 		bl	CanTp_Transmit
 597              	.LVL9:
 542:Src/uds_diag.c **** 
 543:Src/uds_diag.c **** 	//For Debugging
 544:Src/uds_diag.c **** 	//HAL_UART_Transmit(&huart2, "\r\nUDS_Send_Security_Client", 50, HAL_MAX_DELAY);
 545:Src/uds_diag.c **** 	//HAL_UART_Transmit(&huart2, "\r\n", 50, HAL_MAX_DELAY);
 546:Src/uds_diag.c **** 	//sendHexArrayAsASCII(Send_Security_Seed.Data, Send_Security_Seed.Length);
 547:Src/uds_diag.c **** 	//HAL_UART_Transmit(&huart2, "\r\n", 50, HAL_MAX_DELAY);
 548:Src/uds_diag.c **** 
 549:Src/uds_diag.c **** 
 550:Src/uds_diag.c **** }
 598              		.loc 1 550 1 is_stmt 0 view .LVU182
 599 0052 08BD     		pop	{r3, pc}
 600              	.LVL10:
 601              	.L51:
 488:Src/uds_diag.c **** 	}
 602              		.loc 1 488 3 is_stmt 1 view .LVU183
 488:Src/uds_diag.c **** 	}
 603              		.loc 1 488 38 is_stmt 0 view .LVU184
 604 0054 0B4B     		ldr	r3, .L54
 605 0056 4D22     		movs	r2, #77
 606 0058 9A70     		strb	r2, [r3, #2]
 607 005a E6E7     		b	.L45
 608              	.L52:
 500:Src/uds_diag.c **** 		Send_Security_Seed.Length = 5;
 609              		.loc 1 500 3 is_stmt 1 view .LVU185
 500:Src/uds_diag.c **** 		Send_Security_Seed.Length = 5;
 610              		.loc 1 500 34 is_stmt 0 view .LVU186
 611 005c 094B     		ldr	r3, .L54
 612 005e 0122     		movs	r2, #1
 613 0060 1A71     		strb	r2, [r3, #4]
 501:Src/uds_diag.c **** 		Send_Security_Seed.Data[PCI] = 5;
 614              		.loc 1 501 3 is_stmt 1 view .LVU187
 501:Src/uds_diag.c **** 		Send_Security_Seed.Data[PCI] = 5;
 615              		.loc 1 501 29 is_stmt 0 view .LVU188
 616 0062 0522     		movs	r2, #5
 617 0064 C3F80022 		str	r2, [r3, #512]
 502:Src/uds_diag.c **** 	}
 618              		.loc 1 502 3 is_stmt 1 view .LVU189
 502:Src/uds_diag.c **** 	}
 619              		.loc 1 502 32 is_stmt 0 view .LVU190
 620 0068 1A70     		strb	r2, [r3]
 621 006a E2E7     		b	.L48
 622              	.L53:
 506:Src/uds_diag.c **** 		Send_Security_Seed.Length = 5+Seed_Key_Lenght;
 623              		.loc 1 506 3 is_stmt 1 view .LVU191
 506:Src/uds_diag.c **** 		Send_Security_Seed.Length = 5+Seed_Key_Lenght;
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 22


 624              		.loc 1 506 34 is_stmt 0 view .LVU192
 625 006c 0549     		ldr	r1, .L54
 626 006e 0223     		movs	r3, #2
 627 0070 0B71     		strb	r3, [r1, #4]
 507:Src/uds_diag.c **** 		Send_Security_Seed.Data[PCI] = 5+Seed_Key_Lenght;
 628              		.loc 1 507 3 is_stmt 1 view .LVU193
 507:Src/uds_diag.c **** 		Send_Security_Seed.Data[PCI] = 5+Seed_Key_Lenght;
 629              		.loc 1 507 29 is_stmt 0 view .LVU194
 630 0072 0923     		movs	r3, #9
 631 0074 C1F80032 		str	r3, [r1, #512]
 508:Src/uds_diag.c **** 		UART_ReceiveAndConvert(8,&Send_Security_Seed);
 632              		.loc 1 508 3 is_stmt 1 view .LVU195
 508:Src/uds_diag.c **** 		UART_ReceiveAndConvert(8,&Send_Security_Seed);
 633              		.loc 1 508 32 is_stmt 0 view .LVU196
 634 0078 0B70     		strb	r3, [r1]
 509:Src/uds_diag.c **** 
 635              		.loc 1 509 3 is_stmt 1 view .LVU197
 636 007a 0820     		movs	r0, #8
 637              	.LVL11:
 509:Src/uds_diag.c **** 
 638              		.loc 1 509 3 is_stmt 0 view .LVU198
 639 007c FFF7FEFF 		bl	UART_ReceiveAndConvert
 640              	.LVL12:
 641 0080 D7E7     		b	.L48
 642              	.L55:
 643 0082 00BF     		.align	2
 644              	.L54:
 645 0084 00000000 		.word	.LANCHOR6
 646 0088 00000000 		.word	.LANCHOR1
 647 008c 00000000 		.word	.LANCHOR2
 648              		.cfi_endproc
 649              	.LFE79:
 651              		.section	.rodata.sendHexArrayAsASCII.str1.4,"aMS",%progbits,1
 652              		.align	2
 653              	.LC0:
 654 0000 25303258 		.ascii	"%02X\000"
 654      00
 655              		.section	.text.sendHexArrayAsASCII,"ax",%progbits
 656              		.align	1
 657              		.global	sendHexArrayAsASCII
 658              		.syntax unified
 659              		.thumb
 660              		.thumb_func
 662              	sendHexArrayAsASCII:
 663              	.LVL13:
 664              	.LFB80:
 551:Src/uds_diag.c **** 
 552:Src/uds_diag.c **** 
 553:Src/uds_diag.c **** 
 554:Src/uds_diag.c **** 
 555:Src/uds_diag.c **** /***************************************************************CallBack Function******************
 556:Src/uds_diag.c **** //
 557:Src/uds_diag.c **** //void UDS_Client_Callback(uint32_t RxPduId,PduInfoType *Ptr)
 558:Src/uds_diag.c **** //{
 559:Src/uds_diag.c **** //	/*************************************************************************************/
 560:Src/uds_diag.c **** //
 561:Src/uds_diag.c **** //					//recieve response frame from tp
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 23


 562:Src/uds_diag.c **** //					//check First Byte
 563:Src/uds_diag.c **** //					// if(7F == arr[0])  // -ive  // print NRC
 564:Src/uds_diag.c **** //					// else +ive
 565:Src/uds_diag.c **** //					// read SID--> if read --> print data
 566:Src/uds_diag.c **** //					// if write --> print success
 567:Src/uds_diag.c **** //					// if control --> print current session
 568:Src/uds_diag.c **** //					// if security --> security state
 569:Src/uds_diag.c **** //
 570:Src/uds_diag.c **** //	/*************************************************************************************/
 571:Src/uds_diag.c **** //	//PduInfoType Glgl;
 572:Src/uds_diag.c **** //	//CanTp_RxIndication ( 0, &Glgl);
 573:Src/uds_diag.c **** //	//PduInfoType *Ptr1 = &Glgl;
 574:Src/uds_diag.c **** //	//ptr->Data[0] = ptr->Data[0] - 0x40;
 575:Src/uds_diag.c **** //
 576:Src/uds_diag.c **** //	if ( Ptr ->Data[0] == 0x7f)
 577:Src/uds_diag.c **** //	{
 578:Src/uds_diag.c **** //		HAL_UART_Transmit(&huart2, (const uint8_t*) "\r\n Sorry Negative frame .\r\n",strlen("\r\n Sorr
 579:Src/uds_diag.c **** //	}
 580:Src/uds_diag.c **** //
 581:Src/uds_diag.c **** //	else {
 582:Src/uds_diag.c **** //		/*  READ IDS Message */
 583:Src/uds_diag.c **** //		if (Ptr->Data[0] == Read_Service)
 584:Src/uds_diag.c **** //
 585:Src/uds_diag.c **** //		{
 586:Src/uds_diag.c **** //			if  ( ptr->Data[SID] == Oil_Temp_First_byte &&  ptr->Data[Sub_F] == Oil_Temp_Second_byte )
 587:Src/uds_diag.c **** //			{
 588:Src/uds_diag.c **** //
 589:Src/uds_diag.c **** //				HAL_UART_Transmit(&huart2, (const uint8_t*) "\r\n Oil Temp .\r\n", strlen("\r\n Oil Temp .\r\
 590:Src/uds_diag.c **** //				sendHexArrayAsASCII((const uint8_t*)&Ptr->Data[3],2);
 591:Src/uds_diag.c **** //
 592:Src/uds_diag.c **** //			}
 593:Src/uds_diag.c **** //
 594:Src/uds_diag.c **** //			else if  ( ptr->Data[SID] == Oil_Pressure_First_byte &&  ptr->Data[Sub_F] == Oil_Pressure_Seco
 595:Src/uds_diag.c **** //			{
 596:Src/uds_diag.c **** //				HAL_UART_Transmit(&huart2, (const uint8_t*) "\r\n Oil Pressure .\r\n", strlen("\r\n Oil Press
 597:Src/uds_diag.c **** //				sendHexArrayAsASCII((const uint8_t*)&Ptr->Data[3],4);
 598:Src/uds_diag.c **** //
 599:Src/uds_diag.c **** //			}
 600:Src/uds_diag.c **** //		}
 601:Src/uds_diag.c **** //
 602:Src/uds_diag.c **** //		/*  Write IDS Message */
 603:Src/uds_diag.c **** //		else if (Ptr->Data[0] == Write_Service)
 604:Src/uds_diag.c **** //
 605:Src/uds_diag.c **** //		{
 606:Src/uds_diag.c **** //
 607:Src/uds_diag.c **** //			if ( ptr->Data[SID] == Oil_Temp_First_byte &&  ptr->Data[Sub_F] == Oil_Temp_Second_byte )
 608:Src/uds_diag.c **** //			{
 609:Src/uds_diag.c **** //				HAL_UART_Transmit(&huart2, (const uint8_t*) "\r\n Oil Temperature Written successfully .\r\n"
 610:Src/uds_diag.c **** //			}
 611:Src/uds_diag.c **** //
 612:Src/uds_diag.c **** //			else if  ( ptr->Data[SID] == Oil_Pressure_First_byte &&  ptr->Data[Sub_F] == Oil_Pressure_Seco
 613:Src/uds_diag.c **** //			{
 614:Src/uds_diag.c **** //				HAL_UART_Transmit(&huart2, (const uint8_t*) "\r\n Oil Pressure Written successfully .\r\n", s
 615:Src/uds_diag.c **** //			}
 616:Src/uds_diag.c **** //		}
 617:Src/uds_diag.c **** //		/*  Control Service  Session */
 618:Src/uds_diag.c **** //
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 24


 619:Src/uds_diag.c **** //		else if (Ptr->Data[0] == Control_Service)
 620:Src/uds_diag.c **** //
 621:Src/uds_diag.c **** //		{
 622:Src/uds_diag.c **** //
 623:Src/uds_diag.c **** //			switch ( ptr->Data[SID] )
 624:Src/uds_diag.c **** //			{
 625:Src/uds_diag.c **** //
 626:Src/uds_diag.c **** //			case Default_Session :
 627:Src/uds_diag.c **** //				HAL_UART_Transmit(&huart2, (const uint8_t*) "\r\n It's Default Session ! .\r\n", strlen("\r\n
 628:Src/uds_diag.c **** //				//UDS_Read_Data_Client(Frame_Info.DID);
 629:Src/uds_diag.c **** //				break ;
 630:Src/uds_diag.c **** //
 631:Src/uds_diag.c **** //			case Extended_Session :
 632:Src/uds_diag.c **** //				HAL_UART_Transmit(&huart2,(const uint8_t*) "\r\n It's Extended Session ! .\r\n", strlen("\r\n
 633:Src/uds_diag.c **** //				//UDS_Read_Data_Client(Frame_Info.DID);
 634:Src/uds_diag.c **** //				break ;
 635:Src/uds_diag.c **** //			}
 636:Src/uds_diag.c **** //		}
 637:Src/uds_diag.c **** //		/*  Security Service  */
 638:Src/uds_diag.c **** //
 639:Src/uds_diag.c **** //		else if (Ptr->Data[0] == Security_Service)
 640:Src/uds_diag.c **** //
 641:Src/uds_diag.c **** //		{
 642:Src/uds_diag.c **** //
 643:Src/uds_diag.c **** //			switch ( ptr->Data[SID] )
 644:Src/uds_diag.c **** //			{
 645:Src/uds_diag.c **** //
 646:Src/uds_diag.c **** //			case Key :
 647:Src/uds_diag.c **** //				HAL_UART_Transmit(&huart2, (const uint8_t*) "\r\n Key is Compatible ! .\r\n", strlen ( "\r\n 
 648:Src/uds_diag.c **** //				break ;
 649:Src/uds_diag.c **** //
 650:Src/uds_diag.c **** //			case Seed :
 651:Src/uds_diag.c **** //				HAL_UART_Transmit(&huart2, (const uint8_t*) "\r\n Seed is \r\n", strlen ("\r\n Seed is \r\n")
 652:Src/uds_diag.c **** //				sendHexArrayAsASCII((const uint8_t*)&ptr->Data[Sub_F],4);
 653:Src/uds_diag.c **** //
 654:Src/uds_diag.c **** //				break ;
 655:Src/uds_diag.c **** //			}
 656:Src/uds_diag.c **** //		}
 657:Src/uds_diag.c **** //		/*  Tester_Representer_Service  */
 658:Src/uds_diag.c **** //
 659:Src/uds_diag.c **** //		else if (Ptr->Data[0] == Tester_Representer_Service)
 660:Src/uds_diag.c **** //
 661:Src/uds_diag.c **** //		{
 662:Src/uds_diag.c **** //
 663:Src/uds_diag.c **** //			HAL_UART_Transmit(&huart2,(const uint8_t*) "\r\n ECU Reseted ! .\r\n", strlen("\r\n ECU Resete
 664:Src/uds_diag.c **** //
 665:Src/uds_diag.c **** //		}
 666:Src/uds_diag.c **** //
 667:Src/uds_diag.c **** //		else { /* no thing  */	}
 668:Src/uds_diag.c **** //
 669:Src/uds_diag.c **** //	}
 670:Src/uds_diag.c **** //
 671:Src/uds_diag.c **** //}
 672:Src/uds_diag.c **** //
 673:Src/uds_diag.c **** 
 674:Src/uds_diag.c **** /***************************************************************Shared Functions*******************
 675:Src/uds_diag.c **** 
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 25


 676:Src/uds_diag.c **** //Function to convert from Hex to ASCII and Displays Frame on UART
 677:Src/uds_diag.c **** void sendHexArrayAsASCII(uint8_t* hexArray, uint16_t length)
 678:Src/uds_diag.c **** {
 665              		.loc 1 678 1 is_stmt 1 view -0
 666              		.cfi_startproc
 667              		@ args = 0, pretend = 0, frame = 0
 668              		@ frame_needed = 1, uses_anonymous_args = 0
 669              		.loc 1 678 1 is_stmt 0 view .LVU200
 670 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 671              	.LCFI5:
 672              		.cfi_def_cfa_offset 24
 673              		.cfi_offset 4, -24
 674              		.cfi_offset 5, -20
 675              		.cfi_offset 6, -16
 676              		.cfi_offset 7, -12
 677              		.cfi_offset 8, -8
 678              		.cfi_offset 14, -4
 679 0004 00AF     		add	r7, sp, #0
 680              	.LCFI6:
 681              		.cfi_def_cfa_register 7
 682 0006 8046     		mov	r8, r0
 683 0008 0E46     		mov	r6, r1
 679:Src/uds_diag.c **** 
 680:Src/uds_diag.c **** 	// Buffer to hold the ASCII representation (2 chars per byte + 1 for null terminator)
 681:Src/uds_diag.c **** 	char asciiBuffer[length * 2 + 1];
 684              		.loc 1 681 2 is_stmt 1 view .LVU201
 685              		.loc 1 681 26 is_stmt 0 view .LVU202
 686 000a 4B00     		lsls	r3, r1, #1
 687              	.LVL14:
 688              		.loc 1 681 7 view .LVU203
 689 000c 0833     		adds	r3, r3, #8
 690              	.LVL15:
 691              		.loc 1 681 7 view .LVU204
 692 000e DB08     		lsrs	r3, r3, #3
 693              	.LVL16:
 694              		.loc 1 681 7 view .LVU205
 695 0010 6A46     		mov	r2, sp
 696 0012 A2EBC303 		sub	r3, r2, r3, lsl #3
 697 0016 9D46     		mov	sp, r3
 698 0018 6D46     		mov	r5, sp
 699              	.LVL17:
 682:Src/uds_diag.c **** 	char* pBuffer = asciiBuffer;
 700              		.loc 1 682 2 is_stmt 1 view .LVU206
 683:Src/uds_diag.c **** 
 684:Src/uds_diag.c **** 	// Convert each byte to its ASCII representation
 685:Src/uds_diag.c **** 	for (uint16_t i = 0; i < length; i++) {
 701              		.loc 1 685 2 view .LVU207
 702              	.LBB2:
 703              		.loc 1 685 7 view .LVU208
 704              		.loc 1 685 16 is_stmt 0 view .LVU209
 705 001a 0024     		movs	r4, #0
 706              		.loc 1 685 2 view .LVU210
 707 001c 08E0     		b	.L57
 708              	.LVL18:
 709              	.L58:
 686:Src/uds_diag.c **** 		sprintf(pBuffer, "%02X", hexArray[i]);
 710              		.loc 1 686 3 is_stmt 1 discriminator 3 view .LVU211
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 26


 711 001e 18F80420 		ldrb	r2, [r8, r4]	@ zero_extendqisi2
 712 0022 0749     		ldr	r1, .L60
 713 0024 2846     		mov	r0, r5
 714 0026 FFF7FEFF 		bl	sprintf
 715              	.LVL19:
 687:Src/uds_diag.c **** 		pBuffer += 2;
 716              		.loc 1 687 3 discriminator 3 view .LVU212
 717              		.loc 1 687 11 is_stmt 0 discriminator 3 view .LVU213
 718 002a 0235     		adds	r5, r5, #2
 719              	.LVL20:
 685:Src/uds_diag.c **** 		sprintf(pBuffer, "%02X", hexArray[i]);
 720              		.loc 1 685 35 is_stmt 1 discriminator 3 view .LVU214
 685:Src/uds_diag.c **** 		sprintf(pBuffer, "%02X", hexArray[i]);
 721              		.loc 1 685 36 is_stmt 0 discriminator 3 view .LVU215
 722 002c 0134     		adds	r4, r4, #1
 723              	.LVL21:
 685:Src/uds_diag.c **** 		sprintf(pBuffer, "%02X", hexArray[i]);
 724              		.loc 1 685 36 discriminator 3 view .LVU216
 725 002e A4B2     		uxth	r4, r4
 726              	.LVL22:
 727              	.L57:
 685:Src/uds_diag.c **** 		sprintf(pBuffer, "%02X", hexArray[i]);
 728              		.loc 1 685 23 is_stmt 1 discriminator 1 view .LVU217
 685:Src/uds_diag.c **** 		sprintf(pBuffer, "%02X", hexArray[i]);
 729              		.loc 1 685 2 is_stmt 0 discriminator 1 view .LVU218
 730 0030 B442     		cmp	r4, r6
 731 0032 F4D3     		bcc	.L58
 685:Src/uds_diag.c **** 		sprintf(pBuffer, "%02X", hexArray[i]);
 732              		.loc 1 685 2 discriminator 1 view .LVU219
 733              	.LBE2:
 688:Src/uds_diag.c **** 	}
 689:Src/uds_diag.c **** 
 690:Src/uds_diag.c **** 	// Null-terminate the string
 691:Src/uds_diag.c **** 	*pBuffer = '\0';
 734              		.loc 1 691 2 is_stmt 1 view .LVU220
 735              		.loc 1 691 11 is_stmt 0 view .LVU221
 736 0034 0023     		movs	r3, #0
 737 0036 2B70     		strb	r3, [r5]
 692:Src/uds_diag.c **** 
 693:Src/uds_diag.c **** 	// Transmit the ASCII string over UART
 694:Src/uds_diag.c **** 	//(&huart2, (uint8_t*)asciiBuffer, strlen(asciiBuffer), HAL_MAX_DELAY);
 695:Src/uds_diag.c **** }
 738              		.loc 1 695 1 view .LVU222
 739 0038 BD46     		mov	sp, r7
 740              	.LCFI7:
 741              		.cfi_def_cfa_register 13
 742              	.LVL23:
 743              		.loc 1 695 1 view .LVU223
 744              		@ sp needed
 745 003a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 746              	.LVL24:
 747              	.L61:
 748              		.loc 1 695 1 view .LVU224
 749 003e 00BF     		.align	2
 750              	.L60:
 751 0040 00000000 		.word	.LC0
 752              		.cfi_endproc
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 27


 753              	.LFE80:
 755              		.section	.text.UDS_Write_Data_Client,"ax",%progbits
 756              		.align	1
 757              		.global	UDS_Write_Data_Client
 758              		.syntax unified
 759              		.thumb
 760              		.thumb_func
 762              	UDS_Write_Data_Client:
 763              	.LVL25:
 764              	.LFB76:
 230:Src/uds_diag.c **** 
 765              		.loc 1 230 1 is_stmt 1 view -0
 766              		.cfi_startproc
 767              		@ args = 0, pretend = 0, frame = 0
 768              		@ frame_needed = 0, uses_anonymous_args = 0
 230:Src/uds_diag.c **** 
 769              		.loc 1 230 1 is_stmt 0 view .LVU226
 770 0000 10B5     		push	{r4, lr}
 771              	.LCFI8:
 772              		.cfi_def_cfa_offset 8
 773              		.cfi_offset 4, -8
 774              		.cfi_offset 14, -4
 233:Src/uds_diag.c **** 	Write_Data_Client.Data[ADD_Source] = Client_Address;
 775              		.loc 1 233 2 is_stmt 1 view .LVU227
 233:Src/uds_diag.c **** 	Write_Data_Client.Data[ADD_Source] = Client_Address;
 776              		.loc 1 233 30 is_stmt 0 view .LVU228
 777 0002 314B     		ldr	r3, .L75
 778 0004 2E22     		movs	r2, #46
 779 0006 1A70     		strb	r2, [r3]
 234:Src/uds_diag.c **** 
 780              		.loc 1 234 2 is_stmt 1 view .LVU229
 234:Src/uds_diag.c **** 
 781              		.loc 1 234 37 is_stmt 0 view .LVU230
 782 0008 F122     		movs	r2, #241
 783 000a 5A70     		strb	r2, [r3, #1]
 236:Src/uds_diag.c **** 	{
 784              		.loc 1 236 2 is_stmt 1 view .LVU231
 236:Src/uds_diag.c **** 	{
 785              		.loc 1 236 21 is_stmt 0 view .LVU232
 786 000c 2F4B     		ldr	r3, .L75+4
 787 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 236:Src/uds_diag.c **** 	{
 788              		.loc 1 236 4 view .LVU233
 789 0010 3D2B     		cmp	r3, #61
 790 0012 07D0     		beq	.L70
 240:Src/uds_diag.c **** 	{
 791              		.loc 1 240 7 is_stmt 1 view .LVU234
 240:Src/uds_diag.c **** 	{
 792              		.loc 1 240 9 is_stmt 0 view .LVU235
 793 0014 4D2B     		cmp	r3, #77
 794 0016 2BD0     		beq	.L71
 244:Src/uds_diag.c **** 	{
 795              		.loc 1 244 7 is_stmt 1 view .LVU236
 244:Src/uds_diag.c **** 	{
 796              		.loc 1 244 9 is_stmt 0 view .LVU237
 797 0018 FF2B     		cmp	r3, #255
 798 001a 06D1     		bne	.L64
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 28


 246:Src/uds_diag.c **** 	}
 799              		.loc 1 246 3 is_stmt 1 view .LVU238
 246:Src/uds_diag.c **** 	}
 800              		.loc 1 246 37 is_stmt 0 view .LVU239
 801 001c 2A4B     		ldr	r3, .L75
 802 001e FF22     		movs	r2, #255
 803 0020 9A70     		strb	r2, [r3, #2]
 804 0022 02E0     		b	.L64
 805              	.L70:
 238:Src/uds_diag.c **** 	}
 806              		.loc 1 238 3 is_stmt 1 view .LVU240
 238:Src/uds_diag.c **** 	}
 807              		.loc 1 238 37 is_stmt 0 view .LVU241
 808 0024 284B     		ldr	r3, .L75
 809 0026 3D22     		movs	r2, #61
 810 0028 9A70     		strb	r2, [r3, #2]
 811              	.L64:
 251:Src/uds_diag.c **** 
 812              		.loc 1 251 2 is_stmt 1 view .LVU242
 254:Src/uds_diag.c **** 	{
 813              		.loc 1 254 2 view .LVU243
 254:Src/uds_diag.c **** 	{
 814              		.loc 1 254 4 is_stmt 0 view .LVU244
 815 002a 4FF23D13 		movw	r3, #61757
 816 002e 9842     		cmp	r0, r3
 817 0030 22D0     		beq	.L72
 272:Src/uds_diag.c **** 	{
 818              		.loc 1 272 7 is_stmt 1 view .LVU245
 272:Src/uds_diag.c **** 	{
 819              		.loc 1 272 10 is_stmt 0 view .LVU246
 820 0032 4FF23D53 		movw	r3, #62781
 821 0036 9842     		cmp	r0, r3
 822 0038 2AD0     		beq	.L73
 290:Src/uds_diag.c **** 	{
 823              		.loc 1 290 7 is_stmt 1 view .LVU247
 290:Src/uds_diag.c **** 	{
 824              		.loc 1 290 10 is_stmt 0 view .LVU248
 825 003a 4FF23D23 		movw	r3, #62013
 826 003e 9842     		cmp	r0, r3
 827 0040 34D0     		beq	.L74
 828              	.LVL26:
 829              	.L67:
 320:Src/uds_diag.c **** 	//Check supressed Positive Responce
 830              		.loc 1 320 2 is_stmt 1 view .LVU249
 322:Src/uds_diag.c **** 	Write_Data_Client.Data[DID_1] &= ((SupressedPosRes_CLient<<7)|0x7F);
 831              		.loc 1 322 2 view .LVU250
 322:Src/uds_diag.c **** 	Write_Data_Client.Data[DID_1] &= ((SupressedPosRes_CLient<<7)|0x7F);
 832              		.loc 1 322 32 is_stmt 0 view .LVU251
 833 0042 214C     		ldr	r4, .L75
 834 0044 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 835 0046 43F08002 		orr	r2, r3, #128
 836 004a 6270     		strb	r2, [r4, #1]
 323:Src/uds_diag.c **** 	CanTp_Transmit(0, &Write_Data_Client);
 837              		.loc 1 323 2 is_stmt 1 view .LVU252
 323:Src/uds_diag.c **** 	CanTp_Transmit(0, &Write_Data_Client);
 838              		.loc 1 323 59 is_stmt 0 view .LVU253
 839 004c 204B     		ldr	r3, .L75+8
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 29


 840 004e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 841 0050 DB01     		lsls	r3, r3, #7
 323:Src/uds_diag.c **** 	CanTp_Transmit(0, &Write_Data_Client);
 842              		.loc 1 323 63 view .LVU254
 843 0052 43F07F03 		orr	r3, r3, #127
 844 0056 5BB2     		sxtb	r3, r3
 323:Src/uds_diag.c **** 	CanTp_Transmit(0, &Write_Data_Client);
 845              		.loc 1 323 32 view .LVU255
 846 0058 1340     		ands	r3, r3, r2
 847 005a 6370     		strb	r3, [r4, #1]
 324:Src/uds_diag.c **** 
 848              		.loc 1 324 2 is_stmt 1 view .LVU256
 849 005c 2146     		mov	r1, r4
 850 005e 0020     		movs	r0, #0
 851 0060 FFF7FEFF 		bl	CanTp_Transmit
 852              	.LVL27:
 328:Src/uds_diag.c **** 	//(&huart2, (uint8_t*)"\r\n", 50, HAL_MAX_DELAY);
 853              		.loc 1 328 2 view .LVU257
 854 0064 B4F80012 		ldrh	r1, [r4, #512]
 855 0068 2046     		mov	r0, r4
 856 006a FFF7FEFF 		bl	sendHexArrayAsASCII
 857              	.LVL28:
 330:Src/uds_diag.c **** 
 858              		.loc 1 330 1 is_stmt 0 view .LVU258
 859 006e 10BD     		pop	{r4, pc}
 860              	.LVL29:
 861              	.L71:
 242:Src/uds_diag.c **** 	}
 862              		.loc 1 242 3 is_stmt 1 view .LVU259
 242:Src/uds_diag.c **** 	}
 863              		.loc 1 242 37 is_stmt 0 view .LVU260
 864 0070 154B     		ldr	r3, .L75
 865 0072 4D22     		movs	r2, #77
 866 0074 9A70     		strb	r2, [r3, #2]
 867 0076 D8E7     		b	.L64
 868              	.L72:
 256:Src/uds_diag.c **** 		Write_Data_Client.Data[DID_2] = Oil_Temp_Second_byte;
 869              		.loc 1 256 3 is_stmt 1 view .LVU261
 257:Src/uds_diag.c **** 
 870              		.loc 1 257 3 view .LVU262
 257:Src/uds_diag.c **** 
 871              		.loc 1 257 33 is_stmt 0 view .LVU263
 872 0078 134C     		ldr	r4, .L75
 873 007a 3D23     		movs	r3, #61
 874 007c A370     		strb	r3, [r4, #2]
 260:Src/uds_diag.c **** 		/*
 875              		.loc 1 260 3 is_stmt 1 view .LVU264
 876 007e 2146     		mov	r1, r4
 877              	.LVL30:
 260:Src/uds_diag.c **** 		/*
 878              		.loc 1 260 3 is_stmt 0 view .LVU265
 879 0080 0420     		movs	r0, #4
 880              	.LVL31:
 260:Src/uds_diag.c **** 		/*
 881              		.loc 1 260 3 view .LVU266
 882 0082 FFF7FEFF 		bl	UART_ReceiveAndConvert
 883              	.LVL32:
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 30


 267:Src/uds_diag.c **** 		Write_Data_Client.Data[PCI] = 8;
 884              		.loc 1 267 3 is_stmt 1 view .LVU267
 267:Src/uds_diag.c **** 		Write_Data_Client.Data[PCI] = 8;
 885              		.loc 1 267 28 is_stmt 0 view .LVU268
 886 0086 0823     		movs	r3, #8
 887 0088 C4F80032 		str	r3, [r4, #512]
 268:Src/uds_diag.c **** 
 888              		.loc 1 268 3 is_stmt 1 view .LVU269
 268:Src/uds_diag.c **** 
 889              		.loc 1 268 31 is_stmt 0 view .LVU270
 890 008c 2370     		strb	r3, [r4]
 891 008e D8E7     		b	.L67
 892              	.LVL33:
 893              	.L73:
 274:Src/uds_diag.c **** 		Write_Data_Client.Data[DID_2] = Oil_Pressure_Second_byte;
 894              		.loc 1 274 3 is_stmt 1 view .LVU271
 274:Src/uds_diag.c **** 		Write_Data_Client.Data[DID_2] = Oil_Pressure_Second_byte;
 895              		.loc 1 274 33 is_stmt 0 view .LVU272
 896 0090 0D4C     		ldr	r4, .L75
 897 0092 F523     		movs	r3, #245
 898 0094 6370     		strb	r3, [r4, #1]
 275:Src/uds_diag.c **** 
 899              		.loc 1 275 3 is_stmt 1 view .LVU273
 275:Src/uds_diag.c **** 
 900              		.loc 1 275 33 is_stmt 0 view .LVU274
 901 0096 3D23     		movs	r3, #61
 902 0098 A370     		strb	r3, [r4, #2]
 278:Src/uds_diag.c **** 		/*
 903              		.loc 1 278 3 is_stmt 1 view .LVU275
 904 009a 2146     		mov	r1, r4
 905              	.LVL34:
 278:Src/uds_diag.c **** 		/*
 906              		.loc 1 278 3 is_stmt 0 view .LVU276
 907 009c 0820     		movs	r0, #8
 908              	.LVL35:
 278:Src/uds_diag.c **** 		/*
 909              		.loc 1 278 3 view .LVU277
 910 009e FFF7FEFF 		bl	UART_ReceiveAndConvert
 911              	.LVL36:
 285:Src/uds_diag.c **** 		Write_Data_Client.Data[PCI] = 10;
 912              		.loc 1 285 3 is_stmt 1 view .LVU278
 285:Src/uds_diag.c **** 		Write_Data_Client.Data[PCI] = 10;
 913              		.loc 1 285 28 is_stmt 0 view .LVU279
 914 00a2 0A23     		movs	r3, #10
 915 00a4 C4F80032 		str	r3, [r4, #512]
 286:Src/uds_diag.c **** 
 916              		.loc 1 286 3 is_stmt 1 view .LVU280
 286:Src/uds_diag.c **** 
 917              		.loc 1 286 31 is_stmt 0 view .LVU281
 918 00a8 2370     		strb	r3, [r4]
 919 00aa CAE7     		b	.L67
 920              	.LVL37:
 921              	.L74:
 292:Src/uds_diag.c **** 		Write_Data_Client.Data[DID_2] = VIN_number_Second_byte;
 922              		.loc 1 292 3 is_stmt 1 view .LVU282
 292:Src/uds_diag.c **** 		Write_Data_Client.Data[DID_2] = VIN_number_Second_byte;
 923              		.loc 1 292 33 is_stmt 0 view .LVU283
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 31


 924 00ac 064C     		ldr	r4, .L75
 925 00ae F223     		movs	r3, #242
 926 00b0 6370     		strb	r3, [r4, #1]
 293:Src/uds_diag.c **** 
 927              		.loc 1 293 3 is_stmt 1 view .LVU284
 293:Src/uds_diag.c **** 
 928              		.loc 1 293 33 is_stmt 0 view .LVU285
 929 00b2 3D23     		movs	r3, #61
 930 00b4 A370     		strb	r3, [r4, #2]
 296:Src/uds_diag.c **** 		//Write_Data_Client.Data[Data_DID] = (data >> 24) & 0xFF; // Most significant byte of data
 931              		.loc 1 296 3 is_stmt 1 view .LVU286
 932 00b6 2146     		mov	r1, r4
 933              	.LVL38:
 296:Src/uds_diag.c **** 		//Write_Data_Client.Data[Data_DID] = (data >> 24) & 0xFF; // Most significant byte of data
 934              		.loc 1 296 3 is_stmt 0 view .LVU287
 935 00b8 2220     		movs	r0, #34
 936              	.LVL39:
 296:Src/uds_diag.c **** 		//Write_Data_Client.Data[Data_DID] = (data >> 24) & 0xFF; // Most significant byte of data
 937              		.loc 1 296 3 view .LVU288
 938 00ba FFF7FEFF 		bl	UART_ReceiveAndConvert
 939              	.LVL40:
 305:Src/uds_diag.c **** 		Write_Data_Client.Data[PCI] = 23;
 940              		.loc 1 305 3 is_stmt 1 view .LVU289
 305:Src/uds_diag.c **** 		Write_Data_Client.Data[PCI] = 23;
 941              		.loc 1 305 28 is_stmt 0 view .LVU290
 942 00be 1723     		movs	r3, #23
 943 00c0 C4F80032 		str	r3, [r4, #512]
 306:Src/uds_diag.c **** 
 944              		.loc 1 306 3 is_stmt 1 view .LVU291
 306:Src/uds_diag.c **** 
 945              		.loc 1 306 31 is_stmt 0 view .LVU292
 946 00c4 2370     		strb	r3, [r4]
 947 00c6 BCE7     		b	.L67
 948              	.L76:
 949              		.align	2
 950              	.L75:
 951 00c8 00000000 		.word	.LANCHOR7
 952 00cc 00000000 		.word	.LANCHOR1
 953 00d0 00000000 		.word	.LANCHOR2
 954              		.cfi_endproc
 955              	.LFE76:
 957              		.section	.text.charToHex,"ax",%progbits
 958              		.align	1
 959              		.global	charToHex
 960              		.syntax unified
 961              		.thumb
 962              		.thumb_func
 964              	charToHex:
 965              	.LVL41:
 966              	.LFB81:
 696:Src/uds_diag.c **** 
 697:Src/uds_diag.c **** 
 698:Src/uds_diag.c **** 
 699:Src/uds_diag.c **** // void UART_ReceiveAndConvert(uint8_t RX_BUFFER_SIZE, PduInfoType* PduInfoType_Ptr)
 700:Src/uds_diag.c **** // {
 701:Src/uds_diag.c **** // 	uint8_t rxBuffer[RX_BUFFER_SIZE];
 702:Src/uds_diag.c **** // 	uint8_t hexValue;
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 32


 703:Src/uds_diag.c **** // 	uint8_t hexOutput[RX_BUFFER_SIZE / 2];
 704:Src/uds_diag.c **** // 	uint16_t length = 0;
 705:Src/uds_diag.c **** 
 706:Src/uds_diag.c **** // 	// Receive ASCII characters from UART
 707:Src/uds_diag.c **** // 	if (HAL_UART_Receive(&huart2, rxBuffer, RX_BUFFER_SIZE, HAL_MAX_DELAY) == HAL_OK) {
 708:Src/uds_diag.c **** // 		// Calculate the length of the received string
 709:Src/uds_diag.c **** // 		length = RX_BUFFER_SIZE/*strlen((char*)rxBuffer)*/;
 710:Src/uds_diag.c **** 
 711:Src/uds_diag.c **** // 		// Ensure the length is even (each hex byte is represented by 2 ASCII characters)
 712:Src/uds_diag.c **** // 		if (length % 2 != 0) {
 713:Src/uds_diag.c **** // 			// Send an error message
 714:Src/uds_diag.c **** // 			char errorMsg[] = "Error: Odd number of characters received.\n";
 715:Src/uds_diag.c **** // 			//(&huart2, (uint8_t*)errorMsg, strlen(errorMsg), HAL_MAX_DELAY);
 716:Src/uds_diag.c **** // 			return;
 717:Src/uds_diag.c **** // 		}
 718:Src/uds_diag.c **** 
 719:Src/uds_diag.c **** // 		// Process each pair of ASCII characters
 720:Src/uds_diag.c **** // 		for (uint16_t i = 0; i < length; i += 2) {
 721:Src/uds_diag.c **** // 			hexValue = (charToHex(rxBuffer[i]) << 4) | charToHex(rxBuffer[i + 1]);
 722:Src/uds_diag.c **** // 			//update hexvalue into frame
 723:Src/uds_diag.c **** // 			if(PduInfoType_Ptr->Data[Sub_F] == Key)
 724:Src/uds_diag.c **** // 			{
 725:Src/uds_diag.c **** // 				PduInfoType_Ptr->Data[(i / 2)+5] = hexValue;
 726:Src/uds_diag.c **** // 			}
 727:Src/uds_diag.c **** // 			else if ( (PduInfoType_Ptr->Data[DID_1] == Oil_Temp_First_byte) || (PduInfoType_Ptr->Data[DID
 728:Src/uds_diag.c **** // 			{
 729:Src/uds_diag.c **** // 				PduInfoType_Ptr->Data[(i / 2)+6] = hexValue;
 730:Src/uds_diag.c **** // 			}
 731:Src/uds_diag.c **** 
 732:Src/uds_diag.c **** // 			hexOutput[i / 2] = hexValue;
 733:Src/uds_diag.c **** // 			// Optionally, send the hexadecimal values back via UART
 734:Src/uds_diag.c **** // 			//HAL_UART_Transmit(&huart2, hexOutput, 1/*length / 2*/, HAL_MAX_DELAY);
 735:Src/uds_diag.c **** // 		}
 736:Src/uds_diag.c **** // 		sendHexArrayAsASCII(hexOutput,  length / 2);
 737:Src/uds_diag.c **** 
 738:Src/uds_diag.c **** // 	}
 739:Src/uds_diag.c **** // }
 740:Src/uds_diag.c **** 
 741:Src/uds_diag.c **** uint8_t charToHex(uint8_t ascii)
 742:Src/uds_diag.c **** {
 967              		.loc 1 742 1 is_stmt 1 view -0
 968              		.cfi_startproc
 969              		@ args = 0, pretend = 0, frame = 0
 970              		@ frame_needed = 0, uses_anonymous_args = 0
 971              		@ link register save eliminated.
 972              		.loc 1 742 1 is_stmt 0 view .LVU294
 973 0000 0346     		mov	r3, r0
 743:Src/uds_diag.c **** 	if (ascii >= '0' && ascii <= '9') {
 974              		.loc 1 743 2 is_stmt 1 view .LVU295
 975              		.loc 1 743 19 is_stmt 0 view .LVU296
 976 0002 3038     		subs	r0, r0, #48
 977              	.LVL42:
 978              		.loc 1 743 19 view .LVU297
 979 0004 C0B2     		uxtb	r0, r0
 980              		.loc 1 743 5 view .LVU298
 981 0006 0928     		cmp	r0, #9
 982 0008 10D9     		bls	.L78
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 33


 744:Src/uds_diag.c **** 		return ascii - '0';
 745:Src/uds_diag.c **** 	} else if (ascii >= 'A' && ascii <= 'F') {
 983              		.loc 1 745 9 is_stmt 1 view .LVU299
 984              		.loc 1 745 26 is_stmt 0 view .LVU300
 985 000a A3F14102 		sub	r2, r3, #65
 986 000e D2B2     		uxtb	r2, r2
 987              		.loc 1 745 12 view .LVU301
 988 0010 052A     		cmp	r2, #5
 989 0012 07D9     		bls	.L81
 746:Src/uds_diag.c **** 		return ascii - 'A' + 10;
 747:Src/uds_diag.c **** 	} else if (ascii >= 'a' && ascii <= 'f') {
 990              		.loc 1 747 9 is_stmt 1 view .LVU302
 991              		.loc 1 747 26 is_stmt 0 view .LVU303
 992 0014 A3F16102 		sub	r2, r3, #97
 993 0018 D2B2     		uxtb	r2, r2
 994              		.loc 1 747 12 view .LVU304
 995 001a 052A     		cmp	r2, #5
 996 001c 05D8     		bhi	.L80
 748:Src/uds_diag.c **** 		return ascii - 'a' + 10;
 997              		.loc 1 748 3 is_stmt 1 view .LVU305
 998              		.loc 1 748 22 is_stmt 0 view .LVU306
 999 001e 573B     		subs	r3, r3, #87
 1000 0020 D8B2     		uxtb	r0, r3
 1001 0022 7047     		bx	lr
 1002              	.L81:
 746:Src/uds_diag.c **** 		return ascii - 'A' + 10;
 1003              		.loc 1 746 3 is_stmt 1 view .LVU307
 746:Src/uds_diag.c **** 		return ascii - 'A' + 10;
 1004              		.loc 1 746 22 is_stmt 0 view .LVU308
 1005 0024 373B     		subs	r3, r3, #55
 1006 0026 D8B2     		uxtb	r0, r3
 1007 0028 7047     		bx	lr
 1008              	.L80:
 749:Src/uds_diag.c **** 	} else {
 750:Src/uds_diag.c **** 		return 0; // Invalid character
 1009              		.loc 1 750 10 view .LVU309
 1010 002a 0020     		movs	r0, #0
 1011              	.L78:
 751:Src/uds_diag.c **** 	}
 752:Src/uds_diag.c **** }
 1012              		.loc 1 752 1 view .LVU310
 1013 002c 7047     		bx	lr
 1014              		.cfi_endproc
 1015              	.LFE81:
 1017              		.section	.text.UDS_Send_Pos_Res,"ax",%progbits
 1018              		.align	1
 1019              		.global	UDS_Send_Pos_Res
 1020              		.syntax unified
 1021              		.thumb
 1022              		.thumb_func
 1024              	UDS_Send_Pos_Res:
 1025              	.LVL43:
 1026              	.LFB83:
 753:Src/uds_diag.c **** 
 754:Src/uds_diag.c **** 
 755:Src/uds_diag.c **** /***************************************************************Server*****************************
 756:Src/uds_diag.c **** 
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 34


 757:Src/uds_diag.c **** void UDS_Write_Data_Server(uint8_t* received_data, uint16_t received_length)
 758:Src/uds_diag.c **** {
 759:Src/uds_diag.c **** 	/*???????????????????????*/
 760:Src/uds_diag.c **** 	uint8_t received_data_l = sizeof(received_data);
 761:Src/uds_diag.c **** 	if (received_length != received_data_l - 1)
 762:Src/uds_diag.c **** 	{
 763:Src/uds_diag.c **** 		//UDS_Send_Neg_Res(Write_Service, incorrectMessageLengthOrInvalidFormat);
 764:Src/uds_diag.c **** 	}
 765:Src/uds_diag.c **** 
 766:Src/uds_diag.c **** 	// Extract the DID from the received data
 767:Src/uds_diag.c **** 	//	uint16_t DID = (received_data[2] << 8) | received_data[3];
 768:Src/uds_diag.c **** 
 769:Src/uds_diag.c **** 	// Extract the data from the received data
 770:Src/uds_diag.c **** 	//	uint32_t data;
 771:Src/uds_diag.c **** 	//	data = (received_data[4] << 24) | (received_data[5] << 16) | (received_data[6] << 8) | received
 772:Src/uds_diag.c **** 
 773:Src/uds_diag.c **** 
 774:Src/uds_diag.c **** 	// update the data in the required DID
 775:Src/uds_diag.c **** 	//	uint8_t returnType = check_DID( DID, data);
 776:Src/uds_diag.c **** 	// according to the returnType if it is equal to 1 --> positive response - but if it is equal to 0
 777:Src/uds_diag.c **** 
 778:Src/uds_diag.c **** 	/*********************************
 779:Src/uds_diag.c **** 		this is the logic of +ive resp ( we need edit )
 780:Src/uds_diag.c **** 	 *************************************/
 781:Src/uds_diag.c **** 	// Define the positive response array
 782:Src/uds_diag.c **** 	//	uint8_t arr[7]; // Adjust size as needed
 783:Src/uds_diag.c **** 	//	uint8_t  SID_response = 0x6E; // Positive response SID (0x2E + 0x40)
 784:Src/uds_diag.c **** 
 785:Src/uds_diag.c **** 	// Fill the local array with SID_response, DID, and data
 786:Src/uds_diag.c **** 	//	arr[0] = SID_response;
 787:Src/uds_diag.c **** 	//	arr[1] = (DID >> 8) & 0xFF; // Most significant byte of DID
 788:Src/uds_diag.c **** 	//	arr[2] = DID & 0xFF;        // Least significant byte of DID
 789:Src/uds_diag.c **** 	//
 790:Src/uds_diag.c **** 	//	// Assuming Data is 4 bytes
 791:Src/uds_diag.c **** 	//	arr[3] = (data >> 24) & 0xFF; // Most significant byte of data
 792:Src/uds_diag.c **** 	//	arr[4] = (data >> 16) & 0xFF;
 793:Src/uds_diag.c **** 	//	arr[5] = (data >> 8) & 0xFF;
 794:Src/uds_diag.c **** 	//	arr[6] = data & 0xFF;		  // Least significant byte of data
 795:Src/uds_diag.c **** 
 796:Src/uds_diag.c **** 
 797:Src/uds_diag.c **** 	pos_Response.SID = Write_Service ;
 798:Src/uds_diag.c **** 	pos_Response.DID[0]=received_data[DID_1];
 799:Src/uds_diag.c **** 	pos_Response.DID[1]=received_data[DID_2];
 800:Src/uds_diag.c **** 	pos_Response.DID_Length=2;
 801:Src/uds_diag.c **** 	pos_Response.Data_Length = 0;
 802:Src/uds_diag.c **** 	pos_Response.SUB_FUNC = -1;
 803:Src/uds_diag.c **** 
 804:Src/uds_diag.c **** 	pos_Response.DID[0] |= 0b10000000;//Original DID
 805:Src/uds_diag.c **** 
 806:Src/uds_diag.c **** 	if(received_data[DID_1] == Oil_Temp_First_byte && received_data[DID_2] == Oil_Temp_Second_byte){
 807:Src/uds_diag.c **** 		Oil_Temp_var = received_data[Data_DID] << 8 | received_data[Data_DID+1];
 808:Src/uds_diag.c **** 	}
 809:Src/uds_diag.c **** 	else if(received_data[DID_1] == Oil_Pressure_First_byte && received_data[DID_2] == Oil_Pressure_Se
 810:Src/uds_diag.c **** 		Oil_Pressure_var = received_data[Data_DID] << 24 | received_data[Data_DID+1] << 16 | received_dat
 811:Src/uds_diag.c **** 	}
 812:Src/uds_diag.c **** 	else if(received_data[DID_1] == VIN_number_First_byte && received_data[DID_2] == VIN_number_Second
 813:Src/uds_diag.c **** 		//VIN_number_var = received_data[Data_DID] << 24 | received_data[Data_DID+1] << 16 | received_dat
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 35


 814:Src/uds_diag.c **** 
 815:Src/uds_diag.c **** 		for (uint8_t i=0; i<=16; i++)
 816:Src/uds_diag.c **** 		{
 817:Src/uds_diag.c **** 			VIN_number_var[i] = received_data[Data_DID + i];
 818:Src/uds_diag.c **** 			//VIN_number_var |= received_data[(Data_DID + (16-i))] << (i*8);
 819:Src/uds_diag.c **** 		}
 820:Src/uds_diag.c **** /*
 821:Src/uds_diag.c **** 		HAL_UART_Transmit(&huart2, (uint8_t*)"VIN_number_var: ", strlen("VIN_number_var: "), HAL_MAX_DELA
 822:Src/uds_diag.c **** 		sendHexArrayAsASCII(VIN_number_var,  17);
 823:Src/uds_diag.c **** 		HAL_UART_Transmit(&huart2, (uint8_t*)"\r\n", strlen("\r\n"), HAL_MAX_DELAY);
 824:Src/uds_diag.c **** 		sendHexArrayAsASCII(&received_data[Data_DID],  17);
 825:Src/uds_diag.c **** 		HAL_UART_Transmit(&huart2, (uint8_t*)"\r\n", strlen("\r\n"), HAL_MAX_DELAY);
 826:Src/uds_diag.c **** 	*/
 827:Src/uds_diag.c **** 	}
 828:Src/uds_diag.c **** 	else
 829:Src/uds_diag.c **** 	{
 830:Src/uds_diag.c **** 		//Another DID
 831:Src/uds_diag.c **** 	}
 832:Src/uds_diag.c **** 	if(SupressedPosRes_Server == 1)
 833:Src/uds_diag.c **** 	{
 834:Src/uds_diag.c **** 		UDS_Send_Pos_Res(&pos_Response);
 835:Src/uds_diag.c **** 		return;
 836:Src/uds_diag.c **** 	}
 837:Src/uds_diag.c **** 
 838:Src/uds_diag.c **** 	return;
 839:Src/uds_diag.c **** 
 840:Src/uds_diag.c **** 	/*
 841:Src/uds_diag.c **** 	PduInfoType hamada_write;
 842:Src/uds_diag.c **** 
 843:Src/uds_diag.c **** 	// Prepare the TP structure
 844:Src/uds_diag.c **** 	//hamada_write.Data = arr;
 845:Src/uds_diag.c **** 
 846:Src/uds_diag.c **** 	for(int i = 0 ; i< 8; i++)
 847:Src/uds_diag.c **** 	{
 848:Src/uds_diag.c **** 		hamada_write.Data[i] = arr[i];
 849:Src/uds_diag.c **** 	}
 850:Src/uds_diag.c **** 	hamada_write.Length = sizeof(arr);
 851:Src/uds_diag.c **** 
 852:Src/uds_diag.c **** 	// Transmit the data through CAN_TP using this function
 853:Src/uds_diag.c **** 	CanTP_Transmit(0, &hamada_write);*/
 854:Src/uds_diag.c **** }
 855:Src/uds_diag.c **** 
 856:Src/uds_diag.c **** 
 857:Src/uds_diag.c **** 
 858:Src/uds_diag.c **** /*****************************************************************************/
 859:Src/uds_diag.c **** 
 860:Src/uds_diag.c **** void UDS_Send_Pos_Res(ServiceInfo* Response)
 861:Src/uds_diag.c **** {
 1027              		.loc 1 861 1 is_stmt 1 view -0
 1028              		.cfi_startproc
 1029              		@ args = 0, pretend = 0, frame = 0
 1030              		@ frame_needed = 0, uses_anonymous_args = 0
 1031              		.loc 1 861 1 is_stmt 0 view .LVU312
 1032 0000 10B5     		push	{r4, lr}
 1033              	.LCFI9:
 1034              		.cfi_def_cfa_offset 8
 1035              		.cfi_offset 4, -8
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 36


 1036              		.cfi_offset 14, -4
 862:Src/uds_diag.c **** 
 863:Src/uds_diag.c **** 	uint8_t PCI = 4 + Response->DID_Length + Response->Data_Length;
 1037              		.loc 1 863 2 is_stmt 1 view .LVU313
 1038              		.loc 1 863 28 is_stmt 0 view .LVU314
 1039 0002 8379     		ldrb	r3, [r0, #6]	@ zero_extendqisi2
 1040              		.loc 1 863 51 view .LVU315
 1041 0004 90F807E2 		ldrb	lr, [r0, #519]	@ zero_extendqisi2
 1042              		.loc 1 863 41 view .LVU316
 1043 0008 7344     		add	r3, r3, lr
 1044 000a DBB2     		uxtb	r3, r3
 1045              	.LVL44:
 864:Src/uds_diag.c **** 	msg.Data[SID] = Response->SID + 0x40;
 1046              		.loc 1 864 2 is_stmt 1 view .LVU317
 1047              		.loc 1 864 26 is_stmt 0 view .LVU318
 1048 000c 8178     		ldrb	r1, [r0, #2]	@ zero_extendqisi2
 1049              		.loc 1 864 32 view .LVU319
 1050 000e 4031     		adds	r1, r1, #64
 1051              		.loc 1 864 16 view .LVU320
 1052 0010 1B4A     		ldr	r2, .L90
 1053 0012 1170     		strb	r1, [r2]
 865:Src/uds_diag.c **** 	msg.Data[ADD_Source] = Response->ADD_Source;
 1054              		.loc 1 865 2 is_stmt 1 view .LVU321
 1055              		.loc 1 865 33 is_stmt 0 view .LVU322
 1056 0014 0178     		ldrb	r1, [r0]	@ zero_extendqisi2
 1057              		.loc 1 865 23 view .LVU323
 1058 0016 5170     		strb	r1, [r2, #1]
 866:Src/uds_diag.c **** 	msg.Data[ADD_Target] = Response->ADD_Target;
 1059              		.loc 1 866 2 is_stmt 1 view .LVU324
 1060              		.loc 1 866 33 is_stmt 0 view .LVU325
 1061 0018 4178     		ldrb	r1, [r0, #1]	@ zero_extendqisi2
 1062              		.loc 1 866 23 view .LVU326
 1063 001a 9170     		strb	r1, [r2, #2]
 867:Src/uds_diag.c **** 	uint8_t currentIndex = Sub_F;
 1064              		.loc 1 867 2 is_stmt 1 view .LVU327
 1065              	.LVL45:
 868:Src/uds_diag.c **** 	if(Response->SUB_FUNC != -1)
 1066              		.loc 1 868 2 view .LVU328
 1067              		.loc 1 868 13 is_stmt 0 view .LVU329
 1068 001c 90F90320 		ldrsb	r2, [r0, #3]
 1069              		.loc 1 868 4 view .LVU330
 1070 0020 B2F1FF3F 		cmp	r2, #-1
 1071 0024 12D0     		beq	.L88
 869:Src/uds_diag.c **** 	{
 870:Src/uds_diag.c **** 		PCI++;
 1072              		.loc 1 870 3 is_stmt 1 view .LVU331
 1073              		.loc 1 870 6 is_stmt 0 view .LVU332
 1074 0026 0533     		adds	r3, r3, #5
 1075              	.LVL46:
 1076              		.loc 1 870 6 view .LVU333
 1077 0028 DCB2     		uxtb	r4, r3
 1078              	.LVL47:
 871:Src/uds_diag.c **** 		msg.Data[currentIndex++]= Response->SUB_FUNC;
 1079              		.loc 1 871 3 is_stmt 1 view .LVU334
 1080              		.loc 1 871 27 is_stmt 0 view .LVU335
 1081 002a 154B     		ldr	r3, .L90
 1082 002c 1A71     		strb	r2, [r3, #4]
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 37


 1083              		.loc 1 871 24 view .LVU336
 1084 002e 0522     		movs	r2, #5
 1085              	.LVL48:
 1086              	.L84:
 872:Src/uds_diag.c **** 	}
 873:Src/uds_diag.c **** 	else
 874:Src/uds_diag.c **** 	{
 875:Src/uds_diag.c **** 		for(currentIndex = DID_1; currentIndex < Response->DID_Length + 4; currentIndex++)
 876:Src/uds_diag.c **** 		{
 877:Src/uds_diag.c **** 			msg.Data[currentIndex] = Response->DID[currentIndex - 4];
 878:Src/uds_diag.c **** 		}
 879:Src/uds_diag.c **** 	}
 880:Src/uds_diag.c **** 
 881:Src/uds_diag.c **** 	uint8_t temp = currentIndex;
 1087              		.loc 1 881 2 is_stmt 1 view .LVU337
 882:Src/uds_diag.c **** 	while(currentIndex < Response->Data_Length + temp)
 1088              		.loc 1 882 2 view .LVU338
 1089              		.loc 1 882 7 is_stmt 0 view .LVU339
 1090 0030 1346     		mov	r3, r2
 1091 0032 18E0     		b	.L86
 1092              	.LVL49:
 1093              	.L85:
 877:Src/uds_diag.c **** 		}
 1094              		.loc 1 877 4 is_stmt 1 discriminator 3 view .LVU340
 877:Src/uds_diag.c **** 		}
 1095              		.loc 1 877 56 is_stmt 0 discriminator 3 view .LVU341
 1096 0034 131F     		subs	r3, r2, #4
 877:Src/uds_diag.c **** 		}
 1097              		.loc 1 877 42 discriminator 3 view .LVU342
 1098 0036 0344     		add	r3, r3, r0
 1099 0038 1979     		ldrb	r1, [r3, #4]	@ zero_extendqisi2
 877:Src/uds_diag.c **** 		}
 1100              		.loc 1 877 27 discriminator 3 view .LVU343
 1101 003a 114B     		ldr	r3, .L90
 1102 003c 9954     		strb	r1, [r3, r2]
 875:Src/uds_diag.c **** 		{
 1103              		.loc 1 875 70 is_stmt 1 discriminator 3 view .LVU344
 875:Src/uds_diag.c **** 		{
 1104              		.loc 1 875 82 is_stmt 0 discriminator 3 view .LVU345
 1105 003e 0132     		adds	r2, r2, #1
 1106              	.LVL50:
 875:Src/uds_diag.c **** 		{
 1107              		.loc 1 875 82 discriminator 3 view .LVU346
 1108 0040 D2B2     		uxtb	r2, r2
 1109              	.LVL51:
 1110              	.L83:
 875:Src/uds_diag.c **** 		{
 1111              		.loc 1 875 29 is_stmt 1 discriminator 1 view .LVU347
 875:Src/uds_diag.c **** 		{
 1112              		.loc 1 875 52 is_stmt 0 discriminator 1 view .LVU348
 1113 0042 8379     		ldrb	r3, [r0, #6]	@ zero_extendqisi2
 875:Src/uds_diag.c **** 		{
 1114              		.loc 1 875 42 discriminator 1 view .LVU349
 1115 0044 0333     		adds	r3, r3, #3
 875:Src/uds_diag.c **** 		{
 1116              		.loc 1 875 3 discriminator 1 view .LVU350
 1117 0046 9342     		cmp	r3, r2
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 38


 1118 0048 F4DA     		bge	.L85
 1119 004a F1E7     		b	.L84
 1120              	.LVL52:
 1121              	.L88:
 875:Src/uds_diag.c **** 		{
 1122              		.loc 1 875 3 discriminator 1 view .LVU351
 1123 004c 1C1D     		adds	r4, r3, #4
 1124 004e E4B2     		uxtb	r4, r4
 875:Src/uds_diag.c **** 		{
 1125              		.loc 1 875 20 view .LVU352
 1126 0050 0122     		movs	r2, #1
 1127 0052 F6E7     		b	.L83
 1128              	.LVL53:
 1129              	.L87:
 883:Src/uds_diag.c **** 	{
 884:Src/uds_diag.c **** 		msg.Data[currentIndex] = Response->Data[currentIndex - temp];
 1130              		.loc 1 884 3 is_stmt 1 view .LVU353
 1131              		.loc 1 884 56 is_stmt 0 view .LVU354
 1132 0054 991A     		subs	r1, r3, r2
 1133              		.loc 1 884 42 view .LVU355
 1134 0056 0144     		add	r1, r1, r0
 1135 0058 91F807C0 		ldrb	ip, [r1, #7]	@ zero_extendqisi2
 1136              		.loc 1 884 26 view .LVU356
 1137 005c 0849     		ldr	r1, .L90
 1138 005e 01F803C0 		strb	ip, [r1, r3]
 885:Src/uds_diag.c **** 		currentIndex++;
 1139              		.loc 1 885 3 is_stmt 1 view .LVU357
 1140              		.loc 1 885 15 is_stmt 0 view .LVU358
 1141 0062 0133     		adds	r3, r3, #1
 1142              	.LVL54:
 1143              		.loc 1 885 15 view .LVU359
 1144 0064 DBB2     		uxtb	r3, r3
 1145              	.LVL55:
 1146              	.L86:
 882:Src/uds_diag.c **** 	{
 1147              		.loc 1 882 7 is_stmt 1 view .LVU360
 882:Src/uds_diag.c **** 	{
 1148              		.loc 1 882 45 is_stmt 0 view .LVU361
 1149 0066 0EEB0201 		add	r1, lr, r2
 882:Src/uds_diag.c **** 	{
 1150              		.loc 1 882 7 view .LVU362
 1151 006a 8B42     		cmp	r3, r1
 1152 006c F2DB     		blt	.L87
 886:Src/uds_diag.c **** 	}
 887:Src/uds_diag.c **** 	msg.Data[0] = PCI;
 1153              		.loc 1 887 2 is_stmt 1 view .LVU363
 1154              		.loc 1 887 14 is_stmt 0 view .LVU364
 1155 006e 0449     		ldr	r1, .L90
 1156 0070 0C70     		strb	r4, [r1]
 888:Src/uds_diag.c **** 	msg.Length = PCI;
 1157              		.loc 1 888 2 is_stmt 1 view .LVU365
 1158              		.loc 1 888 13 is_stmt 0 view .LVU366
 1159 0072 C1F80042 		str	r4, [r1, #512]
 889:Src/uds_diag.c **** 
 890:Src/uds_diag.c **** 	CanTp_Transmit(0, &msg);
 1160              		.loc 1 890 2 is_stmt 1 view .LVU367
 1161 0076 0020     		movs	r0, #0
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 39


 1162              	.LVL56:
 1163              		.loc 1 890 2 is_stmt 0 view .LVU368
 1164 0078 FFF7FEFF 		bl	CanTp_Transmit
 1165              	.LVL57:
 891:Src/uds_diag.c **** }
 1166              		.loc 1 891 1 view .LVU369
 1167 007c 10BD     		pop	{r4, pc}
 1168              	.LVL58:
 1169              	.L91:
 1170              		.loc 1 891 1 view .LVU370
 1171 007e 00BF     		.align	2
 1172              	.L90:
 1173 0080 00000000 		.word	.LANCHOR8
 1174              		.cfi_endproc
 1175              	.LFE83:
 1177              		.section	.text.UDS_Write_Data_Server,"ax",%progbits
 1178              		.align	1
 1179              		.global	UDS_Write_Data_Server
 1180              		.syntax unified
 1181              		.thumb
 1182              		.thumb_func
 1184              	UDS_Write_Data_Server:
 1185              	.LVL59:
 1186              	.LFB82:
 758:Src/uds_diag.c **** 	/*???????????????????????*/
 1187              		.loc 1 758 1 is_stmt 1 view -0
 1188              		.cfi_startproc
 1189              		@ args = 0, pretend = 0, frame = 0
 1190              		@ frame_needed = 0, uses_anonymous_args = 0
 758:Src/uds_diag.c **** 	/*???????????????????????*/
 1191              		.loc 1 758 1 is_stmt 0 view .LVU372
 1192 0000 08B5     		push	{r3, lr}
 1193              	.LCFI10:
 1194              		.cfi_def_cfa_offset 8
 1195              		.cfi_offset 3, -8
 1196              		.cfi_offset 14, -4
 760:Src/uds_diag.c **** 	if (received_length != received_data_l - 1)
 1197              		.loc 1 760 2 is_stmt 1 view .LVU373
 1198              	.LVL60:
 761:Src/uds_diag.c **** 	{
 1199              		.loc 1 761 2 view .LVU374
 764:Src/uds_diag.c **** 
 1200              		.loc 1 764 2 view .LVU375
 797:Src/uds_diag.c **** 	pos_Response.DID[0]=received_data[DID_1];
 1201              		.loc 1 797 2 view .LVU376
 797:Src/uds_diag.c **** 	pos_Response.DID[0]=received_data[DID_1];
 1202              		.loc 1 797 19 is_stmt 0 view .LVU377
 1203 0002 254B     		ldr	r3, .L105
 1204 0004 2E22     		movs	r2, #46
 1205 0006 9A70     		strb	r2, [r3, #2]
 798:Src/uds_diag.c **** 	pos_Response.DID[1]=received_data[DID_2];
 1206              		.loc 1 798 2 is_stmt 1 view .LVU378
 798:Src/uds_diag.c **** 	pos_Response.DID[1]=received_data[DID_2];
 1207              		.loc 1 798 35 is_stmt 0 view .LVU379
 1208 0008 90F90120 		ldrsb	r2, [r0, #1]
 798:Src/uds_diag.c **** 	pos_Response.DID[1]=received_data[DID_2];
 1209              		.loc 1 798 21 view .LVU380
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 40


 1210 000c 1A71     		strb	r2, [r3, #4]
 799:Src/uds_diag.c **** 	pos_Response.DID_Length=2;
 1211              		.loc 1 799 2 is_stmt 1 view .LVU381
 799:Src/uds_diag.c **** 	pos_Response.DID_Length=2;
 1212              		.loc 1 799 35 is_stmt 0 view .LVU382
 1213 000e 90F90210 		ldrsb	r1, [r0, #2]
 1214              	.LVL61:
 799:Src/uds_diag.c **** 	pos_Response.DID_Length=2;
 1215              		.loc 1 799 21 view .LVU383
 1216 0012 5971     		strb	r1, [r3, #5]
 800:Src/uds_diag.c **** 	pos_Response.Data_Length = 0;
 1217              		.loc 1 800 2 is_stmt 1 view .LVU384
 800:Src/uds_diag.c **** 	pos_Response.Data_Length = 0;
 1218              		.loc 1 800 25 is_stmt 0 view .LVU385
 1219 0014 0221     		movs	r1, #2
 1220 0016 9971     		strb	r1, [r3, #6]
 801:Src/uds_diag.c **** 	pos_Response.SUB_FUNC = -1;
 1221              		.loc 1 801 2 is_stmt 1 view .LVU386
 801:Src/uds_diag.c **** 	pos_Response.SUB_FUNC = -1;
 1222              		.loc 1 801 27 is_stmt 0 view .LVU387
 1223 0018 0021     		movs	r1, #0
 1224 001a 83F80712 		strb	r1, [r3, #519]
 802:Src/uds_diag.c **** 
 1225              		.loc 1 802 2 is_stmt 1 view .LVU388
 802:Src/uds_diag.c **** 
 1226              		.loc 1 802 24 is_stmt 0 view .LVU389
 1227 001e FF21     		movs	r1, #255
 1228 0020 D970     		strb	r1, [r3, #3]
 804:Src/uds_diag.c **** 
 1229              		.loc 1 804 2 is_stmt 1 view .LVU390
 804:Src/uds_diag.c **** 
 1230              		.loc 1 804 22 is_stmt 0 view .LVU391
 1231 0022 62F07F02 		orn	r2, r2, #127
 1232 0026 1A71     		strb	r2, [r3, #4]
 806:Src/uds_diag.c **** 		Oil_Temp_var = received_data[Data_DID] << 8 | received_data[Data_DID+1];
 1233              		.loc 1 806 2 is_stmt 1 view .LVU392
 806:Src/uds_diag.c **** 		Oil_Temp_var = received_data[Data_DID] << 8 | received_data[Data_DID+1];
 1234              		.loc 1 806 18 is_stmt 0 view .LVU393
 1235 0028 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 806:Src/uds_diag.c **** 		Oil_Temp_var = received_data[Data_DID] << 8 | received_data[Data_DID+1];
 1236              		.loc 1 806 4 view .LVU394
 1237 002a F12B     		cmp	r3, #241
 1238 002c 08D0     		beq	.L101
 1239              	.L93:
 809:Src/uds_diag.c **** 		Oil_Pressure_var = received_data[Data_DID] << 24 | received_data[Data_DID+1] << 16 | received_dat
 1240              		.loc 1 809 7 is_stmt 1 view .LVU395
 809:Src/uds_diag.c **** 		Oil_Pressure_var = received_data[Data_DID] << 24 | received_data[Data_DID+1] << 16 | received_dat
 1241              		.loc 1 809 9 is_stmt 0 view .LVU396
 1242 002e F52B     		cmp	r3, #245
 1243 0030 10D0     		beq	.L102
 1244              	.L95:
 812:Src/uds_diag.c **** 		//VIN_number_var = received_data[Data_DID] << 24 | received_data[Data_DID+1] << 16 | received_dat
 1245              		.loc 1 812 7 is_stmt 1 view .LVU397
 812:Src/uds_diag.c **** 		//VIN_number_var = received_data[Data_DID] << 24 | received_data[Data_DID+1] << 16 | received_dat
 1246              		.loc 1 812 9 is_stmt 0 view .LVU398
 1247 0032 F22B     		cmp	r3, #242
 1248 0034 1ED0     		beq	.L103
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 41


 1249              	.L94:
 831:Src/uds_diag.c **** 	if(SupressedPosRes_Server == 1)
 1250              		.loc 1 831 2 is_stmt 1 view .LVU399
 832:Src/uds_diag.c **** 	{
 1251              		.loc 1 832 2 view .LVU400
 832:Src/uds_diag.c **** 	{
 1252              		.loc 1 832 28 is_stmt 0 view .LVU401
 1253 0036 194B     		ldr	r3, .L105+4
 1254 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 832:Src/uds_diag.c **** 	{
 1255              		.loc 1 832 4 view .LVU402
 1256 003a 012B     		cmp	r3, #1
 1257 003c 28D0     		beq	.L104
 1258              	.LVL62:
 1259              	.L92:
 854:Src/uds_diag.c **** 
 1260              		.loc 1 854 1 view .LVU403
 1261 003e 08BD     		pop	{r3, pc}
 1262              	.LVL63:
 1263              	.L101:
 806:Src/uds_diag.c **** 		Oil_Temp_var = received_data[Data_DID] << 8 | received_data[Data_DID+1];
 1264              		.loc 1 806 65 discriminator 1 view .LVU404
 1265 0040 8278     		ldrb	r2, [r0, #2]	@ zero_extendqisi2
 806:Src/uds_diag.c **** 		Oil_Temp_var = received_data[Data_DID] << 8 | received_data[Data_DID+1];
 1266              		.loc 1 806 49 discriminator 1 view .LVU405
 1267 0042 3D2A     		cmp	r2, #61
 1268 0044 F3D1     		bne	.L93
 807:Src/uds_diag.c **** 	}
 1269              		.loc 1 807 3 is_stmt 1 view .LVU406
 807:Src/uds_diag.c **** 	}
 1270              		.loc 1 807 31 is_stmt 0 view .LVU407
 1271 0046 8279     		ldrb	r2, [r0, #6]	@ zero_extendqisi2
 807:Src/uds_diag.c **** 	}
 1272              		.loc 1 807 62 view .LVU408
 1273 0048 C379     		ldrb	r3, [r0, #7]	@ zero_extendqisi2
 807:Src/uds_diag.c **** 	}
 1274              		.loc 1 807 47 view .LVU409
 1275 004a 43EA0223 		orr	r3, r3, r2, lsl #8
 807:Src/uds_diag.c **** 	}
 1276              		.loc 1 807 16 view .LVU410
 1277 004e 144A     		ldr	r2, .L105+8
 1278 0050 1360     		str	r3, [r2]
 1279 0052 F0E7     		b	.L94
 1280              	.L102:
 809:Src/uds_diag.c **** 		Oil_Pressure_var = received_data[Data_DID] << 24 | received_data[Data_DID+1] << 16 | received_dat
 1281              		.loc 1 809 74 discriminator 1 view .LVU411
 1282 0054 8278     		ldrb	r2, [r0, #2]	@ zero_extendqisi2
 809:Src/uds_diag.c **** 		Oil_Pressure_var = received_data[Data_DID] << 24 | received_data[Data_DID+1] << 16 | received_dat
 1283              		.loc 1 809 58 discriminator 1 view .LVU412
 1284 0056 3D2A     		cmp	r2, #61
 1285 0058 EBD1     		bne	.L95
 810:Src/uds_diag.c **** 	}
 1286              		.loc 1 810 3 is_stmt 1 view .LVU413
 810:Src/uds_diag.c **** 	}
 1287              		.loc 1 810 35 is_stmt 0 view .LVU414
 1288 005a 8279     		ldrb	r2, [r0, #6]	@ zero_extendqisi2
 810:Src/uds_diag.c **** 	}
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 42


 1289              		.loc 1 810 67 view .LVU415
 1290 005c C379     		ldrb	r3, [r0, #7]	@ zero_extendqisi2
 810:Src/uds_diag.c **** 	}
 1291              		.loc 1 810 80 view .LVU416
 1292 005e 1B04     		lsls	r3, r3, #16
 810:Src/uds_diag.c **** 	}
 1293              		.loc 1 810 52 view .LVU417
 1294 0060 43EA0263 		orr	r3, r3, r2, lsl #24
 810:Src/uds_diag.c **** 	}
 1295              		.loc 1 810 101 view .LVU418
 1296 0064 027A     		ldrb	r2, [r0, #8]	@ zero_extendqisi2
 810:Src/uds_diag.c **** 	}
 1297              		.loc 1 810 86 view .LVU419
 1298 0066 43EA0223 		orr	r3, r3, r2, lsl #8
 810:Src/uds_diag.c **** 	}
 1299              		.loc 1 810 134 view .LVU420
 1300 006a 427A     		ldrb	r2, [r0, #9]	@ zero_extendqisi2
 810:Src/uds_diag.c **** 	}
 1301              		.loc 1 810 119 view .LVU421
 1302 006c 1343     		orrs	r3, r3, r2
 810:Src/uds_diag.c **** 	}
 1303              		.loc 1 810 20 view .LVU422
 1304 006e 0D4A     		ldr	r2, .L105+12
 1305 0070 1360     		str	r3, [r2]
 1306 0072 E0E7     		b	.L94
 1307              	.L103:
 812:Src/uds_diag.c **** 		//VIN_number_var = received_data[Data_DID] << 24 | received_data[Data_DID+1] << 16 | received_dat
 1308              		.loc 1 812 72 discriminator 1 view .LVU423
 1309 0074 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 812:Src/uds_diag.c **** 		//VIN_number_var = received_data[Data_DID] << 24 | received_data[Data_DID+1] << 16 | received_dat
 1310              		.loc 1 812 56 discriminator 1 view .LVU424
 1311 0076 3D2B     		cmp	r3, #61
 1312 0078 DDD1     		bne	.L94
 1313              	.LBB3:
 815:Src/uds_diag.c **** 		{
 1314              		.loc 1 815 16 view .LVU425
 1315 007a 0023     		movs	r3, #0
 1316 007c 05E0     		b	.L96
 1317              	.LVL64:
 1318              	.L97:
 817:Src/uds_diag.c **** 			//VIN_number_var |= received_data[(Data_DID + (16-i))] << (i*8);
 1319              		.loc 1 817 4 is_stmt 1 discriminator 3 view .LVU426
 817:Src/uds_diag.c **** 			//VIN_number_var |= received_data[(Data_DID + (16-i))] << (i*8);
 1320              		.loc 1 817 47 is_stmt 0 discriminator 3 view .LVU427
 1321 007e 9A1D     		adds	r2, r3, #6
 817:Src/uds_diag.c **** 			//VIN_number_var |= received_data[(Data_DID + (16-i))] << (i*8);
 1322              		.loc 1 817 37 discriminator 3 view .LVU428
 1323 0080 815C     		ldrb	r1, [r0, r2]	@ zero_extendqisi2
 817:Src/uds_diag.c **** 			//VIN_number_var |= received_data[(Data_DID + (16-i))] << (i*8);
 1324              		.loc 1 817 22 discriminator 3 view .LVU429
 1325 0082 094A     		ldr	r2, .L105+16
 1326 0084 D154     		strb	r1, [r2, r3]
 815:Src/uds_diag.c **** 		{
 1327              		.loc 1 815 28 is_stmt 1 discriminator 3 view .LVU430
 815:Src/uds_diag.c **** 		{
 1328              		.loc 1 815 29 is_stmt 0 discriminator 3 view .LVU431
 1329 0086 0133     		adds	r3, r3, #1
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 43


 1330              	.LVL65:
 815:Src/uds_diag.c **** 		{
 1331              		.loc 1 815 29 discriminator 3 view .LVU432
 1332 0088 DBB2     		uxtb	r3, r3
 1333              	.LVL66:
 1334              	.L96:
 815:Src/uds_diag.c **** 		{
 1335              		.loc 1 815 21 is_stmt 1 discriminator 1 view .LVU433
 815:Src/uds_diag.c **** 		{
 1336              		.loc 1 815 3 is_stmt 0 discriminator 1 view .LVU434
 1337 008a 102B     		cmp	r3, #16
 1338 008c F7D9     		bls	.L97
 1339 008e D2E7     		b	.L94
 1340              	.LVL67:
 1341              	.L104:
 815:Src/uds_diag.c **** 		{
 1342              		.loc 1 815 3 discriminator 1 view .LVU435
 1343              	.LBE3:
 834:Src/uds_diag.c **** 		return;
 1344              		.loc 1 834 3 is_stmt 1 view .LVU436
 1345 0090 0148     		ldr	r0, .L105
 1346              	.LVL68:
 834:Src/uds_diag.c **** 		return;
 1347              		.loc 1 834 3 is_stmt 0 view .LVU437
 1348 0092 FFF7FEFF 		bl	UDS_Send_Pos_Res
 1349              	.LVL69:
 835:Src/uds_diag.c **** 	}
 1350              		.loc 1 835 3 is_stmt 1 view .LVU438
 1351 0096 D2E7     		b	.L92
 1352              	.L106:
 1353              		.align	2
 1354              	.L105:
 1355 0098 00000000 		.word	.LANCHOR9
 1356 009c 00000000 		.word	.LANCHOR13
 1357 00a0 00000000 		.word	.LANCHOR10
 1358 00a4 00000000 		.word	.LANCHOR11
 1359 00a8 00000000 		.word	.LANCHOR12
 1360              		.cfi_endproc
 1361              	.LFE82:
 1363              		.section	.text.UDS_Send_Neg_Res,"ax",%progbits
 1364              		.align	1
 1365              		.global	UDS_Send_Neg_Res
 1366              		.syntax unified
 1367              		.thumb
 1368              		.thumb_func
 1370              	UDS_Send_Neg_Res:
 1371              	.LVL70:
 1372              	.LFB84:
 892:Src/uds_diag.c **** 
 893:Src/uds_diag.c **** void UDS_Send_Neg_Res(uint8_t SID, uint8_t NRC)
 894:Src/uds_diag.c **** {
 1373              		.loc 1 894 1 view -0
 1374              		.cfi_startproc
 1375              		@ args = 0, pretend = 0, frame = 0
 1376              		@ frame_needed = 0, uses_anonymous_args = 0
 1377              		.loc 1 894 1 is_stmt 0 view .LVU440
 1378 0000 08B5     		push	{r3, lr}
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 44


 1379              	.LCFI11:
 1380              		.cfi_def_cfa_offset 8
 1381              		.cfi_offset 3, -8
 1382              		.cfi_offset 14, -4
 895:Src/uds_diag.c **** 	msg.Data[PCI] = 4;
 1383              		.loc 1 895 2 is_stmt 1 view .LVU441
 1384              		.loc 1 895 16 is_stmt 0 view .LVU442
 1385 0002 084B     		ldr	r3, .L109
 1386 0004 0422     		movs	r2, #4
 1387 0006 1A70     		strb	r2, [r3]
 896:Src/uds_diag.c **** 	msg.Data[Neg_Res_INDEX] = 0x7F;
 1388              		.loc 1 896 2 is_stmt 1 view .LVU443
 1389              		.loc 1 896 26 is_stmt 0 view .LVU444
 1390 0008 4FF07F0C 		mov	ip, #127
 1391 000c 83F801C0 		strb	ip, [r3, #1]
 897:Src/uds_diag.c **** 	msg.Data[SID_NR_INDEX] = SID;
 1392              		.loc 1 897 2 is_stmt 1 view .LVU445
 1393              		.loc 1 897 25 is_stmt 0 view .LVU446
 1394 0010 9870     		strb	r0, [r3, #2]
 898:Src/uds_diag.c **** 	msg.Data[NRC_INDEX] = NRC;
 1395              		.loc 1 898 2 is_stmt 1 view .LVU447
 1396              		.loc 1 898 22 is_stmt 0 view .LVU448
 1397 0012 D970     		strb	r1, [r3, #3]
 899:Src/uds_diag.c **** 	msg.Length = 4;
 1398              		.loc 1 899 2 is_stmt 1 view .LVU449
 1399              		.loc 1 899 13 is_stmt 0 view .LVU450
 1400 0014 C3F80022 		str	r2, [r3, #512]
 900:Src/uds_diag.c **** 
 901:Src/uds_diag.c **** 	CanTp_Transmit(8, &msg);
 1401              		.loc 1 901 2 is_stmt 1 view .LVU451
 1402 0018 1946     		mov	r1, r3
 1403              	.LVL71:
 1404              		.loc 1 901 2 is_stmt 0 view .LVU452
 1405 001a 0820     		movs	r0, #8
 1406              	.LVL72:
 1407              		.loc 1 901 2 view .LVU453
 1408 001c FFF7FEFF 		bl	CanTp_Transmit
 1409              	.LVL73:
 902:Src/uds_diag.c **** }
 1410              		.loc 1 902 1 view .LVU454
 1411 0020 08BD     		pop	{r3, pc}
 1412              	.L110:
 1413 0022 00BF     		.align	2
 1414              	.L109:
 1415 0024 00000000 		.word	.LANCHOR8
 1416              		.cfi_endproc
 1417              	.LFE84:
 1419              		.section	.text.UDS_Tester_Presenter_Server,"ax",%progbits
 1420              		.align	1
 1421              		.global	UDS_Tester_Presenter_Server
 1422              		.syntax unified
 1423              		.thumb
 1424              		.thumb_func
 1426              	UDS_Tester_Presenter_Server:
 1427              	.LFB85:
 903:Src/uds_diag.c **** 
 904:Src/uds_diag.c **** 
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 45


 905:Src/uds_diag.c **** 
 906:Src/uds_diag.c **** 
 907:Src/uds_diag.c **** 
 908:Src/uds_diag.c **** void UDS_Tester_Presenter_Server(void)//Khaled Waleed
 909:Src/uds_diag.c **** {
 1428              		.loc 1 909 1 is_stmt 1 view -0
 1429              		.cfi_startproc
 1430              		@ args = 0, pretend = 0, frame = 0
 1431              		@ frame_needed = 0, uses_anonymous_args = 0
 1432 0000 08B5     		push	{r3, lr}
 1433              	.LCFI12:
 1434              		.cfi_def_cfa_offset 8
 1435              		.cfi_offset 3, -8
 1436              		.cfi_offset 14, -4
 910:Src/uds_diag.c **** 	//globally in server:  there is a timer >= tout { reset timer + return to default (global ssesion 
 911:Src/uds_diag.c **** 	//	reset_timer();
 912:Src/uds_diag.c **** 	pos_Response.SID = Tester_Representer_Service ;
 1437              		.loc 1 912 2 view .LVU456
 1438              		.loc 1 912 19 is_stmt 0 view .LVU457
 1439 0002 084B     		ldr	r3, .L115
 1440 0004 3E22     		movs	r2, #62
 1441 0006 9A70     		strb	r2, [r3, #2]
 913:Src/uds_diag.c **** 	pos_Response.DID_Length=0;
 1442              		.loc 1 913 2 is_stmt 1 view .LVU458
 1443              		.loc 1 913 25 is_stmt 0 view .LVU459
 1444 0008 0022     		movs	r2, #0
 1445 000a 9A71     		strb	r2, [r3, #6]
 914:Src/uds_diag.c **** 	pos_Response.Data_Length = 0;
 1446              		.loc 1 914 2 is_stmt 1 view .LVU460
 1447              		.loc 1 914 27 is_stmt 0 view .LVU461
 1448 000c 83F80722 		strb	r2, [r3, #519]
 915:Src/uds_diag.c **** 	pos_Response.SUB_FUNC = 0x00;
 1449              		.loc 1 915 2 is_stmt 1 view .LVU462
 1450              		.loc 1 915 24 is_stmt 0 view .LVU463
 1451 0010 DA70     		strb	r2, [r3, #3]
 916:Src/uds_diag.c **** 
 917:Src/uds_diag.c **** 	if(SupressedPosRes_Server == 1 )
 1452              		.loc 1 917 2 is_stmt 1 view .LVU464
 1453              		.loc 1 917 28 is_stmt 0 view .LVU465
 1454 0012 054B     		ldr	r3, .L115+4
 1455 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1456              		.loc 1 917 4 view .LVU466
 1457 0016 012B     		cmp	r3, #1
 1458 0018 00D0     		beq	.L114
 1459              	.L111:
 918:Src/uds_diag.c **** 	{
 919:Src/uds_diag.c **** 		UDS_Send_Pos_Res(&pos_Response);
 920:Src/uds_diag.c **** 	}
 921:Src/uds_diag.c **** 
 922:Src/uds_diag.c **** }
 1460              		.loc 1 922 1 view .LVU467
 1461 001a 08BD     		pop	{r3, pc}
 1462              	.L114:
 919:Src/uds_diag.c **** 	}
 1463              		.loc 1 919 3 is_stmt 1 view .LVU468
 1464 001c 0148     		ldr	r0, .L115
 1465 001e FFF7FEFF 		bl	UDS_Send_Pos_Res
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 46


 1466              	.LVL74:
 1467              		.loc 1 922 1 is_stmt 0 view .LVU469
 1468 0022 FAE7     		b	.L111
 1469              	.L116:
 1470              		.align	2
 1471              	.L115:
 1472 0024 00000000 		.word	.LANCHOR9
 1473 0028 00000000 		.word	.LANCHOR13
 1474              		.cfi_endproc
 1475              	.LFE85:
 1477              		.section	.text.reset_timer,"ax",%progbits
 1478              		.align	1
 1479              		.global	reset_timer
 1480              		.syntax unified
 1481              		.thumb
 1482              		.thumb_func
 1484              	reset_timer:
 1485              	.LFB86:
 923:Src/uds_diag.c **** 
 924:Src/uds_diag.c **** void reset_timer(void)
 925:Src/uds_diag.c **** {
 1486              		.loc 1 925 1 is_stmt 1 view -0
 1487              		.cfi_startproc
 1488              		@ args = 0, pretend = 0, frame = 0
 1489              		@ frame_needed = 0, uses_anonymous_args = 0
 1490              		@ link register save eliminated.
 926:Src/uds_diag.c **** 	// HAL_TIM_Base_Stop_IT(&htim6); // Stop Timer6
 927:Src/uds_diag.c **** 	// TIM6->CNT = 0; // Reset Timer6 counter to 0
 928:Src/uds_diag.c **** 	//    HAL_TIM_Base_Start_IT(&htim6); // Start Timer6 again
 929:Src/uds_diag.c **** }
 1491              		.loc 1 929 1 view .LVU471
 1492 0000 7047     		bx	lr
 1493              		.cfi_endproc
 1494              	.LFE86:
 1496              		.section	.text.stop_timer,"ax",%progbits
 1497              		.align	1
 1498              		.global	stop_timer
 1499              		.syntax unified
 1500              		.thumb
 1501              		.thumb_func
 1503              	stop_timer:
 1504              	.LVL75:
 1505              	.LFB87:
 930:Src/uds_diag.c **** 
 931:Src/uds_diag.c **** void stop_timer(TIM_HandleTypeDef* htim){
 1506              		.loc 1 931 41 view -0
 1507              		.cfi_startproc
 1508              		@ args = 0, pretend = 0, frame = 0
 1509              		@ frame_needed = 0, uses_anonymous_args = 0
 1510              		.loc 1 931 41 is_stmt 0 view .LVU473
 1511 0000 08B5     		push	{r3, lr}
 1512              	.LCFI13:
 1513              		.cfi_def_cfa_offset 8
 1514              		.cfi_offset 3, -8
 1515              		.cfi_offset 14, -4
 932:Src/uds_diag.c **** 	HAL_TIM_Base_Stop_IT(htim); // Stop Timer
 1516              		.loc 1 932 2 is_stmt 1 view .LVU474
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 47


 1517 0002 FFF7FEFF 		bl	HAL_TIM_Base_Stop_IT
 1518              	.LVL76:
 933:Src/uds_diag.c **** }
 1519              		.loc 1 933 1 is_stmt 0 view .LVU475
 1520 0006 08BD     		pop	{r3, pc}
 1521              		.cfi_endproc
 1522              	.LFE87:
 1524              		.section	.text.start_timer,"ax",%progbits
 1525              		.align	1
 1526              		.global	start_timer
 1527              		.syntax unified
 1528              		.thumb
 1529              		.thumb_func
 1531              	start_timer:
 1532              	.LFB88:
 934:Src/uds_diag.c **** 
 935:Src/uds_diag.c **** void start_timer(void)
 936:Src/uds_diag.c **** {
 1533              		.loc 1 936 1 is_stmt 1 view -0
 1534              		.cfi_startproc
 1535              		@ args = 0, pretend = 0, frame = 0
 1536              		@ frame_needed = 0, uses_anonymous_args = 0
 1537              		@ link register save eliminated.
 937:Src/uds_diag.c **** 	// //	HAL_TIM_Base_Start(&htim6);
 938:Src/uds_diag.c **** 	// HAL_TIM_Base_Start_IT(&htim6);
 939:Src/uds_diag.c **** }
 1538              		.loc 1 939 1 view .LVU477
 1539 0000 7047     		bx	lr
 1540              		.cfi_endproc
 1541              	.LFE88:
 1543              		.section	.text.UDS_Control_Session_Server,"ax",%progbits
 1544              		.align	1
 1545              		.global	UDS_Control_Session_Server
 1546              		.syntax unified
 1547              		.thumb
 1548              		.thumb_func
 1550              	UDS_Control_Session_Server:
 1551              	.LVL77:
 1552              	.LFB89:
 940:Src/uds_diag.c **** 
 941:Src/uds_diag.c **** void UDS_Control_Session_Server(uint8_t *Received)
 942:Src/uds_diag.c **** {
 1553              		.loc 1 942 1 view -0
 1554              		.cfi_startproc
 1555              		@ args = 0, pretend = 0, frame = 0
 1556              		@ frame_needed = 0, uses_anonymous_args = 0
 1557              		.loc 1 942 1 is_stmt 0 view .LVU479
 1558 0000 08B5     		push	{r3, lr}
 1559              	.LCFI14:
 1560              		.cfi_def_cfa_offset 8
 1561              		.cfi_offset 3, -8
 1562              		.cfi_offset 14, -4
 943:Src/uds_diag.c **** 
 944:Src/uds_diag.c **** 
 945:Src/uds_diag.c **** 
 946:Src/uds_diag.c **** 	if(Received[Sub_F] == DefaultSession || Received[Sub_F] == ExtendedSession)
 1563              		.loc 1 946 2 is_stmt 1 view .LVU480
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 48


 1564              		.loc 1 946 13 is_stmt 0 view .LVU481
 1565 0002 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 1566              		.loc 1 946 4 view .LVU482
 1567 0004 012B     		cmp	r3, #1
 1568 0006 01D0     		beq	.L122
 1569              		.loc 1 946 39 discriminator 1 view .LVU483
 1570 0008 032B     		cmp	r3, #3
 1571 000a 12D1     		bne	.L123
 1572              	.L122:
 947:Src/uds_diag.c **** 	{
 948:Src/uds_diag.c **** 		global_session = Received[Sub_F];
 1573              		.loc 1 948 3 is_stmt 1 view .LVU484
 1574              		.loc 1 948 18 is_stmt 0 view .LVU485
 1575 000c 0B4A     		ldr	r2, .L127
 1576 000e 1370     		strb	r3, [r2]
 949:Src/uds_diag.c **** 		Control.SID = Received[SID];
 1577              		.loc 1 949 3 is_stmt 1 view .LVU486
 1578              		.loc 1 949 25 is_stmt 0 view .LVU487
 1579 0010 0178     		ldrb	r1, [r0]	@ zero_extendqisi2
 1580              		.loc 1 949 15 view .LVU488
 1581 0012 0B4A     		ldr	r2, .L127+4
 1582 0014 9170     		strb	r1, [r2, #2]
 950:Src/uds_diag.c **** 		Control.SUB_FUNC = Received[Sub_F];
 1583              		.loc 1 950 3 is_stmt 1 view .LVU489
 1584              		.loc 1 950 20 is_stmt 0 view .LVU490
 1585 0016 D370     		strb	r3, [r2, #3]
 951:Src/uds_diag.c **** 		Control.DID_Length = 0;
 1586              		.loc 1 951 3 is_stmt 1 view .LVU491
 1587              		.loc 1 951 22 is_stmt 0 view .LVU492
 1588 0018 0023     		movs	r3, #0
 1589 001a 9371     		strb	r3, [r2, #6]
 952:Src/uds_diag.c **** 		Control.Data_Length = 0;
 1590              		.loc 1 952 3 is_stmt 1 view .LVU493
 1591              		.loc 1 952 23 is_stmt 0 view .LVU494
 1592 001c 82F80732 		strb	r3, [r2, #519]
 953:Src/uds_diag.c **** 
 954:Src/uds_diag.c **** 
 955:Src/uds_diag.c **** 		if(Received[Sub_F] == ExtendedSession){
 1593              		.loc 1 955 3 is_stmt 1 view .LVU495
 956:Src/uds_diag.c **** 			reset_timer();
 957:Src/uds_diag.c **** 			start_timer();
 958:Src/uds_diag.c **** 		}
 959:Src/uds_diag.c **** 		if(SupressedPosRes_Server == 1)
 1594              		.loc 1 959 3 view .LVU496
 1595              		.loc 1 959 29 is_stmt 0 view .LVU497
 1596 0020 084B     		ldr	r3, .L127+8
 1597 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1598              		.loc 1 959 5 view .LVU498
 1599 0024 012B     		cmp	r3, #1
 1600 0026 00D0     		beq	.L126
 1601              	.LVL78:
 1602              	.L121:
 960:Src/uds_diag.c **** 		{
 961:Src/uds_diag.c **** 			UDS_Send_Pos_Res(&Control);
 962:Src/uds_diag.c **** 		}
 963:Src/uds_diag.c **** 
 964:Src/uds_diag.c **** 	}
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 49


 965:Src/uds_diag.c **** 	else
 966:Src/uds_diag.c **** 	{
 967:Src/uds_diag.c **** 		UDS_Send_Neg_Res(Received[SID], subFunctionNotSupported);
 968:Src/uds_diag.c **** 	}
 969:Src/uds_diag.c **** }
 1603              		.loc 1 969 1 view .LVU499
 1604 0028 08BD     		pop	{r3, pc}
 1605              	.LVL79:
 1606              	.L126:
 961:Src/uds_diag.c **** 		}
 1607              		.loc 1 961 4 is_stmt 1 view .LVU500
 1608 002a 1046     		mov	r0, r2
 1609              	.LVL80:
 961:Src/uds_diag.c **** 		}
 1610              		.loc 1 961 4 is_stmt 0 view .LVU501
 1611 002c FFF7FEFF 		bl	UDS_Send_Pos_Res
 1612              	.LVL81:
 1613 0030 FAE7     		b	.L121
 1614              	.LVL82:
 1615              	.L123:
 967:Src/uds_diag.c **** 	}
 1616              		.loc 1 967 3 is_stmt 1 view .LVU502
 1617 0032 1221     		movs	r1, #18
 1618 0034 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1619              	.LVL83:
 967:Src/uds_diag.c **** 	}
 1620              		.loc 1 967 3 is_stmt 0 view .LVU503
 1621 0036 FFF7FEFF 		bl	UDS_Send_Neg_Res
 1622              	.LVL84:
 1623              		.loc 1 969 1 view .LVU504
 1624 003a F5E7     		b	.L121
 1625              	.L128:
 1626              		.align	2
 1627              	.L127:
 1628 003c 00000000 		.word	.LANCHOR14
 1629 0040 00000000 		.word	.LANCHOR15
 1630 0044 00000000 		.word	.LANCHOR13
 1631              		.cfi_endproc
 1632              	.LFE89:
 1634              		.section	.text.Sec_u32GetSeed,"ax",%progbits
 1635              		.align	1
 1636              		.global	Sec_u32GetSeed
 1637              		.syntax unified
 1638              		.thumb
 1639              		.thumb_func
 1641              	Sec_u32GetSeed:
 1642              	.LFB90:
 970:Src/uds_diag.c **** 
 971:Src/uds_diag.c **** void Sec_u32GetSeed (void)
 972:Src/uds_diag.c **** {
 1643              		.loc 1 972 1 is_stmt 1 view -0
 1644              		.cfi_startproc
 1645              		@ args = 0, pretend = 0, frame = 0
 1646              		@ frame_needed = 0, uses_anonymous_args = 0
 1647 0000 08B5     		push	{r3, lr}
 1648              	.LCFI15:
 1649              		.cfi_def_cfa_offset 8
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 50


 1650              		.cfi_offset 3, -8
 1651              		.cfi_offset 14, -4
 973:Src/uds_diag.c **** 	Sec_u32SeedValue = HAL_GetTick();
 1652              		.loc 1 973 2 view .LVU506
 1653              		.loc 1 973 21 is_stmt 0 view .LVU507
 1654 0002 FFF7FEFF 		bl	HAL_GetTick
 1655              	.LVL85:
 1656              		.loc 1 973 19 view .LVU508
 1657 0006 014B     		ldr	r3, .L131
 1658 0008 1860     		str	r0, [r3]
 974:Src/uds_diag.c **** 	//	printf("%d",Sec_u32SeedValue) ;
 975:Src/uds_diag.c **** }
 1659              		.loc 1 975 1 view .LVU509
 1660 000a 08BD     		pop	{r3, pc}
 1661              	.L132:
 1662              		.align	2
 1663              	.L131:
 1664 000c 00000000 		.word	.LANCHOR16
 1665              		.cfi_endproc
 1666              	.LFE90:
 1668              		.section	.text.Sec_u32GetAlgorithm,"ax",%progbits
 1669              		.align	1
 1670              		.global	Sec_u32GetAlgorithm
 1671              		.syntax unified
 1672              		.thumb
 1673              		.thumb_func
 1675              	Sec_u32GetAlgorithm:
 1676              	.LFB91:
 976:Src/uds_diag.c **** 
 977:Src/uds_diag.c **** uint32_t Sec_u32GetAlgorithm(void)
 978:Src/uds_diag.c **** {
 1677              		.loc 1 978 1 is_stmt 1 view -0
 1678              		.cfi_startproc
 1679              		@ args = 0, pretend = 0, frame = 0
 1680              		@ frame_needed = 0, uses_anonymous_args = 0
 1681              		@ link register save eliminated.
 979:Src/uds_diag.c **** 	return 5 ;
 1682              		.loc 1 979 2 view .LVU511
 980:Src/uds_diag.c **** }
 1683              		.loc 1 980 1 is_stmt 0 view .LVU512
 1684 0000 0520     		movs	r0, #5
 1685 0002 7047     		bx	lr
 1686              		.cfi_endproc
 1687              	.LFE91:
 1689              		.section	.text.Sec_u32GetKey,"ax",%progbits
 1690              		.align	1
 1691              		.global	Sec_u32GetKey
 1692              		.syntax unified
 1693              		.thumb
 1694              		.thumb_func
 1696              	Sec_u32GetKey:
 1697              	.LFB92:
 981:Src/uds_diag.c **** 
 982:Src/uds_diag.c **** uint32_t Sec_u32GetKey (void)
 983:Src/uds_diag.c **** {
 1698              		.loc 1 983 1 is_stmt 1 view -0
 1699              		.cfi_startproc
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 51


 1700              		@ args = 0, pretend = 0, frame = 0
 1701              		@ frame_needed = 0, uses_anonymous_args = 0
 1702 0000 08B5     		push	{r3, lr}
 1703              	.LCFI16:
 1704              		.cfi_def_cfa_offset 8
 1705              		.cfi_offset 3, -8
 1706              		.cfi_offset 14, -4
 984:Src/uds_diag.c **** 	uint32_t Local_u32KeyValue = 0 ;
 1707              		.loc 1 984 2 view .LVU514
 1708              	.LVL86:
 985:Src/uds_diag.c **** 	Local_u32KeyValue = Sec_u32SeedValue + Sec_u32GetAlgorithm() ;
 1709              		.loc 1 985 2 view .LVU515
 1710              		.loc 1 985 41 is_stmt 0 view .LVU516
 1711 0002 FFF7FEFF 		bl	Sec_u32GetAlgorithm
 1712              	.LVL87:
 1713              		.loc 1 985 39 view .LVU517
 1714 0006 024B     		ldr	r3, .L136
 1715 0008 1B68     		ldr	r3, [r3]
 1716              	.LVL88:
 986:Src/uds_diag.c **** 	//	Local_u32KeyValue = 0x01020304 + Sec_u32GetAlgorithm() ;
 987:Src/uds_diag.c **** 	return Local_u32KeyValue;
 1717              		.loc 1 987 2 is_stmt 1 view .LVU518
 988:Src/uds_diag.c **** }
 1718              		.loc 1 988 1 is_stmt 0 view .LVU519
 1719 000a 1844     		add	r0, r0, r3
 1720              	.LVL89:
 1721              		.loc 1 988 1 view .LVU520
 1722 000c 08BD     		pop	{r3, pc}
 1723              	.L137:
 1724 000e 00BF     		.align	2
 1725              	.L136:
 1726 0010 00000000 		.word	.LANCHOR16
 1727              		.cfi_endproc
 1728              	.LFE92:
 1730              		.section	.text.Sec_uint32SecurityAccess,"ax",%progbits
 1731              		.align	1
 1732              		.global	Sec_uint32SecurityAccess
 1733              		.syntax unified
 1734              		.thumb
 1735              		.thumb_func
 1737              	Sec_uint32SecurityAccess:
 1738              	.LVL90:
 1739              	.LFB93:
 989:Src/uds_diag.c **** 
 990:Src/uds_diag.c **** 
 991:Src/uds_diag.c **** uint8_t Sec_uint32SecurityAccess (PduInfoType * Ptr)
 992:Src/uds_diag.c **** {
 1740              		.loc 1 992 1 is_stmt 1 view -0
 1741              		.cfi_startproc
 1742              		@ args = 0, pretend = 0, frame = 0
 1743              		@ frame_needed = 0, uses_anonymous_args = 0
 1744              		.loc 1 992 1 is_stmt 0 view .LVU522
 1745 0000 38B5     		push	{r3, r4, r5, lr}
 1746              	.LCFI17:
 1747              		.cfi_def_cfa_offset 16
 1748              		.cfi_offset 3, -16
 1749              		.cfi_offset 4, -12
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 52


 1750              		.cfi_offset 5, -8
 1751              		.cfi_offset 14, -4
 993:Src/uds_diag.c **** 	uint8_t Local_u8ErrorStates = E_OK ;
 1752              		.loc 1 993 2 is_stmt 1 view .LVU523
 1753              	.LVL91:
 994:Src/uds_diag.c **** 	Ptr->Data[Sub_F] &= 0x7F;
 1754              		.loc 1 994 2 view .LVU524
 1755              		.loc 1 994 19 is_stmt 0 view .LVU525
 1756 0002 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 1757 0004 03F07F03 		and	r3, r3, #127
 1758 0008 0371     		strb	r3, [r0, #4]
 995:Src/uds_diag.c **** 
 996:Src/uds_diag.c **** 	if (Ptr->Data[Sub_F] == Seed)
 1759              		.loc 1 996 2 is_stmt 1 view .LVU526
 1760              		.loc 1 996 5 is_stmt 0 view .LVU527
 1761 000a 012B     		cmp	r3, #1
 1762 000c 0CD0     		beq	.L147
 1763 000e 0446     		mov	r4, r0
 997:Src/uds_diag.c **** 	{
 998:Src/uds_diag.c **** 		/*Generate Seed */
 999:Src/uds_diag.c **** 		Sec_u32GetSeed();
1000:Src/uds_diag.c **** 
1001:Src/uds_diag.c **** 		/*Send Frame with Positive Response */
1002:Src/uds_diag.c **** 		//		Frame_Info Response ;
1003:Src/uds_diag.c **** 		pos_Response.SID 		= Security_Service ;
1004:Src/uds_diag.c **** 		pos_Response.SUB_FUNC	= Seed ;
1005:Src/uds_diag.c **** 		pos_Response.DID_Length=0;
1006:Src/uds_diag.c **** 		pos_Response.Data_Length=4;
1007:Src/uds_diag.c **** 		//		for(int i = 1; i < pos_Response.Data_Length + 1; i++){
1008:Src/uds_diag.c **** 		//			pos_Response.Data[i-1] = i;
1009:Src/uds_diag.c **** 		//		}
1010:Src/uds_diag.c **** 		for(int i =0 ; i< 4; i++)
1011:Src/uds_diag.c **** 		{
1012:Src/uds_diag.c **** 			pos_Response.Data[i]=(uint8_t) (Sec_u32SeedValue>>(24-(i*8))) ;
1013:Src/uds_diag.c **** 		}
1014:Src/uds_diag.c **** 
1015:Src/uds_diag.c **** 
1016:Src/uds_diag.c **** 
1017:Src/uds_diag.c **** 	}
1018:Src/uds_diag.c **** 	else if (Ptr->Data[Sub_F] == Key)
 1764              		.loc 1 1018 7 is_stmt 1 view .LVU528
 1765              		.loc 1 1018 10 is_stmt 0 view .LVU529
 1766 0010 022B     		cmp	r3, #2
 1767 0012 24D0     		beq	.L148
1019:Src/uds_diag.c **** 	{
1020:Src/uds_diag.c **** 		uint32_t user_key= Ptr->Data[Data_Sub_Fun]<<24 | Ptr->Data[Data_Sub_Fun+1]<<16 | Ptr->Data[Data_S
1021:Src/uds_diag.c **** 		/*Check if Key sent is correct or Not */
1022:Src/uds_diag.c **** 		if (user_key == Sec_u32GetKey())
1023:Src/uds_diag.c **** 		{
1024:Src/uds_diag.c **** 			/*Change the state of security */
1025:Src/uds_diag.c **** 			Sec_State = Secure ;
1026:Src/uds_diag.c **** 			global_sec_flag = Secure;
1027:Src/uds_diag.c **** 			/*Send Positive Response */
1028:Src/uds_diag.c **** 			pos_Response.SID= Ptr->Data[SID];
1029:Src/uds_diag.c **** 			pos_Response.SUB_FUNC = Key;
1030:Src/uds_diag.c **** 			pos_Response.DID_Length = 0;
1031:Src/uds_diag.c **** 			pos_Response.Data_Length = 0;
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 53


1032:Src/uds_diag.c **** 
1033:Src/uds_diag.c **** 		}
1034:Src/uds_diag.c **** 		else
1035:Src/uds_diag.c **** 		{
1036:Src/uds_diag.c **** 			Sec_State = Un_Secure ;
1037:Src/uds_diag.c **** 			global_sec_flag = Un_Secure;
1038:Src/uds_diag.c **** 			Local_u8ErrorStates = E_NOK ;
1039:Src/uds_diag.c **** 			UDS_Send_Neg_Res(Ptr->Data[SID] , invalidKey) ;
1040:Src/uds_diag.c **** 			return Local_u8ErrorStates;
1041:Src/uds_diag.c **** 		}
1042:Src/uds_diag.c **** 	}
1043:Src/uds_diag.c **** 	else
1044:Src/uds_diag.c **** 	{
1045:Src/uds_diag.c **** 		Local_u8ErrorStates = E_NOK ;
 1768              		.loc 1 1045 3 is_stmt 1 view .LVU530
 1769              	.LVL92:
1046:Src/uds_diag.c **** 		UDS_Send_Neg_Res(Ptr->Data[SID] , subFunctionNotSupported) ;
 1770              		.loc 1 1046 3 view .LVU531
 1771 0014 1221     		movs	r1, #18
 1772 0016 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1773              	.LVL93:
 1774              		.loc 1 1046 3 is_stmt 0 view .LVU532
 1775 0018 FFF7FEFF 		bl	UDS_Send_Neg_Res
 1776              	.LVL94:
1045:Src/uds_diag.c **** 		UDS_Send_Neg_Res(Ptr->Data[SID] , subFunctionNotSupported) ;
 1777              		.loc 1 1045 23 view .LVU533
 1778 001c 0124     		movs	r4, #1
 1779              	.LVL95:
 1780              	.L142:
1047:Src/uds_diag.c **** 	}
1048:Src/uds_diag.c **** 
1049:Src/uds_diag.c **** 
1050:Src/uds_diag.c **** 	UDS_Send_Pos_Res(&pos_Response) ;
 1781              		.loc 1 1050 2 is_stmt 1 view .LVU534
 1782 001e 2448     		ldr	r0, .L149
 1783 0020 FFF7FEFF 		bl	UDS_Send_Pos_Res
 1784              	.LVL96:
1051:Src/uds_diag.c **** 
1052:Src/uds_diag.c **** 	return Local_u8ErrorStates ;
 1785              		.loc 1 1052 2 view .LVU535
 1786              	.L145:
1053:Src/uds_diag.c **** }
 1787              		.loc 1 1053 1 is_stmt 0 view .LVU536
 1788 0024 2046     		mov	r0, r4
 1789 0026 38BD     		pop	{r3, r4, r5, pc}
 1790              	.LVL97:
 1791              	.L147:
 999:Src/uds_diag.c **** 
 1792              		.loc 1 999 3 is_stmt 1 view .LVU537
 1793 0028 FFF7FEFF 		bl	Sec_u32GetSeed
 1794              	.LVL98:
1003:Src/uds_diag.c **** 		pos_Response.SUB_FUNC	= Seed ;
 1795              		.loc 1 1003 3 view .LVU538
1003:Src/uds_diag.c **** 		pos_Response.SUB_FUNC	= Seed ;
 1796              		.loc 1 1003 22 is_stmt 0 view .LVU539
 1797 002c 204A     		ldr	r2, .L149
 1798 002e 2723     		movs	r3, #39
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 54


 1799 0030 9370     		strb	r3, [r2, #2]
1004:Src/uds_diag.c **** 		pos_Response.DID_Length=0;
 1800              		.loc 1 1004 3 is_stmt 1 view .LVU540
1004:Src/uds_diag.c **** 		pos_Response.DID_Length=0;
 1801              		.loc 1 1004 25 is_stmt 0 view .LVU541
 1802 0032 0123     		movs	r3, #1
 1803 0034 D370     		strb	r3, [r2, #3]
1005:Src/uds_diag.c **** 		pos_Response.Data_Length=4;
 1804              		.loc 1 1005 3 is_stmt 1 view .LVU542
1005:Src/uds_diag.c **** 		pos_Response.Data_Length=4;
 1805              		.loc 1 1005 26 is_stmt 0 view .LVU543
 1806 0036 0023     		movs	r3, #0
 1807 0038 9371     		strb	r3, [r2, #6]
1006:Src/uds_diag.c **** 		//		for(int i = 1; i < pos_Response.Data_Length + 1; i++){
 1808              		.loc 1 1006 3 is_stmt 1 view .LVU544
1006:Src/uds_diag.c **** 		//		for(int i = 1; i < pos_Response.Data_Length + 1; i++){
 1809              		.loc 1 1006 27 is_stmt 0 view .LVU545
 1810 003a 0421     		movs	r1, #4
 1811 003c 82F80712 		strb	r1, [r2, #519]
1010:Src/uds_diag.c **** 		{
 1812              		.loc 1 1010 3 is_stmt 1 view .LVU546
 1813              	.LBB4:
1010:Src/uds_diag.c **** 		{
 1814              		.loc 1 1010 7 view .LVU547
 1815              	.LVL99:
1010:Src/uds_diag.c **** 		{
 1816              		.loc 1 1010 3 is_stmt 0 view .LVU548
 1817 0040 09E0     		b	.L140
 1818              	.LVL100:
 1819              	.L141:
1012:Src/uds_diag.c **** 		}
 1820              		.loc 1 1012 4 is_stmt 1 discriminator 3 view .LVU549
1012:Src/uds_diag.c **** 		}
 1821              		.loc 1 1012 52 is_stmt 0 discriminator 3 view .LVU550
 1822 0042 1C4A     		ldr	r2, .L149+4
 1823 0044 1168     		ldr	r1, [r2]
1012:Src/uds_diag.c **** 		}
 1824              		.loc 1 1012 57 discriminator 3 view .LVU551
 1825 0046 C3F10302 		rsb	r2, r3, #3
 1826 004a D200     		lsls	r2, r2, #3
1012:Src/uds_diag.c **** 		}
 1827              		.loc 1 1012 52 discriminator 3 view .LVU552
 1828 004c D140     		lsrs	r1, r1, r2
1012:Src/uds_diag.c **** 		}
 1829              		.loc 1 1012 24 discriminator 3 view .LVU553
 1830 004e 184A     		ldr	r2, .L149
 1831 0050 1A44     		add	r2, r2, r3
 1832 0052 D171     		strb	r1, [r2, #7]
1010:Src/uds_diag.c **** 		{
 1833              		.loc 1 1010 24 is_stmt 1 discriminator 3 view .LVU554
1010:Src/uds_diag.c **** 		{
 1834              		.loc 1 1010 25 is_stmt 0 discriminator 3 view .LVU555
 1835 0054 0133     		adds	r3, r3, #1
 1836              	.LVL101:
 1837              	.L140:
1010:Src/uds_diag.c **** 		{
 1838              		.loc 1 1010 18 is_stmt 1 discriminator 1 view .LVU556
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 55


1010:Src/uds_diag.c **** 		{
 1839              		.loc 1 1010 3 is_stmt 0 discriminator 1 view .LVU557
 1840 0056 032B     		cmp	r3, #3
 1841 0058 F3DD     		ble	.L141
 1842              	.LBE4:
 993:Src/uds_diag.c **** 	Ptr->Data[Sub_F] &= 0x7F;
 1843              		.loc 1 993 10 view .LVU558
 1844 005a 0024     		movs	r4, #0
 1845 005c DFE7     		b	.L142
 1846              	.LVL102:
 1847              	.L148:
 1848              	.LBB5:
1020:Src/uds_diag.c **** 		/*Check if Key sent is correct or Not */
 1849              		.loc 1 1020 3 is_stmt 1 view .LVU559
1020:Src/uds_diag.c **** 		/*Check if Key sent is correct or Not */
 1850              		.loc 1 1020 31 is_stmt 0 view .LVU560
 1851 005e 4379     		ldrb	r3, [r0, #5]	@ zero_extendqisi2
1020:Src/uds_diag.c **** 		/*Check if Key sent is correct or Not */
 1852              		.loc 1 1020 61 view .LVU561
 1853 0060 8579     		ldrb	r5, [r0, #6]	@ zero_extendqisi2
1020:Src/uds_diag.c **** 		/*Check if Key sent is correct or Not */
 1854              		.loc 1 1020 77 view .LVU562
 1855 0062 2D04     		lsls	r5, r5, #16
1020:Src/uds_diag.c **** 		/*Check if Key sent is correct or Not */
 1856              		.loc 1 1020 50 view .LVU563
 1857 0064 45EA0365 		orr	r5, r5, r3, lsl #24
1020:Src/uds_diag.c **** 		/*Check if Key sent is correct or Not */
 1858              		.loc 1 1020 93 view .LVU564
 1859 0068 C379     		ldrb	r3, [r0, #7]	@ zero_extendqisi2
1020:Src/uds_diag.c **** 		/*Check if Key sent is correct or Not */
 1860              		.loc 1 1020 82 view .LVU565
 1861 006a 45EA0325 		orr	r5, r5, r3, lsl #8
1020:Src/uds_diag.c **** 		/*Check if Key sent is correct or Not */
 1862              		.loc 1 1020 123 view .LVU566
 1863 006e 037A     		ldrb	r3, [r0, #8]	@ zero_extendqisi2
1020:Src/uds_diag.c **** 		/*Check if Key sent is correct or Not */
 1864              		.loc 1 1020 113 view .LVU567
 1865 0070 1D43     		orrs	r5, r5, r3
 1866              	.LVL103:
1022:Src/uds_diag.c **** 		{
 1867              		.loc 1 1022 3 is_stmt 1 view .LVU568
1022:Src/uds_diag.c **** 		{
 1868              		.loc 1 1022 19 is_stmt 0 view .LVU569
 1869 0072 FFF7FEFF 		bl	Sec_u32GetKey
 1870              	.LVL104:
1022:Src/uds_diag.c **** 		{
 1871              		.loc 1 1022 6 view .LVU570
 1872 0076 A842     		cmp	r0, r5
 1873 0078 0ED1     		bne	.L144
1025:Src/uds_diag.c **** 			global_sec_flag = Secure;
 1874              		.loc 1 1025 4 is_stmt 1 view .LVU571
1025:Src/uds_diag.c **** 			global_sec_flag = Secure;
 1875              		.loc 1 1025 14 is_stmt 0 view .LVU572
 1876 007a 0123     		movs	r3, #1
 1877 007c 0E4A     		ldr	r2, .L149+8
 1878 007e 1370     		strb	r3, [r2]
1026:Src/uds_diag.c **** 			/*Send Positive Response */
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 56


 1879              		.loc 1 1026 4 is_stmt 1 view .LVU573
1026:Src/uds_diag.c **** 			/*Send Positive Response */
 1880              		.loc 1 1026 20 is_stmt 0 view .LVU574
 1881 0080 0E4A     		ldr	r2, .L149+12
 1882 0082 1370     		strb	r3, [r2]
1028:Src/uds_diag.c **** 			pos_Response.SUB_FUNC = Key;
 1883              		.loc 1 1028 4 is_stmt 1 view .LVU575
1028:Src/uds_diag.c **** 			pos_Response.SUB_FUNC = Key;
 1884              		.loc 1 1028 31 is_stmt 0 view .LVU576
 1885 0084 2278     		ldrb	r2, [r4]	@ zero_extendqisi2
1028:Src/uds_diag.c **** 			pos_Response.SUB_FUNC = Key;
 1886              		.loc 1 1028 20 view .LVU577
 1887 0086 0A4B     		ldr	r3, .L149
 1888 0088 9A70     		strb	r2, [r3, #2]
1029:Src/uds_diag.c **** 			pos_Response.DID_Length = 0;
 1889              		.loc 1 1029 4 is_stmt 1 view .LVU578
1029:Src/uds_diag.c **** 			pos_Response.DID_Length = 0;
 1890              		.loc 1 1029 26 is_stmt 0 view .LVU579
 1891 008a 0222     		movs	r2, #2
 1892 008c DA70     		strb	r2, [r3, #3]
1030:Src/uds_diag.c **** 			pos_Response.Data_Length = 0;
 1893              		.loc 1 1030 4 is_stmt 1 view .LVU580
1030:Src/uds_diag.c **** 			pos_Response.Data_Length = 0;
 1894              		.loc 1 1030 28 is_stmt 0 view .LVU581
 1895 008e 0024     		movs	r4, #0
 1896              	.LVL105:
1030:Src/uds_diag.c **** 			pos_Response.Data_Length = 0;
 1897              		.loc 1 1030 28 view .LVU582
 1898 0090 9C71     		strb	r4, [r3, #6]
1031:Src/uds_diag.c **** 
 1899              		.loc 1 1031 4 is_stmt 1 view .LVU583
1031:Src/uds_diag.c **** 
 1900              		.loc 1 1031 29 is_stmt 0 view .LVU584
 1901 0092 83F80742 		strb	r4, [r3, #519]
 1902              	.LBE5:
 1903 0096 C2E7     		b	.L142
 1904              	.LVL106:
 1905              	.L144:
 1906              	.LBB6:
1036:Src/uds_diag.c **** 			global_sec_flag = Un_Secure;
 1907              		.loc 1 1036 4 is_stmt 1 view .LVU585
1036:Src/uds_diag.c **** 			global_sec_flag = Un_Secure;
 1908              		.loc 1 1036 14 is_stmt 0 view .LVU586
 1909 0098 0023     		movs	r3, #0
 1910 009a 074A     		ldr	r2, .L149+8
 1911 009c 1370     		strb	r3, [r2]
1037:Src/uds_diag.c **** 			Local_u8ErrorStates = E_NOK ;
 1912              		.loc 1 1037 4 is_stmt 1 view .LVU587
1037:Src/uds_diag.c **** 			Local_u8ErrorStates = E_NOK ;
 1913              		.loc 1 1037 20 is_stmt 0 view .LVU588
 1914 009e 074A     		ldr	r2, .L149+12
 1915 00a0 1370     		strb	r3, [r2]
1038:Src/uds_diag.c **** 			UDS_Send_Neg_Res(Ptr->Data[SID] , invalidKey) ;
 1916              		.loc 1 1038 4 is_stmt 1 view .LVU589
 1917              	.LVL107:
1039:Src/uds_diag.c **** 			return Local_u8ErrorStates;
 1918              		.loc 1 1039 4 view .LVU590
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 57


 1919 00a2 3521     		movs	r1, #53
 1920 00a4 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 1921 00a6 FFF7FEFF 		bl	UDS_Send_Neg_Res
 1922              	.LVL108:
1040:Src/uds_diag.c **** 		}
 1923              		.loc 1 1040 4 view .LVU591
1040:Src/uds_diag.c **** 		}
 1924              		.loc 1 1040 11 is_stmt 0 view .LVU592
 1925 00aa 0124     		movs	r4, #1
 1926              	.LVL109:
1040:Src/uds_diag.c **** 		}
 1927              		.loc 1 1040 11 view .LVU593
 1928 00ac BAE7     		b	.L145
 1929              	.L150:
 1930 00ae 00BF     		.align	2
 1931              	.L149:
 1932 00b0 00000000 		.word	.LANCHOR9
 1933 00b4 00000000 		.word	.LANCHOR16
 1934 00b8 00000000 		.word	.LANCHOR17
 1935 00bc 00000000 		.word	.LANCHOR18
 1936              	.LBE6:
 1937              		.cfi_endproc
 1938              	.LFE93:
 1940              		.section	.text.UDS_Read_Data_Server,"ax",%progbits
 1941              		.align	1
 1942              		.global	UDS_Read_Data_Server
 1943              		.syntax unified
 1944              		.thumb
 1945              		.thumb_func
 1947              	UDS_Read_Data_Server:
 1948              	.LVL110:
 1949              	.LFB94:
1054:Src/uds_diag.c **** 
1055:Src/uds_diag.c **** 
1056:Src/uds_diag.c **** /**************************************************************************************************
1057:Src/uds_diag.c **** void UDS_Read_Data_Server(uint8_t* data)
1058:Src/uds_diag.c **** {
 1950              		.loc 1 1058 1 is_stmt 1 view -0
 1951              		.cfi_startproc
 1952              		@ args = 0, pretend = 0, frame = 0
 1953              		@ frame_needed = 0, uses_anonymous_args = 0
 1954              		.loc 1 1058 1 is_stmt 0 view .LVU595
 1955 0000 08B5     		push	{r3, lr}
 1956              	.LCFI18:
 1957              		.cfi_def_cfa_offset 8
 1958              		.cfi_offset 3, -8
 1959              		.cfi_offset 14, -4
1059:Src/uds_diag.c **** 	pos_Response.SUB_FUNC = -1;
 1960              		.loc 1 1059 2 is_stmt 1 view .LVU596
 1961              		.loc 1 1059 24 is_stmt 0 view .LVU597
 1962 0002 2E4B     		ldr	r3, .L162
 1963 0004 FF22     		movs	r2, #255
 1964 0006 DA70     		strb	r2, [r3, #3]
1060:Src/uds_diag.c **** 
1061:Src/uds_diag.c **** 	//Send +ve responce
1062:Src/uds_diag.c **** 	pos_Response.SID = Read_Service ;
 1965              		.loc 1 1062 2 is_stmt 1 view .LVU598
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 58


 1966              		.loc 1 1062 19 is_stmt 0 view .LVU599
 1967 0008 2222     		movs	r2, #34
 1968 000a 9A70     		strb	r2, [r3, #2]
1063:Src/uds_diag.c **** 	pos_Response.DID_Length=2;
 1969              		.loc 1 1063 2 is_stmt 1 view .LVU600
 1970              		.loc 1 1063 25 is_stmt 0 view .LVU601
 1971 000c 0222     		movs	r2, #2
 1972 000e 9A71     		strb	r2, [r3, #6]
1064:Src/uds_diag.c **** 	data[DID_1] |= 0b10000000; //Original DID
 1973              		.loc 1 1064 2 is_stmt 1 view .LVU602
 1974              		.loc 1 1064 14 is_stmt 0 view .LVU603
 1975 0010 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 1976 0012 43F08003 		orr	r3, r3, #128
 1977 0016 4370     		strb	r3, [r0, #1]
1065:Src/uds_diag.c **** 
1066:Src/uds_diag.c **** 	//if DID --> Oil_Temp
1067:Src/uds_diag.c **** 	if((data[DID_1] == Oil_Temp_First_byte) && (data[DID_2] == Oil_Temp_Second_byte) )
 1978              		.loc 1 1067 2 is_stmt 1 view .LVU604
 1979              		.loc 1 1067 4 is_stmt 0 view .LVU605
 1980 0018 F12B     		cmp	r3, #241
 1981 001a 0BD0     		beq	.L159
 1982              	.L152:
1068:Src/uds_diag.c **** 	{
1069:Src/uds_diag.c **** 
1070:Src/uds_diag.c **** 		pos_Response.DID[0]=Oil_Temp_First_byte;
1071:Src/uds_diag.c **** 		pos_Response.DID[1]=Oil_Temp_Second_byte;
1072:Src/uds_diag.c **** 		pos_Response.Data[0]=Oil_Temp_var>>8;
1073:Src/uds_diag.c **** 		pos_Response.Data[1]=Oil_Temp_var & 0xFF;
1074:Src/uds_diag.c **** 		pos_Response.Data_Length = 2;
1075:Src/uds_diag.c **** 		UDS_Send_Pos_Res(&pos_Response);
1076:Src/uds_diag.c **** 
1077:Src/uds_diag.c **** 
1078:Src/uds_diag.c **** 		//	UDS_Send_Pos_Res(Read_Data_Server);
1079:Src/uds_diag.c **** 	}//if DID --> Oil_Pressure
1080:Src/uds_diag.c **** 	else if((data[DID_1] == Oil_Pressure_First_byte) && (data[DID_2] == Oil_Pressure_Second_byte) )
 1983              		.loc 1 1080 7 is_stmt 1 view .LVU606
 1984              		.loc 1 1080 9 is_stmt 0 view .LVU607
 1985 001c F52B     		cmp	r3, #245
 1986 001e 1CD0     		beq	.L160
 1987              	.L154:
1081:Src/uds_diag.c **** 	{
1082:Src/uds_diag.c **** 		pos_Response.DID[0]=Oil_Pressure_First_byte;
1083:Src/uds_diag.c **** 		pos_Response.DID[1]=Oil_Pressure_Second_byte;
1084:Src/uds_diag.c **** 		pos_Response.Data[0]=Oil_Pressure_var>>24;
1085:Src/uds_diag.c **** 		pos_Response.Data[1]=Oil_Pressure_var>>16;
1086:Src/uds_diag.c **** 		pos_Response.Data[2]=Oil_Pressure_var>>8;
1087:Src/uds_diag.c **** 		pos_Response.Data[3]=Oil_Pressure_var & 0xFF;
1088:Src/uds_diag.c **** 
1089:Src/uds_diag.c **** 		pos_Response.Data_Length = 4;
1090:Src/uds_diag.c **** 		UDS_Send_Pos_Res(&pos_Response);
1091:Src/uds_diag.c **** 
1092:Src/uds_diag.c **** 
1093:Src/uds_diag.c **** 		//For Debugging
1094:Src/uds_diag.c **** 		//HAL_UART_Transmit(&huart2, "\r\nRead Frame Client DID:", 50, HAL_MAX_DELAY);
1095:Src/uds_diag.c **** 		//sendHexArrayAsASCII(Read_Data_Server.DID, Read_Data_Server.DID_Length );
1096:Src/uds_diag.c **** 		//HAL_UART_Transmit(&huart2, "\r\n", 50, HAL_MAX_DELAY);
1097:Src/uds_diag.c **** 	}
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 59


1098:Src/uds_diag.c **** 	else if( (data[DID_1] == VIN_number_First_byte) && (data[DID_2] == VIN_number_Second_byte) ){
 1988              		.loc 1 1098 7 is_stmt 1 view .LVU608
 1989              		.loc 1 1098 9 is_stmt 0 view .LVU609
 1990 0020 F22B     		cmp	r3, #242
 1991 0022 02D1     		bne	.L155
 1992              		.loc 1 1098 58 discriminator 1 view .LVU610
 1993 0024 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 1994              		.loc 1 1098 50 discriminator 1 view .LVU611
 1995 0026 3D2B     		cmp	r3, #61
 1996 0028 30D0     		beq	.L161
 1997              	.L155:
1099:Src/uds_diag.c **** 		pos_Response.DID[0] = VIN_number_First_byte;
1100:Src/uds_diag.c **** 		pos_Response.DID[1] = VIN_number_Second_byte;
1101:Src/uds_diag.c **** 		/*
1102:Src/uds_diag.c **** 		pos_Response.Data[0] = (VIN_number_var>>24) & 0xFF;
1103:Src/uds_diag.c **** 		pos_Response.Data[1] = (VIN_number_var>>16) & 0xFF;
1104:Src/uds_diag.c **** 		pos_Response.Data[2] = (VIN_number_var>>8) & 0xFF;
1105:Src/uds_diag.c **** 		pos_Response.Data[3] = VIN_number_var & 0xFF;
1106:Src/uds_diag.c **** 
1107:Src/uds_diag.c **** 		pos_Response.Data_Length = 4;
1108:Src/uds_diag.c **** 		 */
1109:Src/uds_diag.c **** 		for (uint8_t i=0; i<=16; i++)
1110:Src/uds_diag.c **** 		{
1111:Src/uds_diag.c **** 			pos_Response.Data[/*16-*/i] = VIN_number_var[i] /*(VIN_number_var >> (i*8)) & 0xFF*/ ;
1112:Src/uds_diag.c **** 
1113:Src/uds_diag.c **** 		}
1114:Src/uds_diag.c **** 		pos_Response.Data_Length = 17;
1115:Src/uds_diag.c **** 		UDS_Send_Pos_Res(&pos_Response);
1116:Src/uds_diag.c **** 
1117:Src/uds_diag.c **** 	}
1118:Src/uds_diag.c **** 	else
1119:Src/uds_diag.c **** 	{
1120:Src/uds_diag.c **** 		//otherwize: send -ve responce
1121:Src/uds_diag.c **** 		UDS_Send_Neg_Res(Read_Service, RequestOutofRange);
 1998              		.loc 1 1121 3 is_stmt 1 view .LVU612
 1999 002a 3121     		movs	r1, #49
 2000 002c 2220     		movs	r0, #34
 2001              	.LVL111:
 2002              		.loc 1 1121 3 is_stmt 0 view .LVU613
 2003 002e FFF7FEFF 		bl	UDS_Send_Neg_Res
 2004              	.LVL112:
 2005              	.L151:
1122:Src/uds_diag.c **** 	}
1123:Src/uds_diag.c **** 
1124:Src/uds_diag.c **** 
1125:Src/uds_diag.c **** 
1126:Src/uds_diag.c **** }
 2006              		.loc 1 1126 1 view .LVU614
 2007 0032 08BD     		pop	{r3, pc}
 2008              	.LVL113:
 2009              	.L159:
1067:Src/uds_diag.c **** 	{
 2010              		.loc 1 1067 50 discriminator 1 view .LVU615
 2011 0034 8278     		ldrb	r2, [r0, #2]	@ zero_extendqisi2
1067:Src/uds_diag.c **** 	{
 2012              		.loc 1 1067 42 discriminator 1 view .LVU616
 2013 0036 3D2A     		cmp	r2, #61
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 60


 2014 0038 F0D1     		bne	.L152
1070:Src/uds_diag.c **** 		pos_Response.DID[1]=Oil_Temp_Second_byte;
 2015              		.loc 1 1070 3 is_stmt 1 view .LVU617
1070:Src/uds_diag.c **** 		pos_Response.DID[1]=Oil_Temp_Second_byte;
 2016              		.loc 1 1070 22 is_stmt 0 view .LVU618
 2017 003a 2048     		ldr	r0, .L162
 2018              	.LVL114:
1070:Src/uds_diag.c **** 		pos_Response.DID[1]=Oil_Temp_Second_byte;
 2019              		.loc 1 1070 22 view .LVU619
 2020 003c 0371     		strb	r3, [r0, #4]
1071:Src/uds_diag.c **** 		pos_Response.Data[0]=Oil_Temp_var>>8;
 2021              		.loc 1 1071 3 is_stmt 1 view .LVU620
1071:Src/uds_diag.c **** 		pos_Response.Data[0]=Oil_Temp_var>>8;
 2022              		.loc 1 1071 22 is_stmt 0 view .LVU621
 2023 003e 3D23     		movs	r3, #61
 2024 0040 4371     		strb	r3, [r0, #5]
1072:Src/uds_diag.c **** 		pos_Response.Data[1]=Oil_Temp_var & 0xFF;
 2025              		.loc 1 1072 3 is_stmt 1 view .LVU622
1072:Src/uds_diag.c **** 		pos_Response.Data[1]=Oil_Temp_var & 0xFF;
 2026              		.loc 1 1072 36 is_stmt 0 view .LVU623
 2027 0042 1F4A     		ldr	r2, .L162+4
 2028 0044 1368     		ldr	r3, [r2]
 2029 0046 1B0A     		lsrs	r3, r3, #8
1072:Src/uds_diag.c **** 		pos_Response.Data[1]=Oil_Temp_var & 0xFF;
 2030              		.loc 1 1072 23 view .LVU624
 2031 0048 C371     		strb	r3, [r0, #7]
1073:Src/uds_diag.c **** 		pos_Response.Data_Length = 2;
 2032              		.loc 1 1073 3 is_stmt 1 view .LVU625
1073:Src/uds_diag.c **** 		pos_Response.Data_Length = 2;
 2033              		.loc 1 1073 23 is_stmt 0 view .LVU626
 2034 004a 1368     		ldr	r3, [r2]
 2035 004c 0372     		strb	r3, [r0, #8]
1074:Src/uds_diag.c **** 		UDS_Send_Pos_Res(&pos_Response);
 2036              		.loc 1 1074 3 is_stmt 1 view .LVU627
1074:Src/uds_diag.c **** 		UDS_Send_Pos_Res(&pos_Response);
 2037              		.loc 1 1074 28 is_stmt 0 view .LVU628
 2038 004e 0223     		movs	r3, #2
 2039 0050 80F80732 		strb	r3, [r0, #519]
1075:Src/uds_diag.c **** 
 2040              		.loc 1 1075 3 is_stmt 1 view .LVU629
 2041 0054 FFF7FEFF 		bl	UDS_Send_Pos_Res
 2042              	.LVL115:
 2043 0058 EBE7     		b	.L151
 2044              	.LVL116:
 2045              	.L160:
1080:Src/uds_diag.c **** 	{
 2046              		.loc 1 1080 59 is_stmt 0 discriminator 1 view .LVU630
 2047 005a 8278     		ldrb	r2, [r0, #2]	@ zero_extendqisi2
1080:Src/uds_diag.c **** 	{
 2048              		.loc 1 1080 51 discriminator 1 view .LVU631
 2049 005c 3D2A     		cmp	r2, #61
 2050 005e DFD1     		bne	.L154
1082:Src/uds_diag.c **** 		pos_Response.DID[1]=Oil_Pressure_Second_byte;
 2051              		.loc 1 1082 3 is_stmt 1 view .LVU632
1082:Src/uds_diag.c **** 		pos_Response.DID[1]=Oil_Pressure_Second_byte;
 2052              		.loc 1 1082 22 is_stmt 0 view .LVU633
 2053 0060 1648     		ldr	r0, .L162
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 61


 2054              	.LVL117:
1082:Src/uds_diag.c **** 		pos_Response.DID[1]=Oil_Pressure_Second_byte;
 2055              		.loc 1 1082 22 view .LVU634
 2056 0062 0371     		strb	r3, [r0, #4]
1083:Src/uds_diag.c **** 		pos_Response.Data[0]=Oil_Pressure_var>>24;
 2057              		.loc 1 1083 3 is_stmt 1 view .LVU635
1083:Src/uds_diag.c **** 		pos_Response.Data[0]=Oil_Pressure_var>>24;
 2058              		.loc 1 1083 22 is_stmt 0 view .LVU636
 2059 0064 3D23     		movs	r3, #61
 2060 0066 4371     		strb	r3, [r0, #5]
1084:Src/uds_diag.c **** 		pos_Response.Data[1]=Oil_Pressure_var>>16;
 2061              		.loc 1 1084 3 is_stmt 1 view .LVU637
1084:Src/uds_diag.c **** 		pos_Response.Data[1]=Oil_Pressure_var>>16;
 2062              		.loc 1 1084 40 is_stmt 0 view .LVU638
 2063 0068 164B     		ldr	r3, .L162+8
 2064 006a 1A68     		ldr	r2, [r3]
 2065 006c 120E     		lsrs	r2, r2, #24
1084:Src/uds_diag.c **** 		pos_Response.Data[1]=Oil_Pressure_var>>16;
 2066              		.loc 1 1084 23 view .LVU639
 2067 006e C271     		strb	r2, [r0, #7]
1085:Src/uds_diag.c **** 		pos_Response.Data[2]=Oil_Pressure_var>>8;
 2068              		.loc 1 1085 3 is_stmt 1 view .LVU640
1085:Src/uds_diag.c **** 		pos_Response.Data[2]=Oil_Pressure_var>>8;
 2069              		.loc 1 1085 40 is_stmt 0 view .LVU641
 2070 0070 1A68     		ldr	r2, [r3]
 2071 0072 120C     		lsrs	r2, r2, #16
1085:Src/uds_diag.c **** 		pos_Response.Data[2]=Oil_Pressure_var>>8;
 2072              		.loc 1 1085 23 view .LVU642
 2073 0074 0272     		strb	r2, [r0, #8]
1086:Src/uds_diag.c **** 		pos_Response.Data[3]=Oil_Pressure_var & 0xFF;
 2074              		.loc 1 1086 3 is_stmt 1 view .LVU643
1086:Src/uds_diag.c **** 		pos_Response.Data[3]=Oil_Pressure_var & 0xFF;
 2075              		.loc 1 1086 40 is_stmt 0 view .LVU644
 2076 0076 1A68     		ldr	r2, [r3]
 2077 0078 120A     		lsrs	r2, r2, #8
1086:Src/uds_diag.c **** 		pos_Response.Data[3]=Oil_Pressure_var & 0xFF;
 2078              		.loc 1 1086 23 view .LVU645
 2079 007a 4272     		strb	r2, [r0, #9]
1087:Src/uds_diag.c **** 
 2080              		.loc 1 1087 3 is_stmt 1 view .LVU646
1087:Src/uds_diag.c **** 
 2081              		.loc 1 1087 23 is_stmt 0 view .LVU647
 2082 007c 1B68     		ldr	r3, [r3]
 2083 007e 8372     		strb	r3, [r0, #10]
1089:Src/uds_diag.c **** 		UDS_Send_Pos_Res(&pos_Response);
 2084              		.loc 1 1089 3 is_stmt 1 view .LVU648
1089:Src/uds_diag.c **** 		UDS_Send_Pos_Res(&pos_Response);
 2085              		.loc 1 1089 28 is_stmt 0 view .LVU649
 2086 0080 0423     		movs	r3, #4
 2087 0082 80F80732 		strb	r3, [r0, #519]
1090:Src/uds_diag.c **** 
 2088              		.loc 1 1090 3 is_stmt 1 view .LVU650
 2089 0086 FFF7FEFF 		bl	UDS_Send_Pos_Res
 2090              	.LVL118:
 2091 008a D2E7     		b	.L151
 2092              	.LVL119:
 2093              	.L161:
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 62


1099:Src/uds_diag.c **** 		pos_Response.DID[1] = VIN_number_Second_byte;
 2094              		.loc 1 1099 3 view .LVU651
1099:Src/uds_diag.c **** 		pos_Response.DID[1] = VIN_number_Second_byte;
 2095              		.loc 1 1099 23 is_stmt 0 view .LVU652
 2096 008c 0B4B     		ldr	r3, .L162
 2097 008e F222     		movs	r2, #242
 2098 0090 1A71     		strb	r2, [r3, #4]
1100:Src/uds_diag.c **** 		/*
 2099              		.loc 1 1100 3 is_stmt 1 view .LVU653
1100:Src/uds_diag.c **** 		/*
 2100              		.loc 1 1100 23 is_stmt 0 view .LVU654
 2101 0092 3D22     		movs	r2, #61
 2102 0094 5A71     		strb	r2, [r3, #5]
1109:Src/uds_diag.c **** 		{
 2103              		.loc 1 1109 3 is_stmt 1 view .LVU655
 2104              	.LBB7:
1109:Src/uds_diag.c **** 		{
 2105              		.loc 1 1109 8 view .LVU656
 2106              	.LVL120:
1109:Src/uds_diag.c **** 		{
 2107              		.loc 1 1109 16 is_stmt 0 view .LVU657
 2108 0096 0023     		movs	r3, #0
1109:Src/uds_diag.c **** 		{
 2109              		.loc 1 1109 3 view .LVU658
 2110 0098 06E0     		b	.L156
 2111              	.LVL121:
 2112              	.L157:
1111:Src/uds_diag.c **** 
 2113              		.loc 1 1111 4 is_stmt 1 discriminator 3 view .LVU659
1111:Src/uds_diag.c **** 
 2114              		.loc 1 1111 48 is_stmt 0 discriminator 3 view .LVU660
 2115 009a 0B4A     		ldr	r2, .L162+12
 2116 009c D15C     		ldrb	r1, [r2, r3]	@ zero_extendqisi2
1111:Src/uds_diag.c **** 
 2117              		.loc 1 1111 32 discriminator 3 view .LVU661
 2118 009e 074A     		ldr	r2, .L162
 2119 00a0 1A44     		add	r2, r2, r3
 2120 00a2 D171     		strb	r1, [r2, #7]
1109:Src/uds_diag.c **** 		{
 2121              		.loc 1 1109 28 is_stmt 1 discriminator 3 view .LVU662
1109:Src/uds_diag.c **** 		{
 2122              		.loc 1 1109 29 is_stmt 0 discriminator 3 view .LVU663
 2123 00a4 0133     		adds	r3, r3, #1
 2124              	.LVL122:
1109:Src/uds_diag.c **** 		{
 2125              		.loc 1 1109 29 discriminator 3 view .LVU664
 2126 00a6 DBB2     		uxtb	r3, r3
 2127              	.LVL123:
 2128              	.L156:
1109:Src/uds_diag.c **** 		{
 2129              		.loc 1 1109 21 is_stmt 1 discriminator 1 view .LVU665
1109:Src/uds_diag.c **** 		{
 2130              		.loc 1 1109 3 is_stmt 0 discriminator 1 view .LVU666
 2131 00a8 102B     		cmp	r3, #16
 2132 00aa F6D9     		bls	.L157
 2133              	.LBE7:
1114:Src/uds_diag.c **** 		UDS_Send_Pos_Res(&pos_Response);
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 63


 2134              		.loc 1 1114 3 is_stmt 1 view .LVU667
1114:Src/uds_diag.c **** 		UDS_Send_Pos_Res(&pos_Response);
 2135              		.loc 1 1114 28 is_stmt 0 view .LVU668
 2136 00ac 0348     		ldr	r0, .L162
 2137              	.LVL124:
1114:Src/uds_diag.c **** 		UDS_Send_Pos_Res(&pos_Response);
 2138              		.loc 1 1114 28 view .LVU669
 2139 00ae 1123     		movs	r3, #17
 2140              	.LVL125:
1114:Src/uds_diag.c **** 		UDS_Send_Pos_Res(&pos_Response);
 2141              		.loc 1 1114 28 view .LVU670
 2142 00b0 80F80732 		strb	r3, [r0, #519]
1115:Src/uds_diag.c **** 
 2143              		.loc 1 1115 3 is_stmt 1 view .LVU671
 2144 00b4 FFF7FEFF 		bl	UDS_Send_Pos_Res
 2145              	.LVL126:
 2146 00b8 BBE7     		b	.L151
 2147              	.L163:
 2148 00ba 00BF     		.align	2
 2149              	.L162:
 2150 00bc 00000000 		.word	.LANCHOR9
 2151 00c0 00000000 		.word	.LANCHOR10
 2152 00c4 00000000 		.word	.LANCHOR11
 2153 00c8 00000000 		.word	.LANCHOR12
 2154              		.cfi_endproc
 2155              	.LFE94:
 2157              		.section	.text.server_call_back,"ax",%progbits
 2158              		.align	1
 2159              		.global	server_call_back
 2160              		.syntax unified
 2161              		.thumb
 2162              		.thumb_func
 2164              	server_call_back:
 2165              	.LVL127:
 2166              	.LFB95:
1127:Src/uds_diag.c **** 
1128:Src/uds_diag.c **** /*******************************************************************/
1129:Src/uds_diag.c **** /*******************************************************************/
1130:Src/uds_diag.c **** /*******************************************************************/
1131:Src/uds_diag.c **** /*******************************************************************/
1132:Src/uds_diag.c **** 
1133:Src/uds_diag.c **** /*************************************************
1134:Src/uds_diag.c ****  void server_call_back()
1135:Src/uds_diag.c **** 
1136:Src/uds_diag.c ****  Description	:
1137:Src/uds_diag.c ****  *	- The function initializes a flag to check the validity of the target.
1138:Src/uds_diag.c ****  *	- The function then initializes a flag to check the validity of the received SID.
1139:Src/uds_diag.c ****  *  - The function then validates the received SID against a set of predefined services.
1140:Src/uds_diag.c ****  *  - Based on the validated SID, it executes corresponding service actions, such as Control Servic
1141:Src/uds_diag.c ****  *    Read Service, Security Service, Write Service, and Tester Representative Service.
1142:Src/uds_diag.c ****  *  - If the SID is valid and matches Control Service, it further checks the session type and chang
1143:Src/uds_diag.c ****  *    the session state accordingly.
1144:Src/uds_diag.c ****  Synch/Asynch	:	Synchronouse performs operations sequentially and returns once all actions are comp
1145:Src/uds_diag.c ****  Reentrance		:	non reeentrant because global variable
1146:Src/uds_diag.c ****  parameter in	:	null	(void)
1147:Src/uds_diag.c ****  parameter out	:	null	(void)
1148:Src/uds_diag.c ****  return value	:	void
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 64


1149:Src/uds_diag.c **** 
1150:Src/uds_diag.c ****  ***************************************************/
1151:Src/uds_diag.c **** 
1152:Src/uds_diag.c **** void server_call_back(uint32_t TxPduId, PduInfoType* ptr)
1153:Src/uds_diag.c **** {
 2167              		.loc 1 1153 1 view -0
 2168              		.cfi_startproc
 2169              		@ args = 0, pretend = 0, frame = 0
 2170              		@ frame_needed = 0, uses_anonymous_args = 0
 2171              		.loc 1 1153 1 is_stmt 0 view .LVU673
 2172 0000 10B5     		push	{r4, lr}
 2173              	.LCFI19:
 2174              		.cfi_def_cfa_offset 8
 2175              		.cfi_offset 4, -8
 2176              		.cfi_offset 14, -4
 2177 0002 0C46     		mov	r4, r1
1154:Src/uds_diag.c **** 	PduDataPTR = ptr;
 2178              		.loc 1 1154 2 is_stmt 1 view .LVU674
 2179              		.loc 1 1154 13 is_stmt 0 view .LVU675
 2180 0004 3E4B     		ldr	r3, .L190
 2181 0006 1960     		str	r1, [r3]
1155:Src/uds_diag.c **** 	// create flag for check SID this is local bec . every frame i need to check the sid
1156:Src/uds_diag.c **** 	uint8_t local_sid_flag = 0;
 2182              		.loc 1 1156 2 is_stmt 1 view .LVU676
 2183              	.LVL128:
1157:Src/uds_diag.c **** 	uint8_t local_target_accept = 1;
 2184              		.loc 1 1157 2 view .LVU677
1158:Src/uds_diag.c **** 	SupressedPosRes_Server = ((ptr->Data[Sub_F] & 0b10000000)>>7) ;
 2185              		.loc 1 1158 2 view .LVU678
 2186              		.loc 1 1158 38 is_stmt 0 view .LVU679
 2187 0008 0B79     		ldrb	r3, [r1, #4]	@ zero_extendqisi2
 2188              		.loc 1 1158 59 view .LVU680
 2189 000a DB09     		lsrs	r3, r3, #7
 2190              		.loc 1 1158 25 view .LVU681
 2191 000c 3D4A     		ldr	r2, .L190+4
 2192 000e 1370     		strb	r3, [r2]
1159:Src/uds_diag.c **** 	pos_Response.ADD_Target = Client_Address;
 2193              		.loc 1 1159 2 is_stmt 1 view .LVU682
 2194              		.loc 1 1159 26 is_stmt 0 view .LVU683
 2195 0010 F123     		movs	r3, #241
 2196 0012 3D4A     		ldr	r2, .L190+8
 2197 0014 5370     		strb	r3, [r2, #1]
1160:Src/uds_diag.c **** 	Control.ADD_Target = Client_Address;
 2198              		.loc 1 1160 2 is_stmt 1 view .LVU684
 2199              		.loc 1 1160 21 is_stmt 0 view .LVU685
 2200 0016 3D4A     		ldr	r2, .L190+12
 2201 0018 5370     		strb	r3, [r2, #1]
1161:Src/uds_diag.c **** 	// this for test only
1162:Src/uds_diag.c **** 	//uint8_t ptr->Data[20] = {2 ,Control_Service , 5 };
1163:Src/uds_diag.c **** 	// we need to check for address target (ADD_Target) if true this message is for me if not rejected
1164:Src/uds_diag.c **** 
1165:Src/uds_diag.c **** 
1166:Src/uds_diag.c **** 	if(local_target_accept)
 2202              		.loc 1 1166 2 is_stmt 1 view .LVU686
1167:Src/uds_diag.c **** 	{
1168:Src/uds_diag.c **** 		// for SID validation
1169:Src/uds_diag.c **** 		if (ptr->Data[SID] == Control_Service || ptr->Data[SID]== Read_Service || ptr->Data[SID] == Write
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 65


 2203              		.loc 1 1169 3 view .LVU687
 2204              		.loc 1 1169 16 is_stmt 0 view .LVU688
 2205 001a 0878     		ldrb	r0, [r1]	@ zero_extendqisi2
 2206              	.LVL129:
 2207              		.loc 1 1169 6 view .LVU689
 2208 001c 1028     		cmp	r0, #16
 2209 001e 07D0     		beq	.L165
 2210              		.loc 1 1169 41 discriminator 1 view .LVU690
 2211 0020 2228     		cmp	r0, #34
 2212 0022 05D0     		beq	.L165
 2213              		.loc 1 1169 74 discriminator 2 view .LVU691
 2214 0024 2E28     		cmp	r0, #46
 2215 0026 03D0     		beq	.L165
 2216              		.loc 1 1169 109 discriminator 3 view .LVU692
 2217 0028 2728     		cmp	r0, #39
 2218 002a 01D0     		beq	.L165
 2219              		.loc 1 1169 147 discriminator 4 view .LVU693
 2220 002c 3E28     		cmp	r0, #62
 2221 002e 15D1     		bne	.L166
 2222              	.L165:
1170:Src/uds_diag.c **** 		{
1171:Src/uds_diag.c **** 			// tmam
1172:Src/uds_diag.c **** 			reset_timer();
 2223              		.loc 1 1172 4 is_stmt 1 view .LVU694
1173:Src/uds_diag.c **** 			if(global_session != DefaultSession){
 2224              		.loc 1 1173 4 view .LVU695
 2225              		.loc 1 1173 22 is_stmt 0 view .LVU696
 2226 0030 374B     		ldr	r3, .L190+16
 2227 0032 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1174:Src/uds_diag.c **** 				start_timer();
1175:Src/uds_diag.c **** 			}
1176:Src/uds_diag.c **** 			local_sid_flag = 1;
 2228              		.loc 1 1176 4 is_stmt 1 view .LVU697
 2229              	.LVL130:
1177:Src/uds_diag.c **** 
1178:Src/uds_diag.c **** 
1179:Src/uds_diag.c **** 		}
1180:Src/uds_diag.c **** 		else
1181:Src/uds_diag.c **** 		{
1182:Src/uds_diag.c **** 			// let error code of NRC =0 ;
1183:Src/uds_diag.c **** 
1184:Src/uds_diag.c **** 			// for test only
1185:Src/uds_diag.c **** 			//HAL_UART_Transmit(&huart2, (const uint8_t*)" -ive there is no SID has this name \r\n", 50, HAL
1186:Src/uds_diag.c **** 
1187:Src/uds_diag.c **** 			// this mean the SID not supported
1188:Src/uds_diag.c **** 			UDS_Send_Neg_Res(ptr->Data[SID],  serviceNotSupported);
1189:Src/uds_diag.c **** 			// go out of isr
1190:Src/uds_diag.c **** 			return;
1191:Src/uds_diag.c **** 		}
1192:Src/uds_diag.c **** 		if (local_sid_flag)
 2230              		.loc 1 1192 3 view .LVU698
1193:Src/uds_diag.c **** 		{
1194:Src/uds_diag.c **** 			//Check Suppressed Positive Response
1195:Src/uds_diag.c **** 
1196:Src/uds_diag.c **** 
1197:Src/uds_diag.c **** 			if (ptr->Data[SID] == Control_Service)
 2231              		.loc 1 1197 4 view .LVU699
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 66


 2232              		.loc 1 1197 7 is_stmt 0 view .LVU700
 2233 0034 1028     		cmp	r0, #16
 2234 0036 15D0     		beq	.L180
1198:Src/uds_diag.c **** 			{
1199:Src/uds_diag.c **** 				flag_sub_fun = 1;
1200:Src/uds_diag.c **** 			}
1201:Src/uds_diag.c **** 			else if (ptr->Data[SID] == Read_Service)
 2235              		.loc 1 1201 9 is_stmt 1 view .LVU701
 2236              		.loc 1 1201 12 is_stmt 0 view .LVU702
 2237 0038 2228     		cmp	r0, #34
 2238 003a 17D0     		beq	.L181
1202:Src/uds_diag.c **** 			{
1203:Src/uds_diag.c **** 				    
1204:Src/uds_diag.c **** 				//  for test
1205:Src/uds_diag.c **** 				//	printf("u are in Read_Service\n");
1206:Src/uds_diag.c **** 				// send read function (rad resp as the actual ptr->Data of temp or pressure)
1207:Src/uds_diag.c **** 				//	HAL_UART_Transmit(&huart2, (const uint8_t*)" UDS_Read_Data_Server() \r\n", 50, HAL_MAX_DELAY
1208:Src/uds_diag.c **** 
1209:Src/uds_diag.c **** 				//UDS_Read_Data_Server();
1210:Src/uds_diag.c **** 
1211:Src/uds_diag.c **** 				UDS_Read_Data_Server(ptr->Data);
1212:Src/uds_diag.c **** 				return;
1213:Src/uds_diag.c **** 				
1214:Src/uds_diag.c **** 			}
1215:Src/uds_diag.c **** 			else if (ptr->Data[SID] == Security_Service )
 2239              		.loc 1 1215 9 is_stmt 1 view .LVU703
 2240              		.loc 1 1215 12 is_stmt 0 view .LVU704
 2241 003c 2728     		cmp	r0, #39
 2242 003e 19D0     		beq	.L182
1216:Src/uds_diag.c **** 			{
1217:Src/uds_diag.c **** 
1218:Src/uds_diag.c **** 				//	printf("send_ser_sec() +ive resp \n");
1219:Src/uds_diag.c **** 				//			HAL_UART_Transmit(&huart2, (const uint8_t*)" send_ser_sec() +ive resp change the flag \r\n
1220:Src/uds_diag.c **** 
1221:Src/uds_diag.c **** 				//		send_ser_sec() ; // send seed
1222:Src/uds_diag.c **** 
1223:Src/uds_diag.c **** 				// (write here +ive resp for security) ------------------------> here
1224:Src/uds_diag.c **** 
1225:Src/uds_diag.c **** 				Sec_uint32SecurityAccess(PduDataPTR);
1226:Src/uds_diag.c **** 				//			UDS_Send_Pos_Res(&pos_Response) ;
1227:Src/uds_diag.c **** 			}
1228:Src/uds_diag.c **** 
1229:Src/uds_diag.c **** 
1230:Src/uds_diag.c **** 			else if (ptr->Data[SID] == Write_Service && global_sec_flag ==1 && global_session == ExtendedSes
 2243              		.loc 1 1230 9 is_stmt 1 view .LVU705
 2244              		.loc 1 1230 12 is_stmt 0 view .LVU706
 2245 0040 2E28     		cmp	r0, #46
 2246 0042 1BD0     		beq	.L183
 2247              	.L173:
1231:Src/uds_diag.c **** 			{
1232:Src/uds_diag.c **** 				//printf("u are in Write_Service\n");
1233:Src/uds_diag.c **** 				//			HAL_UART_Transmit(&huart2, (const uint8_t*)" u are in Write_Service \r\n", 50, 100 );
1234:Src/uds_diag.c **** 				//			// send write response
1235:Src/uds_diag.c **** 				//			//	printf("UDS_Write_Data_Server() \n");
1236:Src/uds_diag.c **** 				//			HAL_UART_Transmit(&huart2, (const uint8_t*)" UDS_Write_Data_Server() \r\n", 50, 100 ); // 
1237:Src/uds_diag.c **** 
1238:Src/uds_diag.c **** 				// ptr->Data write with +ive resp
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 67


1239:Src/uds_diag.c **** 
1240:Src/uds_diag.c **** 
1241:Src/uds_diag.c **** 				UDS_Write_Data_Server(ptr->Data,  ptr->Data[0]);
1242:Src/uds_diag.c **** 				return;
1243:Src/uds_diag.c **** 			}
1244:Src/uds_diag.c **** 			else if (ptr->Data[SID] == Write_Service && global_sec_flag == 0 && global_session == ExtendedSe
 2248              		.loc 1 1244 9 is_stmt 1 view .LVU707
 2249              		.loc 1 1244 12 is_stmt 0 view .LVU708
 2250 0044 2E28     		cmp	r0, #46
 2251 0046 28D0     		beq	.L184
 2252              	.L174:
1245:Src/uds_diag.c **** 			{
1246:Src/uds_diag.c **** 				//printf("u are not in Write_Service\n");
1247:Src/uds_diag.c **** 				//			HAL_UART_Transmit(&huart2, (const uint8_t*)" u are not in Write_Service \r\n", 50, 100 );
1248:Src/uds_diag.c **** 				//			// send -ive response
1249:Src/uds_diag.c **** 				//			//printf("UDS_Write_Data_Server() \n");
1250:Src/uds_diag.c **** 				//			HAL_UART_Transmit(&huart2, (const uint8_t*)"UDS_Write_Data_Server() \r\n", 50, 100 ); // d
1251:Src/uds_diag.c **** 				// (write here -ive resp for write security ) ------------------------> here
1252:Src/uds_diag.c **** 
1253:Src/uds_diag.c **** 				UDS_Send_Neg_Res(ptr->Data[SID], securityAccessDenied);
1254:Src/uds_diag.c **** 				return;
1255:Src/uds_diag.c **** 			}
1256:Src/uds_diag.c **** 			else if (ptr->Data[SID] == Write_Service  && global_session == DefaultSession)
 2253              		.loc 1 1256 9 is_stmt 1 view .LVU709
 2254              		.loc 1 1256 12 is_stmt 0 view .LVU710
 2255 0048 2E28     		cmp	r0, #46
 2256 004a 33D0     		beq	.L185
 2257              	.L175:
1257:Src/uds_diag.c **** 			{
1258:Src/uds_diag.c **** 				// (write here -ive resp for write session (NRC ) ------------------------> here
1259:Src/uds_diag.c **** 
1260:Src/uds_diag.c **** 				UDS_Send_Neg_Res(ptr->Data[SID], serviceNotSupportedInActiveSession);
1261:Src/uds_diag.c **** 				return;
1262:Src/uds_diag.c **** 			}
1263:Src/uds_diag.c **** 			else if (ptr->Data[SID] == Tester_Representer_Service)
 2258              		.loc 1 1263 9 is_stmt 1 view .LVU711
 2259              		.loc 1 1263 12 is_stmt 0 view .LVU712
 2260 004c 3E28     		cmp	r0, #62
 2261 004e 3AD0     		beq	.L186
 2262              	.LVL131:
 2263              	.L170:
1264:Src/uds_diag.c **** 			{
1265:Src/uds_diag.c **** 				//printf("u are in Tester_Representer_Service\n");
1266:Src/uds_diag.c **** 				//			HAL_UART_Transmit(&huart2, (const uint8_t*)" u are in Tester_Representer_Service \r\n", 50
1267:Src/uds_diag.c **** 				// call the fun of tester Representer
1268:Src/uds_diag.c **** 				UDS_Tester_Presenter_Server();
1269:Src/uds_diag.c **** 				//printf("void UDS_Tester_Present(void) \n");
1270:Src/uds_diag.c **** 				//			HAL_UART_Transmit(&huart2, (const uint8_t*)" void UDS_Tester_Present(void) \r\n", 50, 100 
1271:Src/uds_diag.c **** 
1272:Src/uds_diag.c **** 				// (write here +ive resp for  Tester_Representer_Service) ------------------------> here
1273:Src/uds_diag.c **** 				return;
1274:Src/uds_diag.c **** 			}
1275:Src/uds_diag.c **** 		}
1276:Src/uds_diag.c **** 		// check sub fun
1277:Src/uds_diag.c **** 		if (flag_sub_fun== sub_func_control)
 2264              		.loc 1 1277 3 is_stmt 1 view .LVU713
 2265              		.loc 1 1277 19 is_stmt 0 view .LVU714
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 68


 2266 0050 304B     		ldr	r3, .L190+20
 2267 0052 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2268 0054 DBB2     		uxtb	r3, r3
 2269              		.loc 1 1277 6 view .LVU715
 2270 0056 012B     		cmp	r3, #1
 2271 0058 38D0     		beq	.L187
 2272              	.LVL132:
 2273              	.L164:
1278:Src/uds_diag.c **** 		{
1279:Src/uds_diag.c **** 			ptr->Data[Sub_F] &= 0x7F; //Original Sub_Func
1280:Src/uds_diag.c **** 			// true sub fun
1281:Src/uds_diag.c **** 			if (ptr->Data[SID]== Control_Service && ptr->Data[Sub_F] == DefaultSession)
1282:Src/uds_diag.c **** 			{
1283:Src/uds_diag.c **** 				// change the state to default
1284:Src/uds_diag.c **** 				//	printf(" UDS_Process_Session(void); \n ");
1285:Src/uds_diag.c **** 				//HAL_UART_Transmit(&huart2, (const uint8_t*)" UDS_Process_Session(void) \r\n", 50, 100 );
1286:Src/uds_diag.c **** 
1287:Src/uds_diag.c **** 				//HAL_UART_Transmit(&huart2, (const uint8_t*)" changed to DefaultSession \r\n", 50, 100 );
1288:Src/uds_diag.c **** 				// (write here +ive resp for  change to def- session ) ------------------------> here
1289:Src/uds_diag.c **** 
1290:Src/uds_diag.c **** 				//global_session = DefaultSession;
1291:Src/uds_diag.c **** 				UDS_Control_Session_Server(ptr->Data);
1292:Src/uds_diag.c **** 
1293:Src/uds_diag.c **** 			}
1294:Src/uds_diag.c **** 			else if (ptr->Data[SID] == Control_Service && ptr->Data[Sub_F] == ExtendedSession)
1295:Src/uds_diag.c **** 			{
1296:Src/uds_diag.c **** 				//printf(" UDS_Process_Session(void); \n ");
1297:Src/uds_diag.c **** 				// change to extended
1298:Src/uds_diag.c **** 				//	printf(" changed to ExtendedSession ");
1299:Src/uds_diag.c **** 				//	HAL_UART_Transmit(&huart2, (const uint8_t*)" changed to ExtendedSession \r\n", 50, 100 );
1300:Src/uds_diag.c **** 
1301:Src/uds_diag.c **** 				// (write here +ive resp for  change to ext session ) ------------------------> here
1302:Src/uds_diag.c **** 				//global_session = ExtendedSession;
1303:Src/uds_diag.c **** 				UDS_Control_Session_Server(ptr->Data);
1304:Src/uds_diag.c **** 			}
1305:Src/uds_diag.c **** 			else
1306:Src/uds_diag.c **** 			{
1307:Src/uds_diag.c **** 				//printf(" not supported ");
1308:Src/uds_diag.c **** 				//HAL_UART_Transmit(&huart2, (const uint8_t*)" not supported \r\n", 50, 100 );
1309:Src/uds_diag.c **** 				UDS_Send_Neg_Res(ptr->Data[SID], subFunctionNotSupported);
1310:Src/uds_diag.c **** 							// error in sub func
1311:Src/uds_diag.c **** 				// (write here -ive resp for sub servise ) ------------------------> here
1312:Src/uds_diag.c **** 			}
1313:Src/uds_diag.c **** 		}
1314:Src/uds_diag.c **** 		else
1315:Src/uds_diag.c **** 		{
1316:Src/uds_diag.c **** 			
1317:Src/uds_diag.c **** 
1318:Src/uds_diag.c **** 		}
1319:Src/uds_diag.c **** 	}
1320:Src/uds_diag.c **** 	else
1321:Src/uds_diag.c **** 	{
1322:Src/uds_diag.c **** 		// not the target
1323:Src/uds_diag.c **** 	}
1324:Src/uds_diag.c **** }
 2274              		.loc 1 1324 1 view .LVU716
 2275 005a 10BD     		pop	{r4, pc}
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 69


 2276              	.LVL133:
 2277              	.L166:
1188:Src/uds_diag.c **** 			// go out of isr
 2278              		.loc 1 1188 4 is_stmt 1 view .LVU717
 2279 005c 1121     		movs	r1, #17
 2280              	.LVL134:
1188:Src/uds_diag.c **** 			// go out of isr
 2281              		.loc 1 1188 4 is_stmt 0 view .LVU718
 2282 005e FFF7FEFF 		bl	UDS_Send_Neg_Res
 2283              	.LVL135:
1190:Src/uds_diag.c **** 		}
 2284              		.loc 1 1190 4 is_stmt 1 view .LVU719
 2285 0062 FAE7     		b	.L164
 2286              	.LVL136:
 2287              	.L180:
1199:Src/uds_diag.c **** 			}
 2288              		.loc 1 1199 5 view .LVU720
1199:Src/uds_diag.c **** 			}
 2289              		.loc 1 1199 18 is_stmt 0 view .LVU721
 2290 0064 2B4B     		ldr	r3, .L190+20
 2291 0066 0122     		movs	r2, #1
 2292 0068 1A70     		strb	r2, [r3]
 2293 006a F1E7     		b	.L170
 2294              	.L181:
1211:Src/uds_diag.c **** 				return;
 2295              		.loc 1 1211 5 is_stmt 1 view .LVU722
 2296 006c 2046     		mov	r0, r4
 2297 006e FFF7FEFF 		bl	UDS_Read_Data_Server
 2298              	.LVL137:
1212:Src/uds_diag.c **** 				
 2299              		.loc 1 1212 5 view .LVU723
 2300 0072 F2E7     		b	.L164
 2301              	.LVL138:
 2302              	.L182:
1225:Src/uds_diag.c **** 				//			UDS_Send_Pos_Res(&pos_Response) ;
 2303              		.loc 1 1225 5 view .LVU724
 2304 0074 2046     		mov	r0, r4
 2305 0076 FFF7FEFF 		bl	Sec_uint32SecurityAccess
 2306              	.LVL139:
1225:Src/uds_diag.c **** 				//			UDS_Send_Pos_Res(&pos_Response) ;
 2307              		.loc 1 1225 5 is_stmt 0 view .LVU725
 2308 007a E9E7     		b	.L170
 2309              	.LVL140:
 2310              	.L183:
1230:Src/uds_diag.c **** 			{
 2311              		.loc 1 1230 64 discriminator 1 view .LVU726
 2312 007c 264B     		ldr	r3, .L190+24
 2313 007e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2314 0080 DBB2     		uxtb	r3, r3
1230:Src/uds_diag.c **** 			{
 2315              		.loc 1 1230 45 discriminator 1 view .LVU727
 2316 0082 012B     		cmp	r3, #1
 2317 0084 DED1     		bne	.L173
1230:Src/uds_diag.c **** 			{
 2318              		.loc 1 1230 86 discriminator 2 view .LVU728
 2319 0086 224B     		ldr	r3, .L190+16
 2320 0088 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 70


 2321 008a DBB2     		uxtb	r3, r3
1230:Src/uds_diag.c **** 			{
 2322              		.loc 1 1230 68 discriminator 2 view .LVU729
 2323 008c 032B     		cmp	r3, #3
 2324 008e D9D1     		bne	.L173
1241:Src/uds_diag.c **** 				return;
 2325              		.loc 1 1241 5 is_stmt 1 view .LVU730
 2326 0090 0146     		mov	r1, r0
 2327              	.LVL141:
1241:Src/uds_diag.c **** 				return;
 2328              		.loc 1 1241 5 is_stmt 0 view .LVU731
 2329 0092 2046     		mov	r0, r4
 2330 0094 FFF7FEFF 		bl	UDS_Write_Data_Server
 2331              	.LVL142:
1242:Src/uds_diag.c **** 			}
 2332              		.loc 1 1242 5 is_stmt 1 view .LVU732
 2333 0098 DFE7     		b	.L164
 2334              	.LVL143:
 2335              	.L184:
1244:Src/uds_diag.c **** 			{
 2336              		.loc 1 1244 64 is_stmt 0 discriminator 1 view .LVU733
 2337 009a 1F4B     		ldr	r3, .L190+24
 2338 009c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1244:Src/uds_diag.c **** 			{
 2339              		.loc 1 1244 45 discriminator 1 view .LVU734
 2340 009e 002B     		cmp	r3, #0
 2341 00a0 D2D1     		bne	.L174
1244:Src/uds_diag.c **** 			{
 2342              		.loc 1 1244 87 discriminator 2 view .LVU735
 2343 00a2 1B4B     		ldr	r3, .L190+16
 2344 00a4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2345 00a6 DBB2     		uxtb	r3, r3
1244:Src/uds_diag.c **** 			{
 2346              		.loc 1 1244 69 discriminator 2 view .LVU736
 2347 00a8 032B     		cmp	r3, #3
 2348 00aa CDD1     		bne	.L174
1253:Src/uds_diag.c **** 				return;
 2349              		.loc 1 1253 5 is_stmt 1 view .LVU737
 2350 00ac 3321     		movs	r1, #51
 2351              	.LVL144:
1253:Src/uds_diag.c **** 				return;
 2352              		.loc 1 1253 5 is_stmt 0 view .LVU738
 2353 00ae FFF7FEFF 		bl	UDS_Send_Neg_Res
 2354              	.LVL145:
1254:Src/uds_diag.c **** 			}
 2355              		.loc 1 1254 5 is_stmt 1 view .LVU739
 2356 00b2 D2E7     		b	.L164
 2357              	.LVL146:
 2358              	.L185:
1256:Src/uds_diag.c **** 			{
 2359              		.loc 1 1256 64 is_stmt 0 discriminator 1 view .LVU740
 2360 00b4 164B     		ldr	r3, .L190+16
 2361 00b6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2362 00b8 DBB2     		uxtb	r3, r3
1256:Src/uds_diag.c **** 			{
 2363              		.loc 1 1256 46 discriminator 1 view .LVU741
 2364 00ba 012B     		cmp	r3, #1
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 71


 2365 00bc C6D1     		bne	.L175
1260:Src/uds_diag.c **** 				return;
 2366              		.loc 1 1260 5 is_stmt 1 view .LVU742
 2367 00be 7F21     		movs	r1, #127
 2368              	.LVL147:
1260:Src/uds_diag.c **** 				return;
 2369              		.loc 1 1260 5 is_stmt 0 view .LVU743
 2370 00c0 FFF7FEFF 		bl	UDS_Send_Neg_Res
 2371              	.LVL148:
1261:Src/uds_diag.c **** 			}
 2372              		.loc 1 1261 5 is_stmt 1 view .LVU744
 2373 00c4 C9E7     		b	.L164
 2374              	.LVL149:
 2375              	.L186:
1268:Src/uds_diag.c **** 				//printf("void UDS_Tester_Present(void) \n");
 2376              		.loc 1 1268 5 view .LVU745
 2377 00c6 FFF7FEFF 		bl	UDS_Tester_Presenter_Server
 2378              	.LVL150:
1273:Src/uds_diag.c **** 			}
 2379              		.loc 1 1273 5 view .LVU746
 2380 00ca C6E7     		b	.L164
 2381              	.L187:
1279:Src/uds_diag.c **** 			// true sub fun
 2382              		.loc 1 1279 4 view .LVU747
1279:Src/uds_diag.c **** 			// true sub fun
 2383              		.loc 1 1279 21 is_stmt 0 view .LVU748
 2384 00cc 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 2385 00ce 03F07F03 		and	r3, r3, #127
 2386 00d2 2371     		strb	r3, [r4, #4]
1281:Src/uds_diag.c **** 			{
 2387              		.loc 1 1281 4 is_stmt 1 view .LVU749
1281:Src/uds_diag.c **** 			{
 2388              		.loc 1 1281 17 is_stmt 0 view .LVU750
 2389 00d4 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
1281:Src/uds_diag.c **** 			{
 2390              		.loc 1 1281 7 view .LVU751
 2391 00d6 1028     		cmp	r0, #16
 2392 00d8 07D0     		beq	.L188
 2393              	.L176:
1294:Src/uds_diag.c **** 			{
 2394              		.loc 1 1294 9 is_stmt 1 view .LVU752
1294:Src/uds_diag.c **** 			{
 2395              		.loc 1 1294 12 is_stmt 0 view .LVU753
 2396 00da 1028     		cmp	r0, #16
 2397 00dc 01D1     		bne	.L177
1294:Src/uds_diag.c **** 			{
 2398              		.loc 1 1294 47 discriminator 1 view .LVU754
 2399 00de 032B     		cmp	r3, #3
 2400 00e0 09D0     		beq	.L189
 2401              	.L177:
1309:Src/uds_diag.c **** 							// error in sub func
 2402              		.loc 1 1309 5 is_stmt 1 view .LVU755
 2403 00e2 1221     		movs	r1, #18
 2404 00e4 FFF7FEFF 		bl	UDS_Send_Neg_Res
 2405              	.LVL151:
1323:Src/uds_diag.c **** }
 2406              		.loc 1 1323 2 view .LVU756
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 72


 2407 00e8 B7E7     		b	.L164
 2408              	.L188:
1281:Src/uds_diag.c **** 			{
 2409              		.loc 1 1281 41 is_stmt 0 discriminator 1 view .LVU757
 2410 00ea 012B     		cmp	r3, #1
 2411 00ec F5D1     		bne	.L176
1291:Src/uds_diag.c **** 
 2412              		.loc 1 1291 5 is_stmt 1 view .LVU758
 2413 00ee 2046     		mov	r0, r4
 2414 00f0 FFF7FEFF 		bl	UDS_Control_Session_Server
 2415              	.LVL152:
 2416 00f4 B1E7     		b	.L164
 2417              	.L189:
1303:Src/uds_diag.c **** 			}
 2418              		.loc 1 1303 5 view .LVU759
 2419 00f6 2046     		mov	r0, r4
 2420 00f8 FFF7FEFF 		bl	UDS_Control_Session_Server
 2421              	.LVL153:
 2422 00fc ADE7     		b	.L164
 2423              	.L191:
 2424 00fe 00BF     		.align	2
 2425              	.L190:
 2426 0100 00000000 		.word	.LANCHOR19
 2427 0104 00000000 		.word	.LANCHOR13
 2428 0108 00000000 		.word	.LANCHOR9
 2429 010c 00000000 		.word	.LANCHOR15
 2430 0110 00000000 		.word	.LANCHOR14
 2431 0114 00000000 		.word	.LANCHOR20
 2432 0118 00000000 		.word	.LANCHOR18
 2433              		.cfi_endproc
 2434              	.LFE95:
 2436              		.section	.text.UDS_MainFunction,"ax",%progbits
 2437              		.align	1
 2438              		.global	UDS_MainFunction
 2439              		.syntax unified
 2440              		.thumb
 2441              		.thumb_func
 2443              	UDS_MainFunction:
 2444              	.LFB96:
1325:Src/uds_diag.c **** 
1326:Src/uds_diag.c **** void UDS_MainFunction()
1327:Src/uds_diag.c **** {
 2445              		.loc 1 1327 1 view -0
 2446              		.cfi_startproc
 2447              		@ Volatile: function does not return.
 2448              		@ args = 0, pretend = 0, frame = 0
 2449              		@ frame_needed = 0, uses_anonymous_args = 0
 2450 0000 08B5     		push	{r3, lr}
 2451              	.LCFI20:
 2452              		.cfi_def_cfa_offset 8
 2453              		.cfi_offset 3, -8
 2454              		.cfi_offset 14, -4
 2455 0002 10E0     		b	.L197
 2456              	.L202:
1328:Src/uds_diag.c **** 	while(1)
1329:Src/uds_diag.c **** 	{
1330:Src/uds_diag.c **** 		if(UDS_Tx_Confirm)
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 73


1331:Src/uds_diag.c **** 		{
1332:Src/uds_diag.c **** 			UDS_Tx_Confirm = 0;
1333:Src/uds_diag.c **** 			if ( UDS_Struct ->Data[Neg_Res_INDEX] == 0x7f)
1334:Src/uds_diag.c **** 			{
1335:Src/uds_diag.c **** 				switch(UDS_Struct ->Data[NRC_INDEX])
1336:Src/uds_diag.c **** 				{
1337:Src/uds_diag.c **** 				case serviceNotSupported :
1338:Src/uds_diag.c **** 					//HAL_UART_Transmit(&huart2, (uint8_t*) "\r\nThis Service is not Available.\r\n",strlen("\r\nT
1339:Src/uds_diag.c **** 					break ;
1340:Src/uds_diag.c **** 
1341:Src/uds_diag.c **** 				case securityAccessDenied :
1342:Src/uds_diag.c **** 					//HAL_UART_Transmit(&huart2, (uint8_t*) "\r\nNot Secured, Please Enter a Key.\r\n",strlen("\r\
1343:Src/uds_diag.c **** 
1344:Src/uds_diag.c **** 					break ;
1345:Src/uds_diag.c **** 
1346:Src/uds_diag.c **** 				case subFunctionNotSupported :
1347:Src/uds_diag.c **** 					//HAL_UART_Transmit(&huart2, (uint8_t*) "\r\nWrong Session, Please Enter Extended Session.\r\n
1348:Src/uds_diag.c **** 
1349:Src/uds_diag.c **** 					break ;
1350:Src/uds_diag.c **** 
1351:Src/uds_diag.c **** 				case serviceNotSupportedInActiveSession :
1352:Src/uds_diag.c **** 					//HAL_UART_Transmit(&huart2, (uint8_t*) "\r\nWrong Session, Please Enter Extended Session.\r\n
1353:Src/uds_diag.c **** 
1354:Src/uds_diag.c **** 					break ;
1355:Src/uds_diag.c **** 
1356:Src/uds_diag.c **** 				case invalidKey :
1357:Src/uds_diag.c **** 					//HAL_UART_Transmit(&huart2, (uint8_t*) "\r\nWrong Key.\r\n",strlen("\r\nWrong Key.\r\n"), HAL
1358:Src/uds_diag.c **** 
1359:Src/uds_diag.c **** 					break ;
1360:Src/uds_diag.c **** 
1361:Src/uds_diag.c **** 				default:
1362:Src/uds_diag.c **** 					//Nothing
1363:Src/uds_diag.c ****                     break ;
1364:Src/uds_diag.c **** 				}
1365:Src/uds_diag.c **** 			}
1366:Src/uds_diag.c **** 
1367:Src/uds_diag.c **** 			else {
1368:Src/uds_diag.c **** 				UDS_Struct->Data[SID] = UDS_Struct->Data[SID] - 0x40;
1369:Src/uds_diag.c **** 				if (UDS_Struct->Data[SID] == Read_Service)
1370:Src/uds_diag.c **** 
1371:Src/uds_diag.c **** 				{
1372:Src/uds_diag.c **** 					if  ( UDS_Struct->Data[DID_1] == Oil_Temp_First_byte &&  UDS_Struct->Data[DID_2] == Oil_Temp_S
 2457              		.loc 1 1372 6 view .LVU761
 2458              		.loc 1 1372 59 is_stmt 0 view .LVU762
 2459 0004 0368     		ldr	r3, [r0]
 2460 0006 23F07F43 		bic	r3, r3, #-16777216
 2461 000a 23F0FF03 		bic	r3, r3, #255
 2462              		.loc 1 1372 10 view .LVU763
 2463 000e 1E4A     		ldr	r2, .L203
 2464 0010 9342     		cmp	r3, r2
 2465 0012 2AD0     		beq	.L199
1373:Src/uds_diag.c **** 					{
1374:Src/uds_diag.c **** 
1375:Src/uds_diag.c **** 						//HAL_UART_Transmit(&huart2, (uint8_t*) "\r\nOil Temp:\r\n", strlen("\r\nOil Temp:\r\n"), HAL
1376:Src/uds_diag.c **** 						sendHexArrayAsASCII((uint8_t*)&UDS_Struct->Data[Data_DID],2);
1377:Src/uds_diag.c **** 
1378:Src/uds_diag.c **** 					}
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 74


1379:Src/uds_diag.c **** 
1380:Src/uds_diag.c **** 					else if  ( UDS_Struct->Data[DID_1] == Oil_Pressure_First_byte &&  UDS_Struct->Data[DID_2] == O
 2466              		.loc 1 1380 11 is_stmt 1 view .LVU764
 2467              		.loc 1 1380 15 is_stmt 0 view .LVU765
 2468 0014 1D4A     		ldr	r2, .L203+4
 2469 0016 9342     		cmp	r3, r2
 2470 0018 2CD0     		beq	.L200
1381:Src/uds_diag.c **** 					{
1382:Src/uds_diag.c **** 						//HAL_UART_Transmit(&huart2, (uint8_t*) "\r\nOil Pressure:\r\n", strlen("\r\nOil Pressure:\r\
1383:Src/uds_diag.c **** 						sendHexArrayAsASCII((uint8_t*)&UDS_Struct->Data[Data_DID],4);
1384:Src/uds_diag.c **** 
1385:Src/uds_diag.c **** 					}
1386:Src/uds_diag.c **** 
1387:Src/uds_diag.c **** 					else if  ( UDS_Struct->Data[DID_1] == VIN_number_First_byte &&  UDS_Struct->Data[DID_2] == VIN
 2471              		.loc 1 1387 11 is_stmt 1 view .LVU766
 2472              		.loc 1 1387 15 is_stmt 0 view .LVU767
 2473 001a 1D4A     		ldr	r2, .L203+8
 2474 001c 9342     		cmp	r3, r2
 2475 001e 2ED0     		beq	.L201
 2476              	.L193:
1388:Src/uds_diag.c **** 					{
1389:Src/uds_diag.c **** 						//HAL_UART_Transmit(&huart2, (uint8_t*) "\r\nVIN Number:\r\n", strlen("\r\nVIN Number:\r\n"),
1390:Src/uds_diag.c **** 						sendHexArrayAsASCII((uint8_t*)&UDS_Struct->Data[Data_DID],17);
1391:Src/uds_diag.c **** 						//sendHexArrayAsASCII((uint8_t*)&UDS_Struct->Data[Data_DID],17);
1392:Src/uds_diag.c **** 
1393:Src/uds_diag.c **** 					}
1394:Src/uds_diag.c **** 				}
1395:Src/uds_diag.c **** 
1396:Src/uds_diag.c **** 				/*  Write IDS Message */
1397:Src/uds_diag.c **** 				else if (UDS_Struct->Data[SID] == Write_Service)
1398:Src/uds_diag.c **** 
1399:Src/uds_diag.c **** 				{
1400:Src/uds_diag.c **** 
1401:Src/uds_diag.c **** 					if ( UDS_Struct->Data[DID_1] == Oil_Temp_First_byte &&  UDS_Struct->Data[DID_2] == Oil_Temp_Se
1402:Src/uds_diag.c **** 					{
1403:Src/uds_diag.c **** 						//HAL_UART_Transmit(&huart2, (uint8_t*) "\r\nOil Temperature Written successfully.\r\n", strl
1404:Src/uds_diag.c **** 					}
1405:Src/uds_diag.c **** 
1406:Src/uds_diag.c **** 					else if  ( UDS_Struct->Data[DID_1] == Oil_Pressure_First_byte &&  UDS_Struct->Data[DID_2] == O
1407:Src/uds_diag.c **** 					{
1408:Src/uds_diag.c **** 						//HAL_UART_Transmit(&huart2, (uint8_t*) "\r\nOil Pressure Written successfully.\r\n", strlen(
1409:Src/uds_diag.c **** 					}
1410:Src/uds_diag.c **** 
1411:Src/uds_diag.c **** 					else if  ( UDS_Struct->Data[DID_1] == VIN_number_First_byte &&  UDS_Struct->Data[DID_2] == VIN
1412:Src/uds_diag.c **** 					{
1413:Src/uds_diag.c **** 						//HAL_UART_Transmit(&huart2, (uint8_t*) "\r\nVIN Number Written successfully.\r\n", strlen("\
1414:Src/uds_diag.c **** 					}
1415:Src/uds_diag.c **** 				}
1416:Src/uds_diag.c **** 				/*  Control Service  Session */
1417:Src/uds_diag.c **** 
1418:Src/uds_diag.c **** 				else if (UDS_Struct->Data[SID] == Control_Service)
1419:Src/uds_diag.c **** 
1420:Src/uds_diag.c **** 				{
1421:Src/uds_diag.c **** 
1422:Src/uds_diag.c **** 					switch ( UDS_Struct->Data[Sub_F] )
1423:Src/uds_diag.c **** 					{
1424:Src/uds_diag.c **** 
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 75


1425:Src/uds_diag.c **** 					case DefaultSession :
1426:Src/uds_diag.c **** 						//HAL_UART_Transmit(&huart2, (uint8_t*) "\r\nIt's Default Session!\r\n", strlen("\r\nIt's Def
1427:Src/uds_diag.c **** 						//UDS_Read_Data_Client(Frame_Info.DID);
1428:Src/uds_diag.c **** 						break ;
1429:Src/uds_diag.c **** 
1430:Src/uds_diag.c **** 					case ExtendedSession :
1431:Src/uds_diag.c **** 						//HAL_UART_Transmit(&huart2,(uint8_t*) "\r\nIt's Extended Session!\r\n", strlen("\r\nIt's Ext
1432:Src/uds_diag.c **** 						//UDS_Read_Data_Client(Frame_Info.DID);
1433:Src/uds_diag.c **** 						break ;
1434:Src/uds_diag.c **** 					}
1435:Src/uds_diag.c **** 				}
1436:Src/uds_diag.c **** 				/*  Security Service  */
1437:Src/uds_diag.c **** 
1438:Src/uds_diag.c **** 				else if (UDS_Struct->Data[SID] == Security_Service)
1439:Src/uds_diag.c **** 
1440:Src/uds_diag.c **** 				{
1441:Src/uds_diag.c **** 
1442:Src/uds_diag.c **** 					switch ( UDS_Struct->Data[Sub_F] )
1443:Src/uds_diag.c **** 					{
1444:Src/uds_diag.c **** 
1445:Src/uds_diag.c **** 					case Key :
1446:Src/uds_diag.c **** 						//HAL_UART_Transmit(&huart2, (uint8_t*) "\r\nKey is Compatible!\r\n", strlen ( "\r\nKey is Co
1447:Src/uds_diag.c **** 						break ;
1448:Src/uds_diag.c **** 
1449:Src/uds_diag.c **** 					case Seed :
1450:Src/uds_diag.c **** 						//HAL_UART_Transmit(&huart2, (uint8_t*) "\r\nSeed is:\r\n", strlen ("\r\nSeed is:\r\n"), HAL_
1451:Src/uds_diag.c **** 						sendHexArrayAsASCII((uint8_t*)&UDS_Struct->Data[Data_Sub_Fun],4);
1452:Src/uds_diag.c **** 
1453:Src/uds_diag.c **** 						break ;
1454:Src/uds_diag.c **** 					}
1455:Src/uds_diag.c **** 				}
1456:Src/uds_diag.c **** 				/*  Tester_Representer_Service  */
1457:Src/uds_diag.c **** 
1458:Src/uds_diag.c **** 				else if (UDS_Struct->Data[SID] == Tester_Representer_Service)
1459:Src/uds_diag.c **** 
1460:Src/uds_diag.c **** 				{
1461:Src/uds_diag.c **** 
1462:Src/uds_diag.c **** 					//(&huart2,(uint8_t*) "\r\nECU Reseted!\r\n", strlen("\r\n ECU Reseted!\r\n"), HAL_MAX_DELAY);
1463:Src/uds_diag.c **** 
1464:Src/uds_diag.c **** 				}
1465:Src/uds_diag.c **** 
1466:Src/uds_diag.c **** 				else { /* no thing  */	}
 2477              		.loc 1 1466 28 is_stmt 1 view .LVU768
1467:Src/uds_diag.c **** 
1468:Src/uds_diag.c **** 			}
1469:Src/uds_diag.c **** 
1470:Src/uds_diag.c **** 		}
1471:Src/uds_diag.c **** 
1472:Src/uds_diag.c **** 		vTaskDelay(50);
 2478              		.loc 1 1472 3 view .LVU769
 2479 0020 3220     		movs	r0, #50
 2480 0022 FFF7FEFF 		bl	vTaskDelay
 2481              	.LVL154:
1328:Src/uds_diag.c **** 	{
 2482              		.loc 1 1328 7 view .LVU770
 2483              	.L197:
1328:Src/uds_diag.c **** 	{
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 76


 2484              		.loc 1 1328 2 view .LVU771
1330:Src/uds_diag.c **** 		{
 2485              		.loc 1 1330 3 view .LVU772
1330:Src/uds_diag.c **** 		{
 2486              		.loc 1 1330 6 is_stmt 0 view .LVU773
 2487 0026 1B4B     		ldr	r3, .L203+12
 2488 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1330:Src/uds_diag.c **** 		{
 2489              		.loc 1 1330 5 view .LVU774
 2490 002a 002B     		cmp	r3, #0
 2491 002c F8D0     		beq	.L193
1332:Src/uds_diag.c **** 			if ( UDS_Struct ->Data[Neg_Res_INDEX] == 0x7f)
 2492              		.loc 1 1332 4 is_stmt 1 view .LVU775
1332:Src/uds_diag.c **** 			if ( UDS_Struct ->Data[Neg_Res_INDEX] == 0x7f)
 2493              		.loc 1 1332 19 is_stmt 0 view .LVU776
 2494 002e 194B     		ldr	r3, .L203+12
 2495 0030 0022     		movs	r2, #0
 2496 0032 1A70     		strb	r2, [r3]
1333:Src/uds_diag.c **** 			{
 2497              		.loc 1 1333 4 is_stmt 1 view .LVU777
1333:Src/uds_diag.c **** 			{
 2498              		.loc 1 1333 20 is_stmt 0 view .LVU778
 2499 0034 184B     		ldr	r3, .L203+16
 2500 0036 1B68     		ldr	r3, [r3]
1333:Src/uds_diag.c **** 			{
 2501              		.loc 1 1333 26 view .LVU779
 2502 0038 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
1333:Src/uds_diag.c **** 			{
 2503              		.loc 1 1333 7 view .LVU780
 2504 003a 7F2A     		cmp	r2, #127
 2505 003c F0D0     		beq	.L193
1368:Src/uds_diag.c **** 				if (UDS_Struct->Data[SID] == Read_Service)
 2506              		.loc 1 1368 5 is_stmt 1 view .LVU781
1368:Src/uds_diag.c **** 				if (UDS_Struct->Data[SID] == Read_Service)
 2507              		.loc 1 1368 45 is_stmt 0 view .LVU782
 2508 003e 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
1368:Src/uds_diag.c **** 				if (UDS_Struct->Data[SID] == Read_Service)
 2509              		.loc 1 1368 51 view .LVU783
 2510 0040 403A     		subs	r2, r2, #64
1368:Src/uds_diag.c **** 				if (UDS_Struct->Data[SID] == Read_Service)
 2511              		.loc 1 1368 27 view .LVU784
 2512 0042 1A70     		strb	r2, [r3]
1369:Src/uds_diag.c **** 
 2513              		.loc 1 1369 5 is_stmt 1 view .LVU785
1369:Src/uds_diag.c **** 
 2514              		.loc 1 1369 19 is_stmt 0 view .LVU786
 2515 0044 144B     		ldr	r3, .L203+16
 2516 0046 1868     		ldr	r0, [r3]
1369:Src/uds_diag.c **** 
 2517              		.loc 1 1369 25 view .LVU787
 2518 0048 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
1369:Src/uds_diag.c **** 
 2519              		.loc 1 1369 8 view .LVU788
 2520 004a 222B     		cmp	r3, #34
 2521 004c DAD0     		beq	.L202
1397:Src/uds_diag.c **** 
 2522              		.loc 1 1397 10 is_stmt 1 view .LVU789
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 77


1397:Src/uds_diag.c **** 
 2523              		.loc 1 1397 13 is_stmt 0 view .LVU790
 2524 004e 2E2B     		cmp	r3, #46
 2525 0050 E6D0     		beq	.L193
1418:Src/uds_diag.c **** 
 2526              		.loc 1 1418 10 is_stmt 1 view .LVU791
1418:Src/uds_diag.c **** 
 2527              		.loc 1 1418 13 is_stmt 0 view .LVU792
 2528 0052 102B     		cmp	r3, #16
 2529 0054 E4D0     		beq	.L193
1438:Src/uds_diag.c **** 
 2530              		.loc 1 1438 10 is_stmt 1 view .LVU793
1438:Src/uds_diag.c **** 
 2531              		.loc 1 1438 13 is_stmt 0 view .LVU794
 2532 0056 272B     		cmp	r3, #39
 2533 0058 E2D1     		bne	.L193
1442:Src/uds_diag.c **** 					{
 2534              		.loc 1 1442 6 is_stmt 1 view .LVU795
1442:Src/uds_diag.c **** 					{
 2535              		.loc 1 1442 31 is_stmt 0 view .LVU796
 2536 005a 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
1442:Src/uds_diag.c **** 					{
 2537              		.loc 1 1442 6 view .LVU797
 2538 005c 012B     		cmp	r3, #1
 2539 005e DFD1     		bne	.L193
1451:Src/uds_diag.c **** 
 2540              		.loc 1 1451 7 is_stmt 1 view .LVU798
 2541 0060 0421     		movs	r1, #4
 2542 0062 0530     		adds	r0, r0, #5
 2543 0064 FFF7FEFF 		bl	sendHexArrayAsASCII
 2544              	.LVL155:
1453:Src/uds_diag.c **** 					}
 2545              		.loc 1 1453 7 view .LVU799
 2546 0068 DAE7     		b	.L193
 2547              	.L199:
1376:Src/uds_diag.c **** 
 2548              		.loc 1 1376 7 view .LVU800
 2549 006a 0221     		movs	r1, #2
 2550 006c 0630     		adds	r0, r0, #6
 2551 006e FFF7FEFF 		bl	sendHexArrayAsASCII
 2552              	.LVL156:
 2553 0072 D5E7     		b	.L193
 2554              	.L200:
1383:Src/uds_diag.c **** 
 2555              		.loc 1 1383 7 view .LVU801
 2556 0074 0421     		movs	r1, #4
 2557 0076 0630     		adds	r0, r0, #6
 2558 0078 FFF7FEFF 		bl	sendHexArrayAsASCII
 2559              	.LVL157:
 2560 007c D0E7     		b	.L193
 2561              	.L201:
1390:Src/uds_diag.c **** 						//sendHexArrayAsASCII((uint8_t*)&UDS_Struct->Data[Data_DID],17);
 2562              		.loc 1 1390 7 view .LVU802
 2563 007e 1121     		movs	r1, #17
 2564 0080 0630     		adds	r0, r0, #6
 2565 0082 FFF7FEFF 		bl	sendHexArrayAsASCII
 2566              	.LVL158:
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 78


 2567 0086 CBE7     		b	.L193
 2568              	.L204:
 2569              		.align	2
 2570              	.L203:
 2571 0088 00F13D00 		.word	4059392
 2572 008c 00F53D00 		.word	4060416
 2573 0090 00F23D00 		.word	4059648
 2574 0094 00000000 		.word	.LANCHOR21
 2575 0098 00000000 		.word	.LANCHOR22
 2576              		.cfi_endproc
 2577              	.LFE96:
 2579              		.section	.text.UDS_Client_Callback,"ax",%progbits
 2580              		.align	1
 2581              		.global	UDS_Client_Callback
 2582              		.syntax unified
 2583              		.thumb
 2584              		.thumb_func
 2586              	UDS_Client_Callback:
 2587              	.LVL159:
 2588              	.LFB97:
1473:Src/uds_diag.c **** 	}
1474:Src/uds_diag.c **** }
1475:Src/uds_diag.c **** 
1476:Src/uds_diag.c **** void UDS_Client_Callback(uint32_t TxPduId,PduInfoType *PduInfoPtr)
1477:Src/uds_diag.c **** {
 2589              		.loc 1 1477 1 view -0
 2590              		.cfi_startproc
 2591              		@ args = 0, pretend = 0, frame = 0
 2592              		@ frame_needed = 0, uses_anonymous_args = 0
 2593              		@ link register save eliminated.
1478:Src/uds_diag.c **** 	UDS_Tx_Confirm = 1;
 2594              		.loc 1 1478 2 view .LVU804
 2595              		.loc 1 1478 17 is_stmt 0 view .LVU805
 2596 0000 024B     		ldr	r3, .L206
 2597 0002 0122     		movs	r2, #1
 2598 0004 1A70     		strb	r2, [r3]
1479:Src/uds_diag.c **** 	UDS_Struct = PduInfoPtr;
 2599              		.loc 1 1479 2 is_stmt 1 view .LVU806
 2600              		.loc 1 1479 13 is_stmt 0 view .LVU807
 2601 0006 024B     		ldr	r3, .L206+4
 2602 0008 1960     		str	r1, [r3]
1480:Src/uds_diag.c **** 
1481:Src/uds_diag.c **** }
 2603              		.loc 1 1481 1 view .LVU808
 2604 000a 7047     		bx	lr
 2605              	.L207:
 2606              		.align	2
 2607              	.L206:
 2608 000c 00000000 		.word	.LANCHOR21
 2609 0010 00000000 		.word	.LANCHOR22
 2610              		.cfi_endproc
 2611              	.LFE97:
 2613              		.global	Target_Address
 2614              		.global	Source_Address
 2615              		.global	SupressedPosRes_Server
 2616              		.global	SupressedPosRes_CLient
 2617              		.global	key
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 79


 2618              		.global	seed
 2619              		.global	PduDataPTR
 2620              		.global	UDS_Struct
 2621              		.global	UDS_Tx_Confirm
 2622              		.global	flag_sub_fun
 2623              		.global	msg
 2624              		.global	Control
 2625              		.global	pos_Response
 2626              		.global	VIN_number_var
 2627              		.global	Oil_Temp_var
 2628              		.global	Oil_Pressure_var
 2629              		.global	Sec_State
 2630              		.global	Sec_u32SeedValue
 2631              		.global	Security_Service_Availability_Flag
 2632              		.global	global_session
 2633              		.global	global_sec_flag
 2634              		.global	PduInfoTypePtr
 2635              		.global	Control_Session_Extended
 2636              		.global	Send_Security_Seed
 2637              		.global	Control_Session_Default
 2638              		.global	Write_Data_Client
 2639              		.global	Read_Data_Client
 2640              		.section	.bss.Control,"aw",%nobits
 2641              		.align	2
 2642              		.set	.LANCHOR15,. + 0
 2645              	Control:
 2646 0000 00000000 		.space	520
 2646      00000000 
 2646      00000000 
 2646      00000000 
 2646      00000000 
 2647              		.section	.bss.Control_Session_Default,"aw",%nobits
 2648              		.align	2
 2649              		.set	.LANCHOR4,. + 0
 2652              	Control_Session_Default:
 2653 0000 00000000 		.space	516
 2653      00000000 
 2653      00000000 
 2653      00000000 
 2653      00000000 
 2654              		.section	.bss.Control_Session_Extended,"aw",%nobits
 2655              		.align	2
 2656              		.set	.LANCHOR5,. + 0
 2659              	Control_Session_Extended:
 2660 0000 00000000 		.space	516
 2660      00000000 
 2660      00000000 
 2660      00000000 
 2660      00000000 
 2661              		.section	.bss.PduDataPTR,"aw",%nobits
 2662              		.align	2
 2663              		.set	.LANCHOR19,. + 0
 2666              	PduDataPTR:
 2667 0000 00000000 		.space	4
 2668              		.section	.bss.PduInfoTypePtr,"aw",%nobits
 2669              		.align	2
 2670              		.set	.LANCHOR0,. + 0
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 80


 2673              	PduInfoTypePtr:
 2674 0000 00000000 		.space	516
 2674      00000000 
 2674      00000000 
 2674      00000000 
 2674      00000000 
 2675              		.section	.bss.Read_Data_Client,"aw",%nobits
 2676              		.align	2
 2677              		.set	.LANCHOR3,. + 0
 2680              	Read_Data_Client:
 2681 0000 00000000 		.space	516
 2681      00000000 
 2681      00000000 
 2681      00000000 
 2681      00000000 
 2682              		.section	.bss.Sec_State,"aw",%nobits
 2683              		.set	.LANCHOR17,. + 0
 2686              	Sec_State:
 2687 0000 00       		.space	1
 2688              		.section	.bss.Sec_u32SeedValue,"aw",%nobits
 2689              		.align	2
 2690              		.set	.LANCHOR16,. + 0
 2693              	Sec_u32SeedValue:
 2694 0000 00000000 		.space	4
 2695              		.section	.bss.Security_Service_Availability_Flag,"aw",%nobits
 2698              	Security_Service_Availability_Flag:
 2699 0000 00       		.space	1
 2700              		.section	.bss.Send_Security_Seed,"aw",%nobits
 2701              		.align	2
 2702              		.set	.LANCHOR6,. + 0
 2705              	Send_Security_Seed:
 2706 0000 00000000 		.space	516
 2706      00000000 
 2706      00000000 
 2706      00000000 
 2706      00000000 
 2707              		.section	.bss.UDS_Struct,"aw",%nobits
 2708              		.align	2
 2709              		.set	.LANCHOR22,. + 0
 2712              	UDS_Struct:
 2713 0000 00000000 		.space	4
 2714              		.section	.bss.UDS_Tx_Confirm,"aw",%nobits
 2715              		.set	.LANCHOR21,. + 0
 2718              	UDS_Tx_Confirm:
 2719 0000 00       		.space	1
 2720              		.section	.bss.Write_Data_Client,"aw",%nobits
 2721              		.align	2
 2722              		.set	.LANCHOR7,. + 0
 2725              	Write_Data_Client:
 2726 0000 00000000 		.space	516
 2726      00000000 
 2726      00000000 
 2726      00000000 
 2726      00000000 
 2727              		.section	.bss.flag_sub_fun,"aw",%nobits
 2728              		.set	.LANCHOR20,. + 0
 2731              	flag_sub_fun:
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 81


 2732 0000 00       		.space	1
 2733              		.section	.bss.global_sec_flag,"aw",%nobits
 2734              		.set	.LANCHOR18,. + 0
 2737              	global_sec_flag:
 2738 0000 00       		.space	1
 2739              		.section	.bss.key,"aw",%nobits
 2740              		.align	2
 2743              	key:
 2744 0000 00000000 		.space	4
 2745              		.section	.bss.msg,"aw",%nobits
 2746              		.align	2
 2747              		.set	.LANCHOR8,. + 0
 2750              	msg:
 2751 0000 00000000 		.space	516
 2751      00000000 
 2751      00000000 
 2751      00000000 
 2751      00000000 
 2752              		.section	.bss.pos_Response,"aw",%nobits
 2753              		.align	2
 2754              		.set	.LANCHOR9,. + 0
 2757              	pos_Response:
 2758 0000 00000000 		.space	520
 2758      00000000 
 2758      00000000 
 2758      00000000 
 2758      00000000 
 2759              		.section	.bss.seed,"aw",%nobits
 2760              		.align	2
 2763              	seed:
 2764 0000 00000000 		.space	4
 2765              		.section	.data.Oil_Pressure_var,"aw"
 2766              		.align	2
 2767              		.set	.LANCHOR11,. + 0
 2770              	Oil_Pressure_var:
 2771 0000 AA998877 		.word	2005440938
 2772              		.section	.data.Oil_Temp_var,"aw"
 2773              		.align	2
 2774              		.set	.LANCHOR10,. + 0
 2777              	Oil_Temp_var:
 2778 0000 66550000 		.word	21862
 2779              		.section	.data.Source_Address,"aw"
 2782              	Source_Address:
 2783 0000 F1       		.byte	-15
 2784              		.section	.data.SupressedPosRes_CLient,"aw"
 2785              		.set	.LANCHOR2,. + 0
 2788              	SupressedPosRes_CLient:
 2789 0000 01       		.byte	1
 2790              		.section	.data.SupressedPosRes_Server,"aw"
 2791              		.set	.LANCHOR13,. + 0
 2794              	SupressedPosRes_Server:
 2795 0000 01       		.byte	1
 2796              		.section	.data.Target_Address,"aw"
 2797              		.set	.LANCHOR1,. + 0
 2800              	Target_Address:
 2801 0000 3D       		.byte	61
 2802              		.section	.data.VIN_number_var,"aw"
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 82


 2803              		.align	2
 2804              		.set	.LANCHOR12,. + 0
 2807              	VIN_number_var:
 2808 0000 11111111 		.ascii	"\021\021\021\021\021\021\021\021\021\021\021\021\021"
 2808      11111111 
 2808      11111111 
 2808      11
 2809 000d 11111111 		.ascii	"\021\021\021\021"
 2810              		.section	.data.global_session,"aw"
 2811              		.set	.LANCHOR14,. + 0
 2814              	global_session:
 2815 0000 01       		.byte	1
 2816              		.text
 2817              	.Letext0:
 2818              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 2819              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 2820              		.file 4 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103x6.h"
 2821              		.file 5 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 2822              		.file 6 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 2823              		.file 7 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_tim.h"
 2824              		.file 8 "Inc/CanIf.h"
 2825              		.file 9 "Inc/CanTp.h"
 2826              		.file 10 "Inc/uds_diag.h"
 2827              		.file 11 "Middlewares/Third_Party/FreeRTOS/Source/include/task.h"
 2828              		.file 12 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 2829              		.file 13 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 83


DEFINED SYMBOLS
                            *ABS*:00000000 uds_diag.c
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:18     .text.UDS_Init:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:24     .text.UDS_Init:00000000 UDS_Init
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:38     .text.UDS_Tester_Presenter_Client:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:44     .text.UDS_Tester_Presenter_Client:00000000 UDS_Tester_Presenter_Client
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:136    .text.UDS_Tester_Presenter_Client:00000060 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:143    .text.UDS_Read_Data_Client:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:149    .text.UDS_Read_Data_Client:00000000 UDS_Read_Data_Client
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:290    .text.UDS_Read_Data_Client:00000098 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:297    .text.UDS_Control_Session_Default:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:303    .text.UDS_Control_Session_Default:00000000 UDS_Control_Session_Default
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:396    .text.UDS_Control_Session_Default:00000060 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:403    .text.UDS_Control_Session_Extended:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:409    .text.UDS_Control_Session_Extended:00000000 UDS_Control_Session_Extended
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:502    .text.UDS_Control_Session_Extended:00000060 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:509    .text.UDS_Send_Security_Client:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:515    .text.UDS_Send_Security_Client:00000000 UDS_Send_Security_Client
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:645    .text.UDS_Send_Security_Client:00000084 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:652    .rodata.sendHexArrayAsASCII.str1.4:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:656    .text.sendHexArrayAsASCII:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:662    .text.sendHexArrayAsASCII:00000000 sendHexArrayAsASCII
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:751    .text.sendHexArrayAsASCII:00000040 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:756    .text.UDS_Write_Data_Client:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:762    .text.UDS_Write_Data_Client:00000000 UDS_Write_Data_Client
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:951    .text.UDS_Write_Data_Client:000000c8 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:958    .text.charToHex:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:964    .text.charToHex:00000000 charToHex
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1018   .text.UDS_Send_Pos_Res:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1024   .text.UDS_Send_Pos_Res:00000000 UDS_Send_Pos_Res
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1173   .text.UDS_Send_Pos_Res:00000080 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1178   .text.UDS_Write_Data_Server:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1184   .text.UDS_Write_Data_Server:00000000 UDS_Write_Data_Server
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1355   .text.UDS_Write_Data_Server:00000098 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1364   .text.UDS_Send_Neg_Res:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1370   .text.UDS_Send_Neg_Res:00000000 UDS_Send_Neg_Res
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1415   .text.UDS_Send_Neg_Res:00000024 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1420   .text.UDS_Tester_Presenter_Server:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1426   .text.UDS_Tester_Presenter_Server:00000000 UDS_Tester_Presenter_Server
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1472   .text.UDS_Tester_Presenter_Server:00000024 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1478   .text.reset_timer:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1484   .text.reset_timer:00000000 reset_timer
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1497   .text.stop_timer:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1503   .text.stop_timer:00000000 stop_timer
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1525   .text.start_timer:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1531   .text.start_timer:00000000 start_timer
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1544   .text.UDS_Control_Session_Server:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1550   .text.UDS_Control_Session_Server:00000000 UDS_Control_Session_Server
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1628   .text.UDS_Control_Session_Server:0000003c $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1635   .text.Sec_u32GetSeed:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1641   .text.Sec_u32GetSeed:00000000 Sec_u32GetSeed
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1664   .text.Sec_u32GetSeed:0000000c $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1669   .text.Sec_u32GetAlgorithm:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1675   .text.Sec_u32GetAlgorithm:00000000 Sec_u32GetAlgorithm
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1690   .text.Sec_u32GetKey:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1696   .text.Sec_u32GetKey:00000000 Sec_u32GetKey
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1726   .text.Sec_u32GetKey:00000010 $d
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 84


C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1731   .text.Sec_uint32SecurityAccess:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1737   .text.Sec_uint32SecurityAccess:00000000 Sec_uint32SecurityAccess
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1932   .text.Sec_uint32SecurityAccess:000000b0 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1941   .text.UDS_Read_Data_Server:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:1947   .text.UDS_Read_Data_Server:00000000 UDS_Read_Data_Server
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2150   .text.UDS_Read_Data_Server:000000bc $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2158   .text.server_call_back:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2164   .text.server_call_back:00000000 server_call_back
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2426   .text.server_call_back:00000100 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2437   .text.UDS_MainFunction:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2443   .text.UDS_MainFunction:00000000 UDS_MainFunction
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2571   .text.UDS_MainFunction:00000088 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2580   .text.UDS_Client_Callback:00000000 $t
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2586   .text.UDS_Client_Callback:00000000 UDS_Client_Callback
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2608   .text.UDS_Client_Callback:0000000c $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2800   .data.Target_Address:00000000 Target_Address
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2782   .data.Source_Address:00000000 Source_Address
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2794   .data.SupressedPosRes_Server:00000000 SupressedPosRes_Server
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2788   .data.SupressedPosRes_CLient:00000000 SupressedPosRes_CLient
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2743   .bss.key:00000000 key
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2763   .bss.seed:00000000 seed
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2666   .bss.PduDataPTR:00000000 PduDataPTR
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2712   .bss.UDS_Struct:00000000 UDS_Struct
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2718   .bss.UDS_Tx_Confirm:00000000 UDS_Tx_Confirm
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2731   .bss.flag_sub_fun:00000000 flag_sub_fun
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2750   .bss.msg:00000000 msg
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2645   .bss.Control:00000000 Control
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2757   .bss.pos_Response:00000000 pos_Response
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2807   .data.VIN_number_var:00000000 VIN_number_var
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2777   .data.Oil_Temp_var:00000000 Oil_Temp_var
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2770   .data.Oil_Pressure_var:00000000 Oil_Pressure_var
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2686   .bss.Sec_State:00000000 Sec_State
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2693   .bss.Sec_u32SeedValue:00000000 Sec_u32SeedValue
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2698   .bss.Security_Service_Availability_Flag:00000000 Security_Service_Availability_Flag
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2814   .data.global_session:00000000 global_session
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2737   .bss.global_sec_flag:00000000 global_sec_flag
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2673   .bss.PduInfoTypePtr:00000000 PduInfoTypePtr
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2659   .bss.Control_Session_Extended:00000000 Control_Session_Extended
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2705   .bss.Send_Security_Seed:00000000 Send_Security_Seed
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2652   .bss.Control_Session_Default:00000000 Control_Session_Default
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2725   .bss.Write_Data_Client:00000000 Write_Data_Client
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2680   .bss.Read_Data_Client:00000000 Read_Data_Client
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2641   .bss.Control:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2648   .bss.Control_Session_Default:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2655   .bss.Control_Session_Extended:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2662   .bss.PduDataPTR:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2669   .bss.PduInfoTypePtr:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2676   .bss.Read_Data_Client:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2687   .bss.Sec_State:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2689   .bss.Sec_u32SeedValue:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2699   .bss.Security_Service_Availability_Flag:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2701   .bss.Send_Security_Seed:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2708   .bss.UDS_Struct:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2719   .bss.UDS_Tx_Confirm:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2721   .bss.Write_Data_Client:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2732   .bss.flag_sub_fun:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2738   .bss.global_sec_flag:00000000 $d
ARM GAS  C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s 			page 85


C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2740   .bss.key:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2746   .bss.msg:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2753   .bss.pos_Response:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2760   .bss.seed:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2766   .data.Oil_Pressure_var:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2773   .data.Oil_Temp_var:00000000 $d
C:\Users\wup15j\AppData\Local\Temp\ccvwwYzy.s:2803   .data.VIN_number_var:00000000 $d

UNDEFINED SYMBOLS
CanTp_Transmit
UART_ReceiveAndConvert
sprintf
HAL_TIM_Base_Stop_IT
HAL_GetTick
vTaskDelay
